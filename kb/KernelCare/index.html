<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>KernelCare | Knowledge base</title>
    <meta name="description" content="CloudLinux Documentation">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.1c9cd124.css" as="style"><link rel="preload" href="/assets/js/app.da36fadb.js" as="script"><link rel="preload" href="/assets/js/22.5fdff440.js" as="script"><link rel="prefetch" href="/assets/js/10.1942d0f0.js"><link rel="prefetch" href="/assets/js/11.e59dcd5a.js"><link rel="prefetch" href="/assets/js/12.90ac86c3.js"><link rel="prefetch" href="/assets/js/13.14de4ed9.js"><link rel="prefetch" href="/assets/js/14.21abeab5.js"><link rel="prefetch" href="/assets/js/15.62e779e0.js"><link rel="prefetch" href="/assets/js/16.81b2b2ef.js"><link rel="prefetch" href="/assets/js/17.23b99257.js"><link rel="prefetch" href="/assets/js/18.a999b8b6.js"><link rel="prefetch" href="/assets/js/19.807aaab3.js"><link rel="prefetch" href="/assets/js/20.416e8ee9.js"><link rel="prefetch" href="/assets/js/21.c5366768.js"><link rel="prefetch" href="/assets/js/23.6d470fbc.js"><link rel="prefetch" href="/assets/js/24.0992162f.js"><link rel="prefetch" href="/assets/js/25.d65e4653.js"><link rel="prefetch" href="/assets/js/26.4be4ef64.js"><link rel="prefetch" href="/assets/js/27.610114bb.js"><link rel="prefetch" href="/assets/js/28.9f51bd74.js"><link rel="prefetch" href="/assets/js/29.266f7b10.js"><link rel="prefetch" href="/assets/js/3.73c3ee7b.js"><link rel="prefetch" href="/assets/js/30.e00a63b3.js"><link rel="prefetch" href="/assets/js/31.0430cb93.js"><link rel="prefetch" href="/assets/js/32.0c319e0d.js"><link rel="prefetch" href="/assets/js/33.65e63c27.js"><link rel="prefetch" href="/assets/js/34.0c068616.js"><link rel="prefetch" href="/assets/js/35.a9cbe4c7.js"><link rel="prefetch" href="/assets/js/36.69d70537.js"><link rel="prefetch" href="/assets/js/37.08289e92.js"><link rel="prefetch" href="/assets/js/38.aab72032.js"><link rel="prefetch" href="/assets/js/39.d54086d4.js"><link rel="prefetch" href="/assets/js/4.c5f4be1b.js"><link rel="prefetch" href="/assets/js/40.988b7b70.js"><link rel="prefetch" href="/assets/js/41.6dd6c2ef.js"><link rel="prefetch" href="/assets/js/42.0e74a0c5.js"><link rel="prefetch" href="/assets/js/43.3391aaae.js"><link rel="prefetch" href="/assets/js/44.da2ddf64.js"><link rel="prefetch" href="/assets/js/45.67142dec.js"><link rel="prefetch" href="/assets/js/46.286cface.js"><link rel="prefetch" href="/assets/js/47.b4b24a87.js"><link rel="prefetch" href="/assets/js/48.733fe4cb.js"><link rel="prefetch" href="/assets/js/49.022233ca.js"><link rel="prefetch" href="/assets/js/5.5ac32b68.js"><link rel="prefetch" href="/assets/js/50.0b06a7da.js"><link rel="prefetch" href="/assets/js/51.e69716c2.js"><link rel="prefetch" href="/assets/js/6.788f7cb0.js"><link rel="prefetch" href="/assets/js/7.bb646a5c.js"><link rel="prefetch" href="/assets/js/8.d60f6fd1.js"><link rel="prefetch" href="/assets/js/9.d765786c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f089aea3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1c9cd124.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-003a9abb><section class="navbar"><header class="navbar__header"><section class="navbar__block"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Knowledge base" class="logo"> <img src="/logo-short.svg" alt="Knowledge base" class="logo-short"></a> <div class="site-name">
        Knowledge base
      </div> <form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" placeholder="Search" class="search-query"></form></section> <section class="navbar__block"><button class="menu-btn menu-btn--products-list"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon icon--products-list"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg>
        Products
      </button> <button class="navbar-btn navbar-btn--submit-request">Submit request</button> <div class="links" style="max-width:nullpx;"><a href="https://cloudlinux.com/trial" target="_blank" class="navbar-btn navbar-btn--try-free">Try Free</a> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><span class="title">Language:</span> <a class="dropdown-title"><span class="text">En</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kb/KernelCare/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ru/" class="nav-link">Русский</a></li></ul></div></div></nav></div></section></header> <!----></section> <div class="sidebar-mask"></div> <div class="sidebar"> <ul class="sidebar-links"><li><div class="sidebar-group first"><div class="sidebar-heading open"><span>Content</span> <!----></div> <ul class="sidebar-group-items"><li><a href="/kb/Billing/" class="sidebar-link">Billing and Licensing</a></li><li><a href="/kb/KernelCare/" class="active sidebar-link">KernelCare</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kb/KernelCare/#kernelcare-installation-management-and-uninstall" class="sidebar-link">KernelCare installation, management and uninstall</a></li><li class="sidebar-sub-header"><a href="/kb/KernelCare/#why-uname-is-showing-the-old-kernel-version-after-kernelcare-patches-applied" class="sidebar-link">Why uname is showing the old kernel version after KernelCare patches applied?</a></li><li class="sidebar-sub-header"><a href="/kb/KernelCare/#what-ips-to-whitelist-for-the-proper-kernelcare-work" class="sidebar-link">What IPs to whitelist for the proper KernelCare work?</a></li><li class="sidebar-sub-header"><a href="/kb/KernelCare/#cpanel-whm-is-asking-for-a-reboot-while-kernelcare-is-used" class="sidebar-link">cPanel/WHM is asking for a reboot while KernelCare is used</a></li></ul></li><li><a href="/kb/Imunify/" class="sidebar-link">Imunify</a></li><li><a href="/kb/FAQ/" class="sidebar-link">FAQ</a></li><li><a href="/kb/Technology/" class="sidebar-link">Technology</a></li><li><a href="/kb/HowDoI/" class="sidebar-link">How Do I</a></li><li><a href="/kb/Troubleshooting/" class="sidebar-link">Troubleshooting</a></li></ul></div></li></ul> </div> <div class="page"> <div class="breadcrumb-wrapper page-breadcrumb" data-v-5e0e0acf><span class="breadcrumb-title" data-v-5e0e0acf>Knowledge base:</span> <a href="/kb/" class="breadcrumb router-link-active" data-v-5e0e0acf>
    KB
  </a><a href="/kb/KernelCare/" class="breadcrumb router-link-exact-active router-link-active" data-v-5e0e0acf>
    KernelCare
  </a></div> <div class="page-nav-wrapper"><div class="page-nav"><a href="/kb/Billing/" class="nav-arrow left"></a> <a href="/kb/Imunify/" class="nav-arrow right"></a></div></div> <div class="content content__default"><h1 id="kernelcare"><a href="#kernelcare" class="header-anchor">#</a> KernelCare</h1> <h2 id="kernelcare-installation-management-and-uninstall"><a href="#kernelcare-installation-management-and-uninstall" class="header-anchor">#</a> KernelCare installation, management and uninstall</h2> <p>KernelCare installation instructions are straightforward and are summarized on the following page: <a href="https://www.kernelcare.com/install-kernelcare/" target="_blank" rel="noopener noreferrer">https://www.kernelcare.com/install-kernelcare/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>To uninstall KernelCare just execute:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>yum remove kernelcare
</code></pre></div></div> <p>KernelCare is set to check for updates, and update the kernel every 4 hours. If you want to run the update manually, execute as root:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/kcarectl --update
</code></pre></div></div> <ul><li><strong>How Can I disable automatic updates?</strong></li></ul> <p>Edit file <em>/etc/sysconfig/kcare/kcare.conf</em></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>Set AUTO_UPDATE=False
</code></pre></div></div> <ul><li><strong>How can I see the 'updated' version of the kernel?</strong></li></ul> <p>Run:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/kcarectl --uname
</code></pre></div></div> <p>We provide convenience script <em>/usr/bin/kcare-uname</em> that has the same syntax as uname.</p> <ul><li><strong>How can I see which patches were applied to my kernel?</strong></li></ul> <p>Execute as root:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/kcarectl --patch-info
</code></pre></div></div> <ul><li><strong>Is KernelCare software released under open source?</strong></li></ul> <p>The kernel module is released under GPL2, and you can download it here: <a href="http://downloads.kernelcare.com/kmod_kcare.tar.gz" target="_blank" rel="noopener noreferrer">http://downloads.kernelcare.com/kmod_kcare.tar.gz<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Other components are distributed in binary format only under KernelCare License</p> <h2 id="why-uname-is-showing-the-old-kernel-version-after-kernelcare-patches-applied"><a href="#why-uname-is-showing-the-old-kernel-version-after-kernelcare-patches-applied" class="header-anchor">#</a> Why uname is showing the old kernel version after KernelCare patches applied?</h2> <p>The <strong>uname</strong> command always shows the same kernel version as before installing KernelCare. The reason we don't change the output of the uname command is due to the fact that we don't change original kernel signature or ABI with KernelCare. Yet, many install scripts depend on uname output to decide which modules to install or which header files to use for compilation.</p> <p>As such, changing the output of uname will create a lot of issues.</p> <p>You can get 'effective' kernel uname info by running:</p> <div class="language- extra-class"><pre class="language-text"><code>kcare-uname
</code></pre></div><h2 id="what-ips-to-whitelist-for-the-proper-kernelcare-work"><a href="#what-ips-to-whitelist-for-the-proper-kernelcare-work" class="header-anchor">#</a> What IPs to whitelist for the proper KernelCare work?</h2> <p>Generally, KernelCare requires http(s) connection to two servers for the proper work:</p> <p><code>cln.cloudlinux.com</code></p> <p><code>patches.kernelcare.com</code></p> <p>As of November 2019, their IPs are:</p> <p>69.175.3.9</p> <p>69.175.106.203</p> <h2 id="cpanel-whm-is-asking-for-a-reboot-while-kernelcare-is-used"><a href="#cpanel-whm-is-asking-for-a-reboot-while-kernelcare-is-used" class="header-anchor">#</a> cPanel/WHM is asking for a reboot while KernelCare is used</h2> <p><strong>Problem:</strong><br>
WHM/cPanel is asking for a reboot to apply the kernel updates.</p> <p><strong>Synopsis:</strong><br>
If you're using KernelCare, you don't need reboot the server after a kernel update because all security patches from the latest kernel are applied to a running kernel. But WHM/cPanel compares running kernel with boot kernel (the one selected as default in GRUB) as strings, so they have to match exactly, otherwise &quot;reboot required&quot; banner is shown. There are two known cases when this produce false-positives:</p> <ol><li>KernelCare applied patch that changed effective kernel version but new kernel package has not yet been installed by yum. In this case running kernel is newer than boot kernel, but since versions don't match as strings, WHM/cPanel shows the banner.</li> <li>For some reason, a specific kernel version is chosen as default in GRUB and this is not the latest version. This can be fixed by running <code>grub2-set-default 0</code> command.</li></ol> <p>WHM/cPanel developers are aware of this and working on the fix, but currently, there is no ETA.</p> <p><strong>Diagnostics:</strong></p> <p>If you want to make sure you are safe, please run the following commands:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># kcarectl --update
# kcarectl --uname
</code></pre></div></div> <p>If no errors were reported, you should be running the latest available kernel. Last command prints effective kernel version.</p> <p>There is another command to check what WHM/cPanel thinks about kernels:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># /usr/local/cpanel/3rdparty/bin/perl -e 'use Cpanel::Kernel::Status; use Data::Dumper; my $kernel = Cpanel::Kernel::Status::kernel_status(); print Dumper \$kernel;'
</code></pre></div></div> <p>Sample output:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$VAR1 = \{
  'unpatched_version' =&gt; '3.10.0-714.10.2.lve1.4.63.el7.x86_64',
  'running_version' =&gt; '3.10.0-714.10.2.lve1.4.65.el7',
  'reboot_required' =&gt; 1,
  'running_latest' =&gt; '',
  'boot_version' =&gt; '3.10.0-714.10.2.lve1.4.63.el7.x86_64',
  'has_kernelcare' =&gt; 1
};
</code></pre></div></div> <p>Here you can see that <strong>boot_version</strong> is older than <strong>running_version</strong>, yet <strong>reboot_reqired</strong> is set to <strong>1</strong>, which means a banner will be shown. In fact, reboot is NOT required in this particular case.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/cloudlinux/cloudlinux-doc/edit/dev/docs/kb/KernelCare/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="back-to-top" data-v-5366e0dd><a href="/kb/KernelCare/#app" class="nav-arrow top back-to-top__link" data-v-5366e0dd></a></div> </div> <div class="footer" data-v-58ab2eba><div data-v-58ab2eba><a href="https://cloudlinux.com" data-v-58ab2eba><img src="/assets/img/we-are-cloudlinux.783ed390.svg" alt="We are Cloudlinux" data-v-58ab2eba></a></div> <div class="footer-company-title" data-v-58ab2eba>2021. CloudLinux Inc</div> <div data-v-58ab2eba><div data-v-58ab2eba><a href="https://cloudlinux.zendesk.com/hc/sections/115001344329-How-do-I" target="_blank" data-v-58ab2eba>How to</a></div><div data-v-58ab2eba><a href="https://www.cloudlinux.com/getting-started-with-cloudlinux-os" target="_blank" data-v-58ab2eba>Getting started</a></div><div data-v-58ab2eba><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" data-v-58ab2eba>Contact support</a></div><div data-v-58ab2eba><a href="https://www.cloudlinux.com/blog" target="_blank" data-v-58ab2eba>Blog</a></div></div> <div class="social" data-v-58ab2eba><span class="footer-social-text" data-v-58ab2eba>Stay in touch</span> <a href="https://www.facebook.com/cloudlinux/" target="_blank" data-v-58ab2eba><img src="/fb.png" class="footer-social-logo" data-v-58ab2eba></a><a href="https://twitter.com/cloudlinuxos/" target="_blank" data-v-58ab2eba><img src="/tw.png" class="footer-social-logo" data-v-58ab2eba></a><a href="https://linkedin.com/company/cloudlinux" target="_blank" data-v-58ab2eba><img src="/in.png" class="footer-social-logo" data-v-58ab2eba></a><a href="https://www.youtube.com/channel/UCZ3YMHWnMP7TaxlXVay5-aw" target="_blank" data-v-58ab2eba><img src="/ytube.png" class="footer-social-logo" data-v-58ab2eba></a></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.da36fadb.js" defer></script><script src="/assets/js/22.5fdff440.js" defer></script>
  </body>
</html>
