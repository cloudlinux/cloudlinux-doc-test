(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{457:function(e,t,s){"use strict";s.r(t);var a=s(0),r=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"troubleshooting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),s("p",[e._v("Start from interactive decision tree based troubleshooting entries located at "),s("a",{attrs:{href:"https://cloudlinux.zendesk.com/hc/en-us/sections/115001345089-Troubleshooting",target:"_blank",rel:"noopener noreferrer"}},[e._v("CloudLinux ZenDesk"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"how-to-deal-with-boot-partition-is-full-message"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-to-deal-with-boot-partition-is-full-message"}},[e._v("#")]),e._v(' How To Deal With "Boot Partition is Full" Message')]),e._v(" "),s("p",[s("em",[e._v("This article is suitable for both CL6 and CL7 systems.")])]),e._v(" "),s("p",[e._v("The error appears for different reasons. For example, you have a separate boot partition, and something went wrong during the kernel uninstall process, so vmlinuz and initramfs files were not removed.")]),e._v(" "),s("p",[e._v("First of all, you need to check the kernels which are already installed on your system by running the\n"),s("code",[e._v("# rpm -q kernel")]),e._v(" , for example:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# rpm -q kernel\nkernel-2.6.32-954.3.5.lve1.4.61.el6.x86_64\nkernel-2.6.32-954.3.5.lve1.4.59.el6.x86_64\nkernel-2.6.32-954.3.5.lve1.4.63.el6.x86_64\n")])])])]),e._v(" "),s("p",[e._v("command, and then compare the output with the actual content of /boot partition:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# ls -la /boot\n\n  total 108956\n\n  dr-xr-xr-x. 4 root root 4096 Oct 29 19:31 .\n  dr-xr-xr-x. 25 root root 4096 Oct 29 19:29 ..\n  -rw-r--r--. 1 root root 109010 Sep 6 06:33 config-2.6.32-954.3.5.lve1.4.71.el6.x86_64\n  -rw-r--r--. 1 root root 109010 Sep 19 05:45 config-2.6.32-954.3.5.lve1.4.72.el6.x86_64\n  -rw-r--r-- 1 root root 149026 Oct 2 09:15 config-3.10.0-962.3.2.lve1.5.26.7.el6h.x86_64\n  drwxr-xr-x. 3 root root 4096 Oct 17 2018 efi\n  drwxr-xr-x. 2 root root 4096 Oct 29 19:29 grub\n  -rw-------. 1 root root 20054199 Sep 23 14:21 initramfs-2.6.32-954.3.5.lve1.4.71.el6.x86_64.img\n  -rw-------. 1 root root 20054014 Oct 3 11:11 initramfs-2.6.32-954.3.5.lve1.4.72.el6.x86_64.img\n  -rw------- 1 root root 35678685 Oct 29 19:20 initramfs-3.10.0-962.3.2.lve1.5.26.7.el6h.x86_64.img\n  -rw------- 1 root root 5003790 Oct 4 09:04 initrd-2.6.32-954.3.5.lve1.4.71.el6.x86_64kdump.img\n  -rw------- 1 root root 5509691 Oct 29 19:31 initrd-3.10.0-962.3.2.lve1.5.26.7.el6h.x86_64kdump.img\n")])])])]),e._v(" "),s("p",[e._v("If you see that files "),s("strong",[e._v("initrafs-")]),e._v(" or "),s("strong",[e._v("vmlinuz-")]),e._v(" does not match the $KVERSION (where "),s("code",[e._v("$KVERSION")]),e._v(" is the version of the installed CloudLinux OS kernel), then you can safely delete those files manually.")]),e._v(" "),s("p",[e._v("Alternatively, you execute the next commands:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("package-cleanup --oldkernels --count=3\n")])])])]),e._v(" "),s("p",[e._v("or")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("package-cleanup --oldkernels --count=2\n")])])])]),e._v(" "),s("p",[e._v("After performing one of the commands above, all old kernels will be removed, except for 2/3 last ones.")]),e._v(" "),s("p",[e._v('You can automate this process by adding "installonly_limit=3 (or 2) " to yum.conf; during the next kernel update, old kernels will be removed (except for 2\\3 last ones).')]),e._v(" "),s("p",[e._v("::: danger IMPORTANT\nWe don't recommend leaving only one kernel on the server; 2-3 kernels should be always installed on the server.\n:::")]),e._v(" "),s("h3",{attrs:{id:"errors-reported-in-console-during-the-kernel-package-installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#errors-reported-in-console-during-the-kernel-package-installation"}},[e._v("#")]),e._v(" Errors reported in console during the kernel package installation")]),e._v(" "),s("p",[e._v("First of all, check the "),s("em",[e._v("/etc/grub2.cfg")]),e._v(" file, it should contain the record of the updated kernel like this (in the case below, the updated version is 3.10.0-962.3.2.lve1.5.24.8.el7.x86_64):")]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/kern1.jpg",alt:"kern1.jpg"}})]),e._v(" "),s("p",[e._v("Second, make sure that initramfs file for the updated kernel is present in "),s("em",[e._v("/boot")]),e._v(" folder (marked in yellow):")]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/kern2.jpg",alt:"kern2.jpg"}})]),e._v(" "),s("p",[e._v("If any of those conditions are not met, make sure that your "),s("em",[e._v("/boot")]),e._v(" partition has enough free space (at least 60-70Mb free to install a new kernel), but note, that "),s("em",[e._v("/boot")]),e._v(" does not always have to be a separate partition.")]),e._v(" "),s("p",[e._v("Let's assume that this is the right case, and there is not enough free space on "),s("em",[e._v("/boot")]),e._v(" partition to install a new kernel. In this case, you can remove the oldest kernel in the list, here is how to do it:")]),e._v(" "),s("p",[e._v("First, you should run this command:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('awk -F\\\' \'$1=="menuentry " {print i++ " =  "$2}\' /etc/grub2.cfg\n')])])])]),e._v(" "),s("p",[e._v("The output should look like this:")]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/kern3.jpg",alt:"kern3.jpg"}})]),e._v(" "),s("p",[e._v("So, basically, what you need to do is remove the oldest kernel in the list, in this example it is 3.10.0-714.10.2.lve1.5.17.1.el7.x86_64 version. So, to remove this kernel version, just run:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum remove kernel-3.10.0-714.10.2.lve1.5.17.1.el7.x86_64\n")])])])]),e._v(" "),s("p",[e._v("::: danger\nYum should suggest removing only the kernel package, and not any other as a dependency!!\n:::")]),e._v(" "),s("p",[e._v("You can also "),s("a",{attrs:{href:"https://cloudlinux.zendesk.com/hc/requests/new",target:"_blank",rel:"noopener noreferrer"}},[e._v("submit a support ticket"),s("OutboundLink")],1),e._v(" with our support team and provide access to the server, so we could assist you with resolving the issue ASAP.")]),e._v(" "),s("h3",{attrs:{id:"unable-to-get-kernel-module-for-r1soft-backup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unable-to-get-kernel-module-for-r1soft-backup"}},[e._v("#")]),e._v(" Unable to get kernel-module for r1soft backup")]),e._v(" "),s("p",[e._v("If you are trying to setup r1soft backups and getting errors like:")]),e._v(" "),s("ul",[s("li",[e._v("Failed to get suitable module for this system: Failed to read directory open "),s("em",[e._v("some dir")]),e._v(": no such file or directory")]),e._v(" "),s("li",[e._v("Failed to find headers at "),s("em",[e._v("some dir")])]),e._v(" "),s("li",[e._v("Unable to find a valid source directory. Please install the kernel headers for your operating system")])]),e._v(" "),s("p",[e._v("This article should help you fix this.")]),e._v(" "),s("p",[e._v("First, let's ensure that r1soft kernel module not loaded so we don't do unnecessary work. Type to your console and execute:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ lsmod | grep hcp  \n")])])])]),e._v(" "),s("p",[e._v("if it's showing you something like:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$root@ds-119 [~]# lsmod | grep hcp  \n")])])])]),e._v(" "),s("p",[s("code",[e._v("hcpdriver 75664 4")])]),e._v(" "),s("p",[e._v("Then you don't have to do anything, module is already loaded and all you need to do - start "),s("strong",[e._v("r1soft")]),e._v(" agent.")]),e._v(" "),s("p",[e._v("If you see empty output, then we really have to get the module. Basically we need to ensure that system have corresponding kernel-devel and kernel-headers packages:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ rpm -qa | grep kernel-headers-$(uname -r)\n$ rpm -qa | grep kernel-devel-$(uname -r)\n")])])])]),e._v(" "),s("p",[e._v("If both commands giving you something like:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ kernel-devel-(your kernel version here).x86_64\n$ kernel-headers-(your kernel version here).x86_64\n")])])])]),e._v(" "),s("p",[e._v("and if r1soft module still can't be build, than there should be something related to current kernel you are running, maybe it's beta or not supported by r1soft. Try to update to latest stable kernel -> reboot -> install "),s("code",[e._v("kernel-devel")]),e._v(" and "),s("code",[e._v("kernel-headers")]),e._v(" -> try building module.")]),e._v(" "),s("p",[e._v("If you don't have modules installed, than we'll have to install them, but first - let's ensure that there are no packages for other kernels with:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ rpm -qa | grep -e kernel-headers -e kernel-devel\n")])])])]),e._v(" "),s("p",[e._v("and if there are any, let's remove them:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ rpm -e kernel-header-xxxxx.elx.x86_64 –nodeps\n$ rpm -e kernel-devel-xxxxx.elx.x86_64 –nodeps\n")])])])]),e._v(" "),s("p",[e._v("Repeat for everything you can find.")]),e._v(" "),s("p",[e._v("After this we are ready for install missing packages:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ yum install kernel-devel kernel-headers\n")])])])]),e._v(" "),s("p",[e._v("Once this done, try to get r1soft kernel module with:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ r1soft-setup --get-module\n")])])])]),e._v(" "),s("p",[e._v("If r1soft module still can't be build, than there should be something related to current kernel you are running, maybe it's beta or not supported by r1soft. Try to update to latest stable kernel -> reboot -> install "),s("code",[e._v("kernel-devel")]),e._v(" and "),s("code",[e._v("kernel-headers")]),e._v(" -> try building module.")]),e._v(" "),s("h3",{attrs:{id:"duplicate-log-entry-for-var-lib-mysql-mysqld-log"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#duplicate-log-entry-for-var-lib-mysql-mysqld-log"}},[e._v("#")]),e._v(" Duplicate log entry for /var/lib/mysql/mysqld.log")]),e._v(" "),s("p",[e._v("In case logrotate complains")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("/etc/cron.daily/logrotate:\nerror: mysqld:21 duplicate log entry for /var/lib/mysql/mysqld.log\n")])])])]),e._v(" "),s("p",[e._v("the simple workaround should be applied:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("~# ls -lsa /etc/logrotate.d/mysql*\n/etc/logrotate.d/mysql\n/etc/logrotate.d/mysqld\n~# rm /etc/logrotate.d/mysql\n")])])])]),e._v(" "),s("h3",{attrs:{id:"what-to-do-if-your-site-is-not-working-with-opcache-php-extension-enabled"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-to-do-if-your-site-is-not-working-with-opcache-php-extension-enabled"}},[e._v("#")]),e._v(" What to do if your site is not working with opcache PHP extension enabled")]),e._v(" "),s("p",[e._v("The symptoms: your site throws error 503, or just a blank page with opcache extension enabled.")]),e._v(" "),s("p",[e._v("In some rare cases, you can try to add the next parameter to opcache.ini:")]),e._v(" "),s("p",[e._v('<span class="notranslate>'),s("code",[e._v("opcache.optimization_level=0")])]),e._v(" "),s("p",[e._v('The opcache optimizer is not working very well in some cases, and PHP just crashes when opcache tries to optimize it. With <span class="notranslate>'),s("code",[e._v("opcache.optimization_level")]),e._v(" set to 0, it will just cache the content, no optimizations will be made.")]),e._v(" "),s("h3",{attrs:{id:"what-does-error-failed-to-create-symlink-13-permission-denied-mean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-does-error-failed-to-create-symlink-13-permission-denied-mean"}},[e._v("#")]),e._v(' What does "Error : failed to create symlink (13)Permission denied" mean?')]),e._v(" "),s("p",[e._v("We have recently introduced new protection type, called "),s("router-link",{attrs:{to:"/cloudlinux_os_kernel/#link-traversal-protection"}},[e._v("Link Traversal Protection")])],1),e._v(" "),s("p",[e._v("In very rare cases, it might break some of the CloudLinux OS and cPanel functionality, for example:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# selectorctl --set-user-current=5.4 --user=user\nError : failed to create symlink /home/user/.cagefs/opt/alt/php52/link/conf to /opt/alt/php52/etc/php.d: [Err code 13] Permission denied \nError : failed to create symlink /home/user/.cagefs/opt/alt/php53/link/conf to /opt/alt/php53/etc/php.d: [Err code 13] Permission denied \nError : failed to create symlink /home/user/.cagefs/opt/alt/php51/link/conf to /opt/alt/php51/etc/php.d: [Err code 13] Permission denied \nError : failed to create symlink /home/user/.cagefs/opt/alt/php56/link/conf to /opt/alt/php56/etc/php.d: [Err code 13] Permission denied \n")])])])]),e._v(" "),s("p",[e._v("This means that the protection is enabled, both keys "),s("code",[e._v("fs.protected_symlinks_create")]),e._v(" and "),s("code",[e._v("fs.protected_hardlinks_create")]),e._v(" are set to 1, but the parameters set for "),s("code",[e._v("fs.protected_symlinks_allow_gid")]),e._v(" and "),s("code",[e._v("fs.protected_hardlinks_allow_gid")]),e._v(" are not correct. The values shall correspond to the "),s("strong",[e._v("linksafe")]),e._v(" group ID, for example:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# getent group linksafe\nlinksafe:x:993:mailman\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# sysctl -a |grep allow_gid\nfs.protected_hardlinks_allow_gid = 993\nfs.protected_symlinks_allow_gid = 993\n")])])])]),e._v(" "),s("h3",{attrs:{id:"what-does-yum-error-retry-no-cache-self-retry-no-cache-mean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-does-yum-error-retry-no-cache-self-retry-no-cache-mean"}},[e._v("#")]),e._v(' What does yum error "retry_no_cache=self._retry_no_cache" mean?')]),e._v(" "),s("p",[s("strong",[e._v("The symptoms:")])]),e._v(" "),s("p",[e._v("You are trying to convert your CentOS system to CloudLinux OS, and the conversion process fails with the next messages:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("File \"/usr/share/yum-plugins/rhnplugin.py\", line 410, in _getFile \nstart, end, copy_local, checkfunc, text, reget, cache, size) \nFile \"/usr/share/yum-plugins/rhnplugin.py\", line 490, in _noExceptionWrappingGet\nretry_no_cache=self._retry_no_cache \nAttributeError: 'RhnRepo' object has no attribute '_retry_no_cache'\n")])])])]),e._v(" "),s("p",[e._v("In short, the issue is solved in newer yum versions, so you just need to update yum package before the conversion.")]),e._v(" "),s("p",[e._v("But anyway there are few ways to solve the issue directly.")]),e._v(" "),s("p",[s("strong",[e._v("The first method:")])]),e._v(" "),s("ul",[s("li",[e._v("disable "),s("strong",[e._v("rhnplugin")]),e._v(" in "),s("em",[e._v("/etc/yum/pluginconf.d/rhnplugin.conf")]),e._v(" (change enabled=1 to enabled=0)")]),e._v(" "),s("li",[e._v("recover CentOS repos:"),s("br"),e._v(" "),s("code",[e._v("mv /etc/cl-convert-saved/CentOS* /etc/yum.repos.d/")])]),e._v(" "),s("li",[e._v("run "),s("code",[e._v("yum update yum")])]),e._v(" "),s("li",[e._v("remove CentOS repos:"),s("br"),e._v(" "),s("code",[e._v("mv /etc/yum.repos.d/CentOS* /etc/cl-convert-saved/")])]),e._v(" "),s("li",[e._v("enable "),s("strong",[e._v("rhnplugin")]),e._v(" back by editing the "),s("em",[e._v("/etc/yum/pluginconf.d/rhnplugin.conf")]),e._v(" file")])]),e._v(" "),s("p",[s("strong",[e._v("The second method:")])]),e._v(" "),s("p",[e._v("Use "),s("strong",[e._v("rpm")]),e._v(" to update required packages:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("wget http://repo.cloudlinux.com/cloudlinux/7.4/install/x86_64/Packages/yum-3.4.3-154.el7.cloudlinux.noarch.rpm\nwget http://repo.cloudlinux.com/cloudlinux/7.4/install/x86_64/Packages/rpm-4.11.3-25.el7.x86_64.rpm\nwget http://repo.cloudlinux.com/cloudlinux/7.4/install/x86_64/Packages/rpm-python-4.11.3-25.el7.x86_64.rpm\nwget http://repo.cloudlinux.com/cloudlinux/7.4/install/x86_64/Packages/rpm-libs-4.11.3-25.el7.x86_64.rpm\nwget http://repo.cloudlinux.com/cloudlinux/7.4/install/x86_64/Packages/rpm-build-libs-4.11.3-25.el7.x86_64.rpm\nwget http://mirror.centos.org/centos/7/os/x86_64/Packages/rpm-build-4.11.3-25.el7.x86_64.rpm\nwget http://repo.cloudlinux.com/cloudlinux/7.4/install/x86_64/Packages/python-urlgrabber-3.10-8.el7.noarch.rpm\n")])])])]),e._v(" "),s("p",[e._v("and then:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rpm -Uv rpm-4.11.3-25.el7.x86_64.rpm rpm-libs-4.11.3-25.el7.x86_64.rpm rpm-python-4.11.3-25.el7.x86_64.rpm yum-3.4.3-154.el7.cloudlinux.noarch.rpm rpm-build-4.11.3-25.el7.x86_64.rpm rpm-build-libs-4.11.3-25.el7.x86_64.rpm python-urlgrabber-3.10-8.el7.noarch.rpm\n")])])])]),e._v(" "),s("h3",{attrs:{id:"incorrect-kernel-name-release-is-shown-in-cpanel-whm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#incorrect-kernel-name-release-is-shown-in-cpanel-whm"}},[e._v("#")]),e._v(" Incorrect kernel name/release is shown in cPanel/WHM")]),e._v(" "),s("p",[s("strong",[e._v("Description/resolution:")])]),e._v(" "),s("p",[s("em",[e._v("/var/cpanel/sysinfo.config")]),e._v(" was not updated properly during the latest kernel change. To fix this issue you need move/remove this config file:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# mv /var/cpanel/sysinfo.config /var/cpanel/sysinfo.config.bak\n")])])])]),e._v(" "),s("p",[e._v("and recreate it by running:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# /scripts/gensysinfo\n# /scripts/restartsrv_cpsrvd\n")])])])]),e._v(" "),s("p",[e._v("In case if you receive the error: "),s("code",[e._v('""ERROR: The system cannot update the /var/cpanel/sysinfo.config file because it cannot determine your distribution\'s major version."')]),e._v(" – please run the following command:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rpm -qf --queryformat '%{VERSION}\\n' /etc/redhat-release\n")])])])]),e._v(" "),s("p",[e._v("Output other than the numbers 6 or 7 indicates a problem and you need to "),s("a",{attrs:{href:"https://cloudlinux.zendesk.com/hc/requests/new",target:"_blank",rel:"noopener noreferrer"}},[e._v("submit a support ticket"),s("OutboundLink")],1),e._v(" and provide all the information above.")]),e._v(" "),s("h3",{attrs:{id:"how-to-fix-lveinfo-database-error"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-to-fix-lveinfo-database-error"}},[e._v("#")]),e._v(" How to fix lveinfo database error?")]),e._v(" "),s("p",[s("strong",[e._v("Problem:")])]),e._v(" "),s("p",[e._v("CloudLinux LVE Manager doesn't show anything on statistics tab, "),s("code",[e._v("lveinfo")]),e._v(" utility displays errors.")]),e._v(" "),s("p",[s("strong",[e._v("Synopsis:")])]),e._v(" "),s("p",[e._v("If you see errors when running "),s("code",[e._v("lveinfo")]),e._v(" command-line tool and the last lines looks like these:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("File \"/opt/alt/python27/lib64/python2.7/site-packages/sqlalchemy/engine/default.py\", line 436, in do_execute \ncursor.execute(statement, parameters) \nsqlalchemy.exc.DatabaseError: (DatabaseError) database disk image is malformed u'SELECT lve_stats2_servers.lve_version \\nFROM lve_stats2_servers \\nWHERE lve_stats2_servers.server_id = ?' ('0195404a-a',) \nSentry is attempting to send 1 pending error messages \nWaiting up to 10 seconds \nPress Ctrl-C to quit\n")])])])]),e._v(" "),s("p",[e._v("It means that LVE stats database is corrupted.")]),e._v(" "),s("p",[s("strong",[e._v("Solution:")])]),e._v(" "),s("p",[e._v("Please follow these steps to backup and rebuild database and restore LVE statistics functionality:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# service lvestats stop\n# tar -zcvf /root/lveinfo_backup_$(date +%Y-%m-%d).tar.gz /var/lve/\n# mv /var/lve/lvestats2.db{,.old}\n# lve-create-db --recreate\n# service lvestats start\n")])])])]),e._v(" "),s("h3",{attrs:{id:"why-there-is-no-package-ea-apache24-mod-hostinglimits-or-ea-apache24-mod-lsapi-available"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why-there-is-no-package-ea-apache24-mod-hostinglimits-or-ea-apache24-mod-lsapi-available"}},[e._v("#")]),e._v(" Why there is no package ea-apache24_mod_hostinglimits or ea-apache24_mod_lsapi available?")]),e._v(" "),s("p",[e._v("Since EasyApache 4 switched from compiling everything from sources (Apache itself, its modules, PHP, etc) to a RPM based setup (Apache, its modules, PHP, etc are installed as RPMs), mentioned packages should be installed from "),s("strong",[e._v("cl-ea4")]),e._v(" repository, as the most packages from the EA4 cPanel repository are not compatible with CloudLinux packages and this can lead to various errors.")]),e._v(" "),s("p",[e._v("But how to enable (or setup) "),s("strong",[e._v("cl-ea4")]),e._v(" repository and install all packages required by CloudLinux OS from this repo?")]),e._v(" "),s("p",[e._v("The answer is simple: you just need to run our script, which will do all the work. For example:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# cd ~; wget https://repo.cloudlinux.com/cloudlinux/sources/cloudlinux_ea3_to_ea4\n# sh cloudlinux_ea3_to_ea4 --convert\n")])])])]),e._v(" "),s("p",[e._v("The script will install "),s("strong",[e._v("cl-ea4")]),e._v(" repository, and then install all required packages and EA4 profile.")]),e._v(" "),s("p",[e._v("For more detailed information, please refer to "),s("router-link",{attrs:{to:"/kb/FAQ/#cloudlinux-os-and-easyapache-4"}},[e._v("this doc section")]),e._v(".")],1),e._v(" "),s("h3",{attrs:{id:"why-lve-stats-are-not-collected-for-some-accounts-or-they-are-not-visible-in-lve-manager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why-lve-stats-are-not-collected-for-some-accounts-or-they-are-not-visible-in-lve-manager"}},[e._v("#")]),e._v(" Why LVE stats are not collected for some accounts, or they are not visible in LVE Manager?")]),e._v(" "),s("p",[e._v("If you transfer one or more users from another server, please make sure that UID_MIN value in "),s("em",[e._v("/etc/login.defs")]),e._v(" file is lower than the UID for the transferred user(s).")]),e._v(" "),s("p",[e._v("For example, if you transfer accounts from an old server to a new one, and on the old server accounts have had UIDs below 1000, on the new server with UID_MIN 1000 the statistics won't be collected for transferred accounts, and those users won't be visible in LVE Manager as well.")]),e._v(" "),s("h3",{attrs:{id:"how-to-resolve-“missing-perl-module”-during-the-packages-update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-to-resolve-“missing-perl-module”-during-the-packages-update"}},[e._v("#")]),e._v(" How to resolve “Missing perl module” during the packages update?")]),e._v(" "),s("p",[s("strong",[e._v("Description:")])]),e._v(" "),s("p",[e._v("The update process failed with the following output (cut):")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("---\x3e Package python2-hwdata.noarch 0:2.3.5-1.el6 will be obsoleting\n--\x3e Running transaction check\n---\x3e Package ea-openssl.x86_64 1:1.0.2k-6.el6.cloudlinux will be installed\n--\x3e Processing Dependency: perl(WWW::Curl::Easy) for package: 1:ea-openssl-1.0.2k-6.el6.cloudlinux.x86_64\n--\x3e Finished Dependency Resolution\nError: Package: 1:ea-openssl-1.0.2k-6.el6.cloudlinux.x86_64 (cl-ea4)\nRequires: perl(WWW::Curl::Easy)\nYou could try using --skip-broken to work around the problem\nYou could try running: rpm -Va --nofiles --nodigest\n")])])])]),e._v(" "),s("p",[e._v("This is caused by exclude line in "),s("em",[e._v("/etc/yum.conf")]),e._v(", which contains "),s("code",[e._v("perl*")]),e._v(", and it means that all perl packages are excluded from the update.")]),e._v(" "),s("p",[e._v("To update just required package ("),s("strong",[e._v("ea-openssl")]),e._v(" in the above case), "),s("strong",[e._v("perl")]),e._v(" must be removed from the excludes.")]),e._v(" "),s("p",[e._v("The correct way to update the package is:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# yum update ea-openssl --disableexcludes=main\n")])])])]),e._v(" "),s("p",[e._v("After this, you can run "),s("code",[e._v("yum update")]),e._v(" to update the rest of the packages.")]),e._v(" "),s("h3",{attrs:{id:"what-to-do-if-the-slab-cache-grows-and-overall-server-performance-is-bad"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-to-do-if-the-slab-cache-grows-and-overall-server-performance-is-bad"}},[e._v("#")]),e._v(" What to do if the Slab cache grows and overall server performance is bad?")]),e._v(" "),s("p",[s("strong",[e._v("The issue description:")])]),e._v(" "),s("p",[e._v("Say, you have a large partition (1Tb or larger), for example "),s("em",[e._v("/home")]),e._v(", which is almost full. This means that there are a lot of user’s files on it, and when some software like backup scans all these files, Slab cache starts to grow. Here is an example of "),s("em",[e._v("/proc/meminfo")]),e._v(":")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# cat /proc/meminfo\nMemTotal:       131822716 kB\nMemFree:         8396188 kB\nMemAvailable:   125324428 kB\nBuffers:           18040 kB\nCached:            94444 kB\nSwapCached:       741444 kB\nActive:           873220 kB\nInactive:         972620 kB\nActive(anon):     818524 kB\nInactive(anon):   925616 kB\nActive(file):      54696 kB\nInactive(file):    47004 kB\nUnevictable:           0 kB\nMlocked:               0 kB\nSwapTotal:      31999996 kB\nSwapFree:       20412420 kB\nDirty:                 0 kB\nWriteback:             0 kB\nAnonPages:       1228792 kB\nMapped:            40932 kB\nShmem:              8124 kB\nSlab:           120366508 kB\nSReclaimable:   117102628 kB\nSUnreclaim:      3263880 kB\n")])])])]),e._v(" "),s("p",[s("strong",[e._v("Slab is over 100Gb !")])]),e._v(" "),s("p",[e._v("In this case, the overall server performance could decrease, especially when some heavy IO software is running.")]),e._v(" "),s("p",[e._v("There are a few settings to control the Slab cache size.")]),e._v(" "),s("p",[e._v("First, we recommend to set "),s("code",[e._v("vm.vfs_cache_min_ratio")]),e._v(" to 0.")]),e._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),s("p",[e._v("Setting vm.vfs_cache_min_ratio to 0 on the kernel version prior to 3.10.0-614.10.2.lve1.4.46 will crash it. So, you can safely set vm.vfs_cache_min_ratio to 0 if your server is running the kernel 3.10.0-614.10.2.lve1.4.46 or higher.")])]),s("p",[e._v("This parameter controls the minimum amount (in percentage) of dentry\\inode cache which can not be reclaimed. The default value is 2, which is rather small, but with a lot of cgroups used in the system, this two percents can be a very big value.")]),e._v(" "),s("p",[e._v("The second parameter is "),s("code",[e._v("vm.vfs_cache_pressure")]),e._v(", the default value is 100. Basically, this parameter controls how aggressively the kernel will try to shrink the dentry/inode cache, so setting it to a bigger value could help to reduce the Slab cache size. The value can be set to 500 or even 1000.")]),e._v(" "),s("h3",{attrs:{id:"the-ssl-certificate-failed-verification-error-while-running-yum"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-ssl-certificate-failed-verification-error-while-running-yum"}},[e._v("#")]),e._v(' "The SSL certificate failed verification" error while running yum')]),e._v(" "),s("p",[s("strong",[e._v("Issue symptoms")])]),e._v(" "),s("p",[e._v("Yum is not working producing the following error:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ yum check-update\n\nThe SSL certificate failed verification.\n")])])])]),e._v(" "),s("p",[s("strong",[e._v("Cause and resolution")])]),e._v(" "),s("p",[e._v("Please check the following causes:")]),e._v(" "),s("ol",[s("li",[e._v("Server time should be correct, could be checked with")])]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ntpdate -qv pt.pool.ntp.org\n")])])])]),e._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[e._v("The server should be able to resolve repo/cln websites properly, if you use custom resolvers - disable them in "),s("em",[e._v("/etc/resolv.conf")]),e._v(" and set 8.8.4.4 :")])]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("nameserver 8.8.4.4\n")])])])]),e._v(" "),s("h3",{attrs:{id:"checking-personal-users-disk-cache-if-lveinfo-shows-memory-usage-but-no-processes-there"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#checking-personal-users-disk-cache-if-lveinfo-shows-memory-usage-but-no-processes-there"}},[e._v("#")]),e._v(" Checking personal users disk cache (if lveinfo shows memory usage but no processes there)")]),e._v(" "),s("p",[e._v("If you see no processes under some user, but LVE Manager keeps telling it is using some memory, then most probably the memory is taken by users disk cache. To check personal users disk cache (if lveinfo shows memory usage but not processes there):")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ cat /proc/bc/XXX/meminfo\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("...\nCached: 67300 kB\n...\n")])])])]),e._v(" "),s("p",[e._v("where XXX is user ID, could be taken with:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ id username\n")])])])]),e._v(" "),s("h3",{attrs:{id:"mod-hostinglimits-already-inside-lve-poa-hostingng"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mod-hostinglimits-already-inside-lve-poa-hostingng"}},[e._v("#")]),e._v(" mod_hostinglimits: Already inside LVE. POA/HostingNG")]),e._v(" "),s("p",[e._v("If you are using POA/HostingNG and see the following errors in logs:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[Thu Aug 14 14:11:37 2014] [error] mod_hostinglimits:Already inside LVE: LVE(121842) HANDLER(php-cgi-script) HOSTNAME(domain1.com) URL(/index.php) TID(8354) errno (1) Read more: http://e.cloudlinux.com/MHL-EPERM\n[Thu Aug 14 14:11:37 2014] [error] mod_hostinglimits:Already inside LVE: LVE(123272) HANDLER(php-cgi-script) HOSTNAME(domain2.com) URL(/home.php) TID(8052) errno (1) Read more: http://e.cloudlinux.com/MHL-EPERM\n")])])])]),e._v(" "),s("p",[e._v("The issue is in how Apache works on POA. To fix the issue on CloudLinux OS 6 we have to allow setting up LVE by other (not just LVE admin) users: Starting from kernel "),s("strong",[e._v("2.6.32-673.8.1.lve1.4.3.1")]),e._v(" :")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$ echo "options kmodlve lve_user_setup=Y" > /etc/modprobe.d/lve.conf\n$ echo "Y" > /sys/module/kmodlve/parameters/lve_user_setup\n')])])])]),e._v(" "),s("p",[e._v("For kernels earlier than "),s("strong",[e._v("2.6.32-673.8.1.lve1.4.3.1")]),e._v(":")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$ echo "options lve lve_user_setup=Y" > /etc/modprobe.d/lve.conf\n$ echo "Y" > /sys/module/lve/parameters/lve_user_setup\n')])])])]),e._v(" "),s("p",[e._v("Unfortunately, "),s("code",[e._v("lve_setup_enter")]),e._v(" used for POA (HostingNG) in "),s("code",[e._v("mod_hostinglimits")]),e._v(" can not work correctly with CloudLinux OS 5, it always return "),s("code",[e._v("EPERM")]),e._v(". So it does not work on CL5 kernels (only on CL5 Hybrid and newer kernel branches). Hybrid kernel are described in the following "),s("router-link",{attrs:{to:"/cloudlinux_os_kernel/#hybrid-kernels"}},[e._v("article")])],1),e._v(" "),s("h3",{attrs:{id:"i-see-several-security-erratas-in-cln-how-can-i-resolve-them"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-see-several-security-erratas-in-cln-how-can-i-resolve-them"}},[e._v("#")]),e._v(" I see several security erratas in CLN, how can I resolve them?")]),e._v(" "),s("p",[e._v("CLN will display security erratas for your servers when some of the RPMs are not updated. This is ok for cPanel servers, as cPanel has quite a few packages in "),s("em",[e._v("/etc/yum.conf")]),e._v(" "),s("strong",[e._v("exclude")]),e._v(" line. Those packages are replicated by cPanel, or compiled from source by cPanel. You can safely ignore those erratas, as cPanel will make sure that all the software & packages are updated.")]),e._v(" "),s("h3",{attrs:{id:"a-client-is-getting-508-service-temporary-unavailable-error-on-his-site"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-client-is-getting-508-service-temporary-unavailable-error-on-his-site"}},[e._v("#")]),e._v(" A client is getting 508 Service Temporary Unavailable error on his site")]),e._v(" "),s("p",[e._v("The customer is most likely restricted due to high usage. You can diagnose the problem by running:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("lveinfo --period=1d --by-fault=mep --display-username\n")])])])]),e._v(" "),s("p",[e._v("If a user is limited to max entry processes, you will see how many times his site was limited (served 508) within past day (--period=1d). You can also monitor current usage via:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("lvetop\n")])])])]),e._v(" "),s("p",[s("strong",[e._v("Solution:")])]),e._v(" "),s("p",[e._v("In most cases, you don't want to do anything, as this customer might overload the system by exhausting all Apache connections or some other resources of the system. Yet, in some cases you might want to increase the limit by doing:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("lvectl set USER_ID --maxEntryProcs=NEW_LIMIT --save\n")])])])]),e._v(" "),s("p",[e._v("Default limit is 20 concurrent connections (max entry processes).")]),e._v(" "),s("h3",{attrs:{id:"fatal-resource-shortage-privvmpages-ub-185096"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fatal-resource-shortage-privvmpages-ub-185096"}},[e._v("#")]),e._v(" Fatal resource shortage: privvmpages, UB 185096")]),e._v(" "),s("p",[e._v("The following message appears in "),s("em",[e._v("/var/log/messages")]),e._v(":")]),e._v(" "),s("p",[s("code",[e._v("Fatal resource shortage: privvmpages, UB 185096")])]),e._v(" "),s("p",[e._v("The message means that some site was limited on memory. To find out which one run:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("lveinfo --period=1d --by-fault=mem --display-username\n")])])])]),e._v(" "),s("p",[e._v("It will show you users that hit memory limit. You can adjust memory limit for those users by running:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("lvectl set USER_ID --mem=XXXXm\n")])])])]),e._v(" "),s("p",[e._v("Default limit is 1024 megabytes")]),e._v(" "),s("h3",{attrs:{id:"error-installing-r1soft-module-via-r1soft-cki"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error-installing-r1soft-module-via-r1soft-cki"}},[e._v("#")]),e._v(" Error installing r1soft module via r1soft-cki")]),e._v(" "),s("p",[e._v("If you are having issues installing "),s("strong",[e._v("r1soft-cki")]),e._v(", and getting an error message like this:")]),e._v(" "),s("p",[s("code",[e._v("Unable to find a valid source directory. Please install the kernel headers for your operating system")])]),e._v(" "),s("p",[e._v("Do:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum install kernel-devel\n")])])])]),e._v(" "),s("p",[e._v("If you are running one of the beta kernels, add "),s("strong",[e._v("--enablerepo=cloudlinux-updates-testing")]),e._v(" to the end of the yum command, like:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum install kernel-devel --enablerepo=cloudlinux-updates-testing\n")])])])]),e._v(" "),s("p",[e._v("Re-run "),s("strong",[e._v("r1soft-cki")]),e._v(" tool after that.")]),e._v(" "),s("h3",{attrs:{id:"why-do-i-see-processes-using-more-cpu-that-i-set-the-limit-for"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why-do-i-see-processes-using-more-cpu-that-i-set-the-limit-for"}},[e._v("#")]),e._v(" Why do I see processes using more CPU that I set the limit for?")]),e._v(" "),s("p",[e._v("Quite often you will see a process using 99% of CPU, even though the CPU limit is set to 25%.")]),e._v(" "),s("p",[e._v("This is due to the fact that top shows CPU usage based on a single CPU, while LVE allocates usage across all CPUs on the system.")]),e._v(" "),s("p",[e._v("So, on quad core server, 25% of CPU resources is 1 CPU And if top shows 99% usage - it is also just 1 CPU.")]),e._v(" "),s("p",[e._v("If you have dual-core server and set the limit at 25%, you will not see a process using more than 50% CPU when you view it via top.")]),e._v(" "),s("p",[e._v("And on single core server, the limits will match.")]),e._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),s("p",[e._v("LVE CPU limits are not exact, they can error within about 3% in either direction.")])]),s("h3",{attrs:{id:"i-have-a-lot-of-processes-like-migration-xxxx-running-on-my-system"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-have-a-lot-of-processes-like-migration-xxxx-running-on-my-system"}},[e._v("#")]),e._v(" I have a lot of processes like: [migration/xxxx] running on my system")]),e._v(" "),s("p",[e._v("Migration processes are kernel level threads running on the system, one per LVE.")]),e._v(" "),s("p",[e._v("They don't take up much memory (about 4k each), or CPU resources. Their purpose is to better distribute the load on multi-core servers. Yet, even if you have a system with just one CPU - you will still see at least one such process per each LVE.")]),e._v(" "),s("p",[e._v("Those processes can be safely ignored.")]),e._v(" "),s("h3",{attrs:{id:"rpm-or-yum-processes-hangs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rpm-or-yum-processes-hangs"}},[e._v("#")]),e._v(" RPM or yum processes hangs")]),e._v(" "),s("p",[e._v("Occasionally, the RPM database on a CloudLinux machine can become corrupted. It can happen when an RPM transaction is interrupted at a critical time. Symptoms of this problem include one of the following programs not responding or freezing:")]),e._v(" "),s("ul",[s("li",[e._v("up2date")]),e._v(" "),s("li",[e._v("The CLN alert notification tool (applet in the Gnome or KDE panel)")]),e._v(" "),s("li",[e._v("rhn_check")]),e._v(" "),s("li",[e._v("rpm")])]),e._v(" "),s("p",[e._v("This problem can also cause a system to stop checking in with CLN. To fix this problem, run the following commands as root:")]),e._v(" "),s("ol",[s("li",[e._v("Kill all RPM and yum processes (rhn_check, yum, rpm, rhn-applet):")])]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ps -axwww | grep rpm\n")])])])]),e._v(" "),s("p",[e._v("In the list of processes, the first number on each line is the PID. For all PIDs listed except for the one associated with grep:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("kill -9 <PID>\n")])])])]),e._v(" "),s("p",[e._v("Repeat the above steps for each of the programs listed.")]),e._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Remove any RPM lock files (/var/lib/rpm/__db*):")])]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rm -rf /var/lib/rpm/__db*\n")])])])]),e._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[e._v("Rebuild the RPM database:")])]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rpm --rebuilddb\n")])])])]),e._v(" "),s("p",[e._v("If the above steps do not work, please contact technical support for more assistance.")]),e._v(" "),s("h3",{attrs:{id:"yum-doesn-t-work-returns-segmentation-fault"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yum-doesn-t-work-returns-segmentation-fault"}},[e._v("#")]),e._v(" yum doesn't work, returns Segmentation fault")]),e._v(" "),s("p",[e._v("A common reason for such yum failure is that "),s("strong",[e._v("libxml2")]),e._v(" or "),s("strong",[e._v("zlib")]),e._v(" was installed from source code.")]),e._v(" "),s("p",[e._v("Please, check "),s("em",[e._v("/usr/local/lib/")]),e._v(" directory for the files like: "),s("code",[e._v("libz*")]),e._v(" or "),s("code",[e._v("libxml2*")])]),e._v(" "),s("p",[e._v("If you have such files, remove all of them, and run "),s("strong",[e._v("ldconfig")]),e._v(", yum should start working after that.")]),e._v(" "),s("p",[e._v("The issue happens mostly on DirectAdmin server, where custom libz/libxml2 files are placed there.")]),e._v(" "),s("h3",{attrs:{id:"i-have-mod-hostinglimits-installed-but-i-don-t-see-anything-in-lvetop-lve-is-not-working"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-have-mod-hostinglimits-installed-but-i-don-t-see-anything-in-lvetop-lve-is-not-working"}},[e._v("#")]),e._v(" I have mod_hostinglimits installed, but I don't see anything in lvetop, lve is not working")]),e._v(" "),s("p",[e._v("Try hitting some PHP page on the site on that server, while watching lvetop. LVEs are created on the fly when the first request to PHP/CGI script for a particular site is done. Additionally, lvetop will only show live information.")]),e._v(" "),s("p",[e._v("You may also try to freeze PHP process to be shown longer by adding sleep function, for example place the following file and try to open it in a browser:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<?php\nsleep(30);\nphpinfo();\n?>\n")])])])]),e._v(" "),s("h3",{attrs:{id:"grub-appends-garbage-characters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#grub-appends-garbage-characters"}},[e._v("#")]),e._v(" grub appends garbage characters")]),e._v(" "),s("p",[e._v('If you use "e" to edit currently selected command in the grub menu at boot time, you can face an issue that whatever you type - meaningless characters are added at the end of that command line. This might be due to missing splash file.')]),e._v(" "),s("p",[e._v("Please, edit "),s("em",[e._v("/boot/grub/grub.conf")]),e._v(" and comment out line that looks like this (by adding # in front of it)")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("splashimage=(hd0,0)/grub/splash.xpm.gz\n")])])])]),e._v(" "),s("p",[e._v("It should look like this instead:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("#splashimage=(hd0,0)/grub/splash.xpm.gz\n")])])])]),e._v(" "),s("h3",{attrs:{id:"snmp-is-not-working-properly"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#snmp-is-not-working-properly"}},[e._v("#")]),e._v(" SNMP is not working properly")]),e._v(" "),s("p",[e._v("If you are having issues with SNMP info being incorrect, try adding the following into "),s("em",[e._v("snmpd.conf")]),e._v(" :")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("view all excluded .1.3.6.1.2.1.6\n")])])])]),e._v(" "),s("h3",{attrs:{id:"imagemagick-is-slow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#imagemagick-is-slow"}},[e._v("#")]),e._v(" ImageMagick is slow")]),e._v(" "),s("p",[e._v("ImageMagick tries to use all available cores. This causes a significant waste of resources due to process switching when running inside LVE with a number of available cores is less than the number of total cores on the server.")]),e._v(" "),s("p",[e._v("To fix the issue, limit the number of threads to the available processors to 1. This can be done by editing config.xml & policy.xml files:")]),e._v(" "),s("p",[s("em",[e._v("/usr/local/lib/ImageMagick-[version]/config/policy.xml")])]),e._v(" "),s("p",[s("em",[e._v("/usr/local/lib/ImageMagick-[version]/config/config.xml")])]),e._v(" "),s("p",[e._v("Setting:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<policy domain="resource" name="thread" value="1"/>\n')])])])]),e._v(" "),s("h3",{attrs:{id:"i-am-running-cloudlinux-in-a-xen-vm-and-getting-4gb-seg-fixup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-am-running-cloudlinux-in-a-xen-vm-and-getting-4gb-seg-fixup"}},[e._v("#")]),e._v(' I am running CloudLinux in a Xen VM, and getting "4gb seg fixup"')]),e._v(" "),s("p",[e._v("There is an information that XEN memory management could break TLS in glibc. Try to switch to non-tls i386 glibc. Run the following commands:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum install yum-utils\n\nyum downloader glibc.i386\n\nrpm -Uvh --force glibc-2.5-65.i386.rpm\n")])])])]),e._v(" "),s("p",[e._v("Then reboot.")]),e._v(" "),s("h3",{attrs:{id:"why-in-lveinfo-i-see-zero-acpu-value"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why-in-lveinfo-i-see-zero-acpu-value"}},[e._v("#")]),e._v(" Why in lveinfo I see zero aCPU value?")]),e._v(" "),s("p",[e._v("aCPU stands for Average CPU. In the shared hosting majority of customers have their sites hit very infrequently, often less than once a minute. Once you average CPU usage for such a customer across 1 day (or an hour or even 10 minutes), the actual CPU usage will often below 1%")]),e._v(" "),s("p",[e._v("This is why when you run "),s("strong",[e._v("lveinfo")]),e._v(", you often see aCPU to be 0 or 1. If you see some user using 5-6% of aCPU, this user is using a lot of resources.")]),e._v(" "),s("p",[e._v("You can probably have no more than 10-15 such users on a server (15 users *5%=75% of total CPU resources of the server). So, such users should be either upgraded to VPS or charged correspondingly to their usage.")]),e._v(" "),s("h3",{attrs:{id:"lve-zombi-kernel-threads-appear-what-are-they"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lve-zombi-kernel-threads-appear-what-are-they"}},[e._v("#")]),e._v(" lve_zombi kernel threads appear. What are they?")]),e._v(" "),s("p",[s("strong",[e._v("lve_zombi")]),e._v(" kernel threads appear after "),s("code",[e._v("lvectl destroy")]),e._v(" (or "),s("code",[e._v("cagefs --remount")]),e._v(") to clean up after LVE. They can be safely ignored.")]),e._v(" "),s("h3",{attrs:{id:"i-see-in-my-var-log-messages-lines-like-access-denied-uid-818-target-uid-663"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-see-in-my-var-log-messages-lines-like-access-denied-uid-818-target-uid-663"}},[e._v("#")]),e._v(" I see in my /var/log/messages lines like: access denied, uid 818, target uid 663!")]),e._v(" "),s("p",[e._v("These messages mean that someone is using symlink owned by user UID 818 trying to access file owned by user UID 663, etc. This is our SecureLinks protection on kernel level at work.")]),e._v(" "),s("p",[e._v("More information on SecureLinks can be found "),s("router-link",{attrs:{to:"/cloudlinux_os_kernel/#securelinks"}},[e._v("here")])],1),e._v(" "),s("h3",{attrs:{id:"plesk-backup-apache-keeps-restarting-while-backup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plesk-backup-apache-keeps-restarting-while-backup"}},[e._v("#")]),e._v(" Plesk backup: Apache keeps restarting while backup")]),e._v(" "),s("p",[s("strong",[e._v("Symptoms:")])]),e._v(" "),s("p",[e._v("Customer creates a backup, but it does not contain the site's content upon completion.")]),e._v(" "),s("p",[s("code",[e._v('Failed to pack files server_backup_... Warning: hosting "test.com" /bin/tar: /tmp/fileBCmvZe: No such file or directory /bin/tar: Error is not recoverable: exiting now')])]),e._v(" "),s("p",[s("strong",[e._v("Cause:")])]),e._v(" "),s("p",[s("a",{attrs:{href:"http://kb.parallels.com/en/114752",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://kb.parallels.com/en/114752"),s("OutboundLink")],1),e._v(" Backups and chrooted shell access for FTP users may work improperly on CloudLinux OS if "),s("strong",[e._v("cagefs")]),e._v(" package is installed and enabled for all users. When Plesk backup uses 'su', "),s("strong",[e._v("cagefs")]),e._v(' makes "chroots" (without actually using chroot() system call) into '),s("em",[e._v("/usr/share/cagefs-skeleton")]),e._v(' and because of that "chrooting", files in '),s("em",[e._v("/tmp")]),e._v(" are inaccessible and the error occurs. Such modification to 'su' is done by adding "),s("strong",[e._v("pam_lve")]),e._v(" to "),s("em",[e._v("/etc/pam.d/su")]),e._v(".")]),e._v(" "),s("p",[s("strong",[e._v("Resolution:")])]),e._v(" "),s("p",[e._v("Remove "),s("strong",[e._v("pam_lve")]),e._v(" from "),s("em",[e._v("/etc/pam.d/su")]),e._v(".")]),e._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),s("p",[e._v("Disabling pam_lve in /etc/pam.d/su will not affect cron jobs/etc., it will only affect su commands. Basically, it has no negative security implications at all.")])]),s("h3",{attrs:{id:"mysql-mariadb-crashes-and-restarts-often-on-cpanel-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-mariadb-crashes-and-restarts-often-on-cpanel-server"}},[e._v("#")]),e._v(" MySQL/MariaDB crashes and restarts often on cPanel server")]),e._v(" "),s("p",[e._v("LFD kills MySQL every hour because the binary from CloudLinux is not installed in the same path as the cPanel MySQL. However, LFD won't kill anything unless the option PT_USERKILL is enabled, which is strongly recommended not to be enabled in the configuration file:")]),e._v(" "),s("p",[e._v("::: danger Warning\nWe don't recommend enabling this option unless absolutely necessary, as it can cause unexpected problems when processes are suddenly terminated. It can also lead to system processes being terminated, which could cause stability issues. It is much better to leave this option disabled and to investigate each case as it is reported when the triggers above are breached.\n:::")]),e._v(" "),s("p",[e._v("If you still need PT_USERKILL enabled, please add the following lines in "),s("em",[e._v("/etc/csf/csf.pignore")]),e._v(":")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("exe:/usr/libexec/mysqld\nexe:/usr/libexec/mysqld_safe\n")])])])]),e._v(" "),s("p",[e._v("And then restart LFD.")]),e._v(" "),s("h3",{attrs:{id:"php-selector-to-work-with-percona"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php-selector-to-work-with-percona"}},[e._v("#")]),e._v(" PHP Selector to work with Percona")]),e._v(" "),s("p",[e._v("Recently Percona has renamed its "),s("strong",[e._v("libmysqlclient")]),e._v(" into "),s("em",[e._v("/usr/lib64/libperconaserverclient")]),e._v(", so our "),s("strong",[e._v("alt-php")]),e._v(" packages will not find it. To fix the issue you should symlink percona libraries to "),s("strong",[e._v("libmysql")]),e._v(" the following way:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("cd /usr/lib64/\n\nln -s libperconaserverclient.so libmysqlclient.so\n\nln -s libperconaserverclient.so.18 libmysqlclient.so.18\n\nln -s libperconaserverclient_r.so libmysqlclient_r.so\n\nln -s libperconaserverclient_r.so.18 libmysqlclient_r.so.18\n")])])])]),e._v(" "),s("h3",{attrs:{id:"error-while-reading-lve-version-from-database-in-lveinfo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error-while-reading-lve-version-from-database-in-lveinfo"}},[e._v("#")]),e._v(' "Error while reading lve_version from database" in lveinfo')]),e._v(" "),s("p",[e._v('Information regarding the "LVE-Stats 2" database reset can be found '),s("router-link",{attrs:{to:"/command-line_tools/#lve-stats-2"}},[e._v("here")])],1),e._v(" "),s("p",[e._v("The mentioned error doesn't appear to be encountered in LVE-Stats 2.")]),e._v(" "),s("p",[e._v("If you are interested in storing the LVE stats in MySQL database, please refer to the following "),s("router-link",{attrs:{to:"/cloudlinux_os_components/#lve-stats2-and-db-servers-compatible-work-setup"}},[e._v("article")])],1),e._v(" "),s("h3",{attrs:{id:"i-have-installed-cloudlinux-os-on-my-server-but-i-can-not-see-lve-manager-in-cpanel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-have-installed-cloudlinux-os-on-my-server-but-i-can-not-see-lve-manager-in-cpanel"}},[e._v("#")]),e._v(" I have installed CloudLinux OS on my server but i can not see LVE Manager in cPanel")]),e._v(" "),s("p",[e._v("Make sure that your system is running CloudLinux OS kernel:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# uname -a -- should give *lve* in kernel name.\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# /usr/sbin/rhn_check -- should give NO output if the registration was successful.\n")])])])]),e._v(" "),s("p",[e._v("If you getting an error from "),s("strong",[e._v("rhn_check")]),e._v(", try to indicate an RHN mirror:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# /usr/sbin/rhnreg_ks --activationkey activationkey --serverUrl https://de-proxy.cl-mirror.net/XMLRPC/ --force\n")])])])]),e._v(" "),s("p",[e._v("Mirrors list:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("de-proxy.cl-mirror.net\n\nvn-proxycl-mirror.net\n\nsyd-proxy.cl-mirror.net\n\nslc-proxy.cl-mirror.net\n\nchile-proxy.cl-mirror.net\n\nams-proxy.cl-mirror.net\n")])])])]),e._v(" "),s("h3",{attrs:{id:"glib-warning-gerror-set-over-the-top-of-a-previous-gerror-on-yum"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#glib-warning-gerror-set-over-the-top-of-a-previous-gerror-on-yum"}},[e._v("#")]),e._v(' "GLib-WARNING **: GError set over the top of a previous GError" on yum')]),e._v(" "),s("p",[s("strong",[e._v("Issue:")])]),e._v(" "),s("p",[e._v("'yum' does not work properly and reports an error on every single run. Full error message:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('# yum update\n\n\n(process:364942): GLib-WARNING **: GError set over the top of a previous GError or uninitialized memory.\nThis indicates a bug in someone\'s code. You must ensure an error is NULL before it\'s set.\nThe overwriting error message was: Parsing primary.xml error: Premature end of data in tag format line 93382\n\n\n(process:364942): GLib-WARNING **: GError set over the top of a previous GError or uninitialized memory.\nThis indicates a bug in someone\'s code. You must ensure an error is NULL before it\'s set.\nThe overwriting error message was: Parsing primary.xml error: Premature end of data in tag package line 93377\n\n\n(process:364942): GLib-WARNING **: GError set over the top of a previous GError or uninitialized memory.\nThis indicates a bug in someone\'s code. You must ensure an error is NULL before it\'s set.\nThe overwriting error message was: Parsing primary.xml error: Premature end of data in tag metadata line 2\n\nTraceback (most recent call last):\nFile "/usr/bin/yum", line 29, in <module>\nyummain.user_main(sys.argv[1:], exit_code=True)\nFile "/usr/share/yum-cli/yummain.py", line 276, in user_main\nerrcode = main(args)\nFile "/usr/share/yum-cli/yummain.py", line 129, in main\nresult, resultmsgs = base.doCommands()\nFile "/usr/share/yum-cli/cli.py", line 434, in doCommands\nself._getTs(needTsRemove)\nFile "/usr/lib/python2.6/site-packages/yum/depsolve.py", line 99, in _getTs\nself._getTsInfo(remove_only)\nFile "/usr/lib/python2.6/site-packages/yum/depsolve.py", line 110, in _getTsInfo\npkgSack = self.pkgSack\nFile "/usr/lib/python2.6/site-packages/yum/__init__.py", line 883, in <lambda>\npkgSack = property(fget=lambda self: self._getSacks(),\nFile "/usr/lib/python2.6/site-packages/yum/__init__.py", line 668, in _getSacks\nself.repos.populateSack(which=repos)\nFile "/usr/lib/python2.6/site-packages/yum/repos.py", line 294, in populateSack\nsack.populate(repo, mdtype, callback, cacheonly)\nFile "/usr/lib/python2.6/site-packages/yum/yumRepo.py", line 186, in populate\ndobj = repo_cache_function(xml, csum)\nFile "/usr/lib64/python2.6/site-packages/sqlitecachec.py", line 46, in getPrimary\nself.repoid))\nTypeError: Parsing primary.xml error: Premature end of data in tag file line 93382\n')])])])]),e._v(" "),s("p",[s("strong",[e._v("Reason:")])]),e._v(" "),s("p",[e._v("You have an outdated "),s("strong",[e._v("alt-libxml2")]),e._v(" package which actually has broken system "),s("strong",[e._v("libxml2")]),e._v(" library functionality.")]),e._v(" "),s("p",[s("strong",[e._v("Solution:")])]),e._v(" "),s("p",[e._v("Update "),s("strong",[e._v("alt-libxml2")]),e._v(" after removing broken "),s("strong",[e._v("ldconfig")]),e._v(" path:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rm -f /etc/ld.so.conf.d/alt-libxml2.conf\n\nldconfig\n\nyum update alt-libxml2\n")])])])]),e._v(" "),s("h3",{attrs:{id:"installing-mysql-python-on-a-cpanel-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installing-mysql-python-on-a-cpanel-server"}},[e._v("#")]),e._v(" Installing MySQL-Python on a cPanel server")]),e._v(" "),s("p",[e._v("The following common problem often pops up during installation of MySQL-Python on cPanel server:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# yum install MySQL-python --disableexcludes=all\n\n--\x3e Running transaction check\n--\x3e Package MySQL-python.x86_64 0:1.2.3-0.3.c1.1.el6 will be installed\n--\x3e Processing Dependency: libmysqlclient_r.so.16(libmysqlclient_16)(64bit) for package: MySQL-python-1.2.3-0.3.c1.1.el6.x86_64\n--\x3e Processing Dependency: libmysqlclient_r.so.16()(64bit) for package: MySQL-python-1.2.3-0.3.c1.1.el6.x86_64\n--\x3e Running transaction check\n--\x3e Package mysql-libs.x86_64 0:5.1.69-1.el6_4 will be installed\n--\x3e Finished Dependency Resolution\nDependencies Resolved ================================================================== Package Arch Version Repository Size ==================================================================Installing: MySQL-python x86_64 1.2.3-0.3.c1.1.el6 cloudlinux-x86_64-server-6 85 k Installing for dependencies: mysql-libs x86_64 5.1.69-1.el6_4 cloudlinux-x86_64-server-6 1.2 M Transaction Check Error: file /usr/share/mysql/charsets/README from install of mysql-libs-5.1.69-1.el6_4.x86_64 conflicts with file from package MySQL55-server-5.5.32-1.cp1136.x86_64 file /usr/share/mysql/charsets/Index.xml from install of mysql-libs-5.1.69-1.el6_4.x86_64 conflicts with file from package MySQL55-server-5.5.32-1.cp1136.x86_64 file /usr/share/mysql/charsets/armscii8.xml from install of mysql-libs-5.1.69-1.el6_4.x86_64 conflicts with file from package MySQL55-server-5.5.32-1.cp1136.x86_64 file /usr/share/mysql/charsets/ascii.xml from install of mysql-libs-5.1.69-1.el6_4.x86_64 conflicts with file from package MySQL55-server-5.5.32-1.cp1136.x86_64 file /usr/share/mysql/charsets/cp1250.xml from install of mysql-libs-5.1.69-1.el6_4.x86_64 conflicts with file from package MySQL55-server-5.5.32-1.cp1136.x86_64 Error Summary\n")])])])]),e._v(" "),s("p",[e._v("The issue is with MySQL package. "),s("strong",[e._v("Yum")]),e._v(" is trying to satisfy requirements by installing "),s("strong",[e._v("mysql-libX")]),e._v(", and that RPM conflicts with files from package "),s("strong",[e._v("MySQL55-server")]),e._v(". To fix the issue, you should install "),s("strong",[e._v("libmysqlclient_r.so.16")]),e._v(" on your server. That can be done by installing "),s("strong",[e._v("mysqlclient16")]),e._v(" RPM from our "),s("em",[e._v("testing")]),e._v(" repository:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum --enablerepo=cloudlinux-updates-testing install mysqlclient16 --disableexcludes=all\n")])])])]),e._v(" "),s("p",[e._v("After that MySQL-Python will be installed without any issues.")]),e._v(" "),s("h3",{attrs:{id:"segmentation-fault-in-different-places-yum-clnreg-ks-cldeploy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#segmentation-fault-in-different-places-yum-clnreg-ks-cldeploy"}},[e._v("#")]),e._v(" Segmentation Fault in different places (yum, clnreg_ks, cldeploy)")]),e._v(" "),s("p",[e._v("When you see different and random tools segfaulting, such as "),s("strong",[e._v("yum")]),e._v(", "),s("strong",[e._v("clnreg_rs")]),e._v(", "),s("strong",[e._v("cldeploy")]),e._v(", it could be caused by bad/broken "),s("code",[e._v("libz*")]),e._v(" and "),s("code",[e._v("libxml2")]),e._v(".")]),e._v(" "),s("p",[e._v("It usually happens on DirectAdmin server, when libraries are placed into "),s("em",[e._v("/usr/local/lib/")]),e._v(" directory.")]),e._v(" "),s("p",[e._v("To fix:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("mkdir /usr/local/lib_back\nmv /usr/local/lib/libz* /usr/local/lib_back\nmv /usr/local/lib/libxml2.* /usr/local/lib_back\n")])])])]),e._v(" "),s("h3",{attrs:{id:"why-some-packages-are-absent-in-public-repos-at-http-repo-cloudlinux-com-cloudlinux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why-some-packages-are-absent-in-public-repos-at-http-repo-cloudlinux-com-cloudlinux"}},[e._v("#")]),e._v(" Why some packages are absent in public repos at http://repo.cloudlinux.com/cloudlinux/?")]),e._v(" "),s("p",[e._v("Our public repositories at "),s("a",{attrs:{href:"http://repo.cloudlinux.com/cloudlinux/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://repo.cloudlinux.com/cloudlinux/"),s("OutboundLink")],1),e._v(" do not have a lot of packages listed.")]),e._v(" "),s("p",[e._v("The reason is simple - they show only migration repositories (those packages which could be needed on migration/conversion stage) and do not provide all packages list.")]),e._v(" "),s("p",[e._v("To get all packages with the latest versions you should have an active subscription and use regular yum to install/update.")]),e._v(" "),s("h3",{attrs:{id:"cloudlinux-os-error-specified-activation-token-can-not-be-found-on-the-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cloudlinux-os-error-specified-activation-token-can-not-be-found-on-the-server"}},[e._v("#")]),e._v(" CloudLinux OS error: specified activation token can not be found on the server")]),e._v(" "),s("p",[s("strong",[e._v("Symptoms")])]),e._v(" "),s("p",[e._v("During the server registration or converting CentOS to CloudLinux OS, getting the following error:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Could not find token TPA.XXXXXXXX.YYYY\nError Class Code: 60\nError Class Info:\nThe activation token specified could not be found on the server.\nPlease retry with a valid key.\nUnable to register at CLN server, please contact CloudLinux support at https://helpdesk.cloudlinux.com\n")])])])]),e._v(" "),s("p",[s("strong",[e._v("Cause")])]),e._v(" "),s("p",[e._v("Plesk license number is used in "),s("em",[e._v("TPA.XXXXXXXX.YYYY")]),e._v(" format, instead of CloudLinux OS product key.")]),e._v(" "),s("p",[s("strong",[e._v("Resolution")])]),e._v(" "),s("p",[e._v("CloudLinux OS product key has the following format: "),s("em",[e._v("XXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")]),e._v(" Contact "),s("a",{attrs:{href:"https://cscontact.plesk.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Plesk Licensing and Purchase Support"),s("OutboundLink")],1),e._v(" to get the CloudLinux OS product key associated with your TPA license. Related Plesk article: "),s("a",{attrs:{href:"https://kb.plesk.com/en/126999",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://kb.plesk.com/en/126999"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"error-503-on-php-websites-when-litespeed-is-used"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error-503-on-php-websites-when-litespeed-is-used"}},[e._v("#")]),e._v(" Error 503 on PHP websites when LiteSpeed is used")]),e._v(" "),s("p",[s("strong",[e._v("Issue symptoms")])]),e._v(" "),s("p",[e._v("Sometimes PHP websites return Error 503 page when LiteSpeed is used; however, users are not reaching LVE EP limits.")]),e._v(" "),s("p",[s("strong",[e._v("Cause")])]),e._v(" "),s("p",[e._v("The issue may be caused by CSF/LFD killing PHP processes. If you have it installed, then check the log:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("grep -i kill /var/log/lfd.log\n")])])])]),e._v(" "),s("p",[s("strong",[e._v("Resolution")])]),e._v(" "),s("p",[e._v("To resolve the issue for good, the "),s("em",[e._v("/etc/csf/csf.pignore")]),e._v(" file should be modified - add the processes to be ignored:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('echo "exe:/usr/local/lsws/bin/lshttpd.5.1.13" >> /etc/csf/csf.pignore\necho "exe:/usr/local/bin/lsphp" >> /etc/csf/csf.pignore\n')])])])]),e._v(" "),s("p",[e._v("And restart LFD service:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("service lfd restart\n")])])])]),e._v(" "),s("p",[e._v("More information in official CSF documentation, Chapter 8 of "),s("a",{attrs:{href:"https://download.configserver.com/csf/readme.txt",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://download.configserver.com/csf/readme.txt"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"registering-server-issue-unable-to-get-hardware-information"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#registering-server-issue-unable-to-get-hardware-information"}},[e._v("#")]),e._v(" Registering server issue: unable to get hardware information")]),e._v(" "),s("p",[s("strong",[e._v("Issue symptoms")])]),e._v(" "),s("p",[e._v("Can not register the server with "),s("strong",[e._v("clnreg_ks")]),e._v(", "),s("strong",[e._v("rhnreg_ks")]),e._v(" or during "),s("code",[e._v("yum update")]),e._v(". The error shown is similar to:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Profilename: server.hostname.com\nAn error has occurred:\nError communicating with server. The message was:\nInternal Server Error\nSee /var/log/up2date for more information\n")])])])]),e._v(" "),s("p",[s("strong",[e._v("Cause")])]),e._v(" "),s("p",[e._v("The issue may be caused by collecting hardware information. The following might be found in "),s("em",[e._v("/var/log/up2date")]),e._v(":")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('Traceback (most recent call last):\n  File "/usr/sbin/clnreg_ks", line 221, in <module>\n    cli.run()\n  File "/usr/share/rhn/up2date_client/rhncli.py", line 96, in run\n    sys.exit(self.main() or 0)\n  File "/usr/sbin/clnreg_ks", line 150, in main\n    rhnreg.sendHardware(systemId, hardwareList)\n  File "/usr/share/rhn/up2date_client/rhnreg.py", line 475, in sendHardware\n    s.registration.add_hw_profile(systemId, _encode_characters(hardwareList))\n')])])])]),e._v(" "),s("p",[s("strong",[e._v("Resolution")])]),e._v(" "),s("p",[e._v("Skip checking for hardware in "),s("strong",[e._v("clnreg_ks")]),e._v(" or "),s("strong",[e._v("rhnreg_ks")]),e._v(" with "),s("code",[e._v("--nohardware")]),e._v(" key.")]),e._v(" "),s("p",[e._v("Example:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("clnreg_ks --nohardware\n")])])])]),e._v(" "),s("h3",{attrs:{id:"improper-php-execution-from-cronjob"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#improper-php-execution-from-cronjob"}},[e._v("#")]),e._v(" Improper PHP execution from cronjob")]),e._v(" "),s("p",[s("strong",[e._v("Issue symptoms")])]),e._v(" "),s("p",[e._v("Some PHP scripts executed with cronjobs are not working properly, are interrupted, or just hang. Known affected website engines: Magento, CakePHP.")]),e._v(" "),s("p",[s("strong",[e._v("Cause")])]),e._v(" "),s("p",[e._v("The issue is caused by PHP CGI binary is being called instead of PHP CLI version. It happens due to "),s("em",[e._v("PATH")]),e._v(" environment variable does not contain "),s("em",[e._v("/usr/local/bin/")]),e._v(".")]),e._v(" "),s("p",[s("strong",[e._v("Resolution")])]),e._v(" "),s("p",[e._v("There are several ways to resolve the issue depending on which panel is used or if you edit cronjob via command line. Call PHP CLI binary manually:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("* * * * * /usr/local/bin/php /home/user/cronjob.php\n")])])])]),e._v(" "),s("p",[e._v("Add "),s("em",[e._v("/usr/local/bin/")]),e._v(" to users "),s("strong",[e._v("crontab")]),e._v(" as:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('PATH="/usr/local/bin/:/usr/bin:/bin"\n* * * * * php /home/user/cronjob.php\n')])])])]),e._v(" "),s("p",[e._v("Force export path variable right before executing PHP script:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("* * * * * export PATH=$PATH:/usr/local/bin; php /home/user/cronjob.php\n")])])])]),e._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),s("p",[e._v("Engines like CakePHP use app/Console/cake wrapper to define which PHP to call. You may need to modify the file, and point to /usr/local/bin/php manually.")])]),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),s("p",[e._v("On DirectAdmin panel to force specified path to be used for user cron jobs you have to create /usr/local/directadmin/data/templates/custom/cron_template.txt with the following content:")]),e._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("PATH=/usr/local/bin:/usr/local/sbin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin\nSHELL=/bin/sh\nMAILTO=|EMAIL|\n|CRONS|\n")])])])])]),s("p",[e._v("More: "),s("a",{attrs:{href:"https://www.directadmin.com/features.php?id=621",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.directadmin.com/features.php?id=621"),s("OutboundLink")],1)])])},[],!1,null,null,null);t.default=r.exports}}]);