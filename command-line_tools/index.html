<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Command-line tools (CLI) | Documentation</title>
    <meta name="description" content="CloudLinux Documentation">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.1c9cd124.css" as="style"><link rel="preload" href="/assets/js/app.da36fadb.js" as="script"><link rel="preload" href="/assets/js/11.e59dcd5a.js" as="script"><link rel="prefetch" href="/assets/js/10.1942d0f0.js"><link rel="prefetch" href="/assets/js/12.90ac86c3.js"><link rel="prefetch" href="/assets/js/13.14de4ed9.js"><link rel="prefetch" href="/assets/js/14.21abeab5.js"><link rel="prefetch" href="/assets/js/15.62e779e0.js"><link rel="prefetch" href="/assets/js/16.81b2b2ef.js"><link rel="prefetch" href="/assets/js/17.23b99257.js"><link rel="prefetch" href="/assets/js/18.a999b8b6.js"><link rel="prefetch" href="/assets/js/19.807aaab3.js"><link rel="prefetch" href="/assets/js/20.416e8ee9.js"><link rel="prefetch" href="/assets/js/21.c5366768.js"><link rel="prefetch" href="/assets/js/22.5fdff440.js"><link rel="prefetch" href="/assets/js/23.6d470fbc.js"><link rel="prefetch" href="/assets/js/24.0992162f.js"><link rel="prefetch" href="/assets/js/25.d65e4653.js"><link rel="prefetch" href="/assets/js/26.4be4ef64.js"><link rel="prefetch" href="/assets/js/27.610114bb.js"><link rel="prefetch" href="/assets/js/28.9f51bd74.js"><link rel="prefetch" href="/assets/js/29.266f7b10.js"><link rel="prefetch" href="/assets/js/3.73c3ee7b.js"><link rel="prefetch" href="/assets/js/30.e00a63b3.js"><link rel="prefetch" href="/assets/js/31.0430cb93.js"><link rel="prefetch" href="/assets/js/32.0c319e0d.js"><link rel="prefetch" href="/assets/js/33.65e63c27.js"><link rel="prefetch" href="/assets/js/34.0c068616.js"><link rel="prefetch" href="/assets/js/35.a9cbe4c7.js"><link rel="prefetch" href="/assets/js/36.69d70537.js"><link rel="prefetch" href="/assets/js/37.08289e92.js"><link rel="prefetch" href="/assets/js/38.aab72032.js"><link rel="prefetch" href="/assets/js/39.d54086d4.js"><link rel="prefetch" href="/assets/js/4.c5f4be1b.js"><link rel="prefetch" href="/assets/js/40.988b7b70.js"><link rel="prefetch" href="/assets/js/41.6dd6c2ef.js"><link rel="prefetch" href="/assets/js/42.0e74a0c5.js"><link rel="prefetch" href="/assets/js/43.3391aaae.js"><link rel="prefetch" href="/assets/js/44.da2ddf64.js"><link rel="prefetch" href="/assets/js/45.67142dec.js"><link rel="prefetch" href="/assets/js/46.286cface.js"><link rel="prefetch" href="/assets/js/47.b4b24a87.js"><link rel="prefetch" href="/assets/js/48.733fe4cb.js"><link rel="prefetch" href="/assets/js/49.022233ca.js"><link rel="prefetch" href="/assets/js/5.5ac32b68.js"><link rel="prefetch" href="/assets/js/50.0b06a7da.js"><link rel="prefetch" href="/assets/js/51.e69716c2.js"><link rel="prefetch" href="/assets/js/6.788f7cb0.js"><link rel="prefetch" href="/assets/js/7.bb646a5c.js"><link rel="prefetch" href="/assets/js/8.d60f6fd1.js"><link rel="prefetch" href="/assets/js/9.d765786c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f089aea3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1c9cd124.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><section class="navbar"><header class="navbar__header"><section class="navbar__block"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Documentation" class="logo"> <img src="/logo-short.svg" alt="Documentation" class="logo-short"></a> <div class="site-name">
        Documentation
      </div> <form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" placeholder="Search" class="search-query"></form></section> <section class="navbar__block"><button class="menu-btn menu-btn--products-list"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon icon--products-list"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg>
        Products
      </button> <button class="navbar-btn navbar-btn--submit-request">Submit request</button> <div class="links" style="max-width:nullpx;"><a href="https://cloudlinux.com/trial" target="_blank" class="navbar-btn navbar-btn--try-free">Try Free</a> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><span class="title">Language:</span> <a class="dropdown-title"><span class="text">En</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/command-line_tools/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ru/command-line_tools/" class="nav-link">Русский</a></li></ul></div></div></nav></div></section></header> <!----></section> <div class="sidebar-mask"></div> <div class="sidebar"> <ul class="sidebar-links"><li><div class="sidebar-group first"><div class="sidebar-heading open"><span>Content</span> <!----></div> <ul class="sidebar-group-items"><li><a href="/single/introduction/" class="sidebar-link">Introduction</a></li><li><a href="/single/installation/" class="sidebar-link">Installation</a></li><li><a href="/single/manager/" class="sidebar-link">CloudLinux Manager</a></li></ul></div></li></ul> </div> <div class="page"> <div class="breadcrumb-wrapper page-breadcrumb" data-v-5e0e0acf><span class="breadcrumb-title" data-v-5e0e0acf>Documentation:</span> <a href="/command-line_tools/" class="breadcrumb router-link-exact-active router-link-active" data-v-5e0e0acf>
    Command-line tools (CLI)
  </a></div> <div class="page-nav-wrapper"><!----></div> <div class="content content__default"><h1 id="command-line-tools-cli"><a href="#command-line-tools-cli" class="header-anchor">#</a> Command-line tools (CLI)</h1> <p>The list of the commands (CLI) you can use to manage CloudLinux OS components.</p> <ul><li><a href="/command-line_tools/#cagefs">CageFS</a></li> <li><a href="/command-line_tools/#lve-stats-2">LVE-stats 2</a></li> <li><a href="/command-line_tools/#mysql-governor">MySQL Governor</a></li> <li><a href="/command-line_tools/#php-selector">PHP Selector</a></li> <li><a href="/command-line_tools/#python-selector">Python Selector</a></li> <li><a href="/command-line_tools/#ruby-selector">Ruby Selector</a></li> <li><a href="/command-line_tools/#node-js-selector">Node.js Selector</a></li> <li><a href="/command-line_tools/#apache-mod-lsapi-pro">Apache mod_lsapi PRO</a></li> <li><a href="/command-line_tools/#other-cli-tools">Other CLI tools</a></li></ul> <h2 id="cagefs"><a href="#cagefs" class="header-anchor">#</a> CageFS</h2> <p><code>cagefsctl</code> is used to manage CageFS. It allows initializing and updating CageFS, as well as enabling/disabling CageFS for individual users.</p> <p>Use the following syntax to manage CageFS:
<span class="notranslate"><code>/usr/sbin/cagefsctl [OPTIONS]</code></span></p> <p>Options:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td>-i</td> <td><span class="notranslate"> --init </span></td> <td>initialize CageFS (create CageFS if it does not exist)</td></tr> <tr><td>-r</td> <td><span class="notranslate"> --reinit </span></td> <td>reinitialize CageFS (make backup and recreate CageFS)</td></tr> <tr><td>-u</td> <td><span class="notranslate"> --update </span></td> <td>update files in CageFS (add new and modified files to CageFS, remove unneeded files)</td></tr> <tr><td>-f</td> <td><span class="notranslate"> --force </span></td> <td>recreate CageFS (do not make backup, overwrite existing files)</td></tr> <tr><td>-d</td> <td><span class="notranslate"> --dont-clean </span></td> <td>do not delete any files from skeleton (use with <span class="notranslate"> --update </span> option)</td></tr> <tr><td>-k</td> <td><span class="notranslate"> --hardlink </span></td> <td>use hardlinks if possible</td></tr> <tr><td></td> <td><span class="notranslate"> --create-mp </span></td> <td>Creates <em>/etc/cagefs/cagefs.mp</em> file</td></tr> <tr><td></td> <td><span class="notranslate"> --mount-skel </span></td> <td>mount CageFS skeleton directory</td></tr> <tr><td></td> <td><span class="notranslate"> --unmount-skel </span></td> <td>unmount CageFS skeleton directory</td></tr> <tr><td></td> <td><span class="notranslate"> --remove-all </span></td> <td>disable CageFS, remove templates and <em>/var/cagefs</em> directory</td></tr> <tr><td></td> <td><span class="notranslate"> --sanity-check </span></td> <td>perform basic self-diagnistics of common cagefs-related issues (mostly useful for support)</td></tr> <tr><td></td> <td><span class="notranslate"> --addrpm </span></td> <td>add rpm-packages in CageFS (run <span class="notranslate"><code>cagefsctl --update</code></span> in order to apply changes)</td></tr> <tr><td></td> <td><span class="notranslate"> --delrpm </span></td> <td>remove rpm-packages from CageFS (run <span class="notranslate"><code>cagefsctl --update</code></span> in order to apply changes)</td></tr> <tr><td></td> <td><span class="notranslate"> --list-rpm </span></td> <td>list rpm-packages that are installed in CageFS</td></tr> <tr><td>-e</td> <td><span class="notranslate"> --enter </span></td> <td>enter into user's CageFS as root</td></tr> <tr><td></td> <td><span class="notranslate"> --update-list </span></td> <td>update specified files only (paths are read from stdin)</td></tr> <tr><td></td> <td><span class="notranslate"> --update-etc </span></td> <td>update <em>/etc</em> directory of all or specified users</td></tr> <tr><td></td> <td><span class="notranslate"> --set-update-period </span></td> <td>set min period of update of CageFS in days (default = 1 day)</td></tr> <tr><td></td> <td><span class="notranslate"> --force-update </span></td> <td>force update of CageFS (ignore period of update)</td></tr> <tr><td></td> <td><span class="notranslate"> --force-update-etc </span></td> <td>force update of <em>/etc</em> directories for users in CageFS</td></tr> <tr><td></td> <td><span class="notranslate"> --reconfigure-cagefs </span></td> <td>configure CageFS integration with other software (control panels, database servers, etc)</td></tr></tbody></table> <p>Use the following syntax to manage users:<br> <span class="notranslate"><code>/usr/sbin/cagefsctl [OPTIONS] username [more usernames]</code></span></p> <p>Options:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td>-m</td> <td><span class="notranslate"> --remount </span></td> <td>remount specified user(s)</td></tr> <tr><td>-M</td> <td><span class="notranslate"> --remount-all </span></td> <td>remount CageFS skeleton directory and all users (use this each time you have changed <em>cagefs.mp</em> file</td></tr> <tr><td>-w</td> <td><span class="notranslate"> --unmount </span></td> <td>unmount specified user(s)</td></tr> <tr><td>____</td> <td><span class="notranslate"> --unmount-dir </span></td> <td>unmount specified dir for all users</td></tr> <tr><td>-W</td> <td><span class="notranslate"> --unmount-all </span></td> <td>unmount CageFS skeleton directory and all users</td></tr> <tr><td>-l</td> <td><span class="notranslate"> --list </span></td> <td>list users that entered in CageFS</td></tr> <tr><td></td> <td><span class="notranslate"> --list-logged-in </span></td> <td>list users that entered in CageFS via SSH</td></tr> <tr><td></td> <td><span class="notranslate"> --enable </span></td> <td>enable CageFS for the user</td></tr> <tr><td></td> <td><span class="notranslate"> --disable </span></td> <td>disable CageFS for the user</td></tr> <tr><td></td> <td><span class="notranslate"> --enable-all </span></td> <td>enable all users, except specified in <em>/etc/cagefs/users.disabled</em></td></tr> <tr><td></td> <td><span class="notranslate"> --disable-all </span></td> <td>disable all users, except specified in <em>/etc/cagefs/users.enabled</em></td></tr> <tr><td></td> <td><span class="notranslate"> --display-user-mode </span></td> <td>display the current mode ( <span class="notranslate"> &quot;Enable All&quot; </span> or <span class="notranslate"> &quot;Disable All&quot; </span> )</td></tr> <tr><td></td> <td><span class="notranslate"> --toggle-mode </span></td> <td>toggle mode saving current lists of users (lists of enabled and disabled users remain unchanged)</td></tr> <tr><td></td> <td><span class="notranslate"> --list-enabled </span></td> <td>list enabled users</td></tr> <tr><td></td> <td><span class="notranslate"> --list-disabled </span></td> <td>list disabled users</td></tr> <tr><td></td> <td><span class="notranslate"> --user-status </span></td> <td>print status of specified user (enabled or disabled)</td></tr> <tr><td></td> <td><span class="notranslate"> --getprefix </span></td> <td>display prefix for user</td></tr></tbody></table> <p><span class="notranslate"> PHP Selector </span> related options:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> --setup-cl-selector </span></td> <td>setup <span class="notranslate"> PHP Selector </span> or register new alt-php versions</td></tr> <tr><td><span class="notranslate"> --remove-cls-selector </span></td> <td>unregister alt-php versions, switch users to default php version when needed</td></tr> <tr><td><span class="notranslate"> --rebuild-alt-php-ini </span></td> <td>rebuild <em>alt_php.ini</em> file for specified users (or all users if none specified)</td></tr> <tr><td><span class="notranslate"> --validate-alt-php-ini </span></td> <td>same as <span class="notranslate"><code>--rebuild-alt-php-ini</code></span> but also validates <em>alt_php.ini</em> options</td></tr> <tr><td><span class="notranslate"> --cl-selector-reset-versions </span></td> <td>reset php version for specifed users to default (or all users if none specified)</td></tr> <tr><td><span class="notranslate"> --cl-selector-reset-modules </span></td> <td>reset php modules (extensions) for specific users to defaults (or all users if none specified)</td></tr> <tr><td><span class="notranslate"> --create-virt-mp </span></td> <td>create virtual mount points for the user</td></tr> <tr><td><span class="notranslate"> --create-virt-mp-all </span></td> <td>create virtual mount points for all users</td></tr> <tr><td><span class="notranslate"> --remount-virtmp </span></td> <td>create virtual mount points and remount user</td></tr> <tr><td><span class="notranslate"> --apply-global-php-ini </span></td> <td>use with 0, 1 or 2 arguments from the list: <span class="notranslate"><code>error_log</code>, <code>date.timezone</code></span> without arguments applies all global php options including the two above</td></tr></tbody></table> <p>Common options:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td>___</td> <td><span class="notranslate"> --disable-cagefs </span></td> <td>disable CageFS</td></tr> <tr><td></td> <td><span class="notranslate"> --cagefs-status </span></td> <td>print CageFS status: ( <span class="notranslate"> enabled </span> or <span class="notranslate"> disabled </span> )</td></tr> <tr><td></td> <td><span class="notranslate"> --set-min-uid </span></td> <td>Set min <span class="notranslate"> UID </span></td></tr> <tr><td></td> <td><span class="notranslate"> --get-min-uid </span></td> <td>Display current MIN_UID setting</td></tr> <tr><td></td> <td><span class="notranslate"> --print-suids </span></td> <td>Print list of <span class="notranslate"> SUID </span> and SGID programs in skeleton</td></tr> <tr><td></td> <td><span class="notranslate"> --do-not-ask </span></td> <td>assume <span class="notranslate"> &quot;yes&quot; </span> in all queries (should be the first option in command)</td></tr> <tr><td></td> <td><span class="notranslate"> --clean-var-cagefs </span></td> <td>clean <em>/var/cagefs</em> directory (remove data of non-existent users)</td></tr> <tr><td></td> <td><span class="notranslate"> --set-tmpwatch </span></td> <td>set <code>tmpwatch</code> command and parameters (save to <em>/etc/cagefs/cagefs.ini</em> file)</td></tr> <tr><td></td> <td><span class="notranslate"> --tmpwatch </span></td> <td>execute tmpwatch (remove outdated files in tmp directories in CageFS for all users)</td></tr> <tr><td></td> <td><span class="notranslate"> --toggle-plugin </span></td> <td>disable/enable CageFS plugin</td></tr> <tr><td>-v</td> <td><span class="notranslate"> --verbose </span></td> <td>verbose output</td></tr> <tr><td></td> <td><span class="notranslate"> --wait-lock </span></td> <td>wait for end of execution of other <code>cagefsctl</code> processes (when needed) before execution of the command</td></tr> <tr><td>-h</td> <td><span class="notranslate"> --help </span></td> <td>this message</td></tr></tbody></table> <h4 id="running-command-inside-cagefs"><a href="#running-command-inside-cagefs" class="header-anchor">#</a> Running command inside CageFS</h4> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>lve-wrappers 0.6-1+</p></div><p>Sometimes you will need to execute a command as user inside CageFS.</p> <p>If a user has shell enabled - you can simply use:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ /bin/su - $USERNAME  -c &quot;_command_&quot;
</code></pre></div></div>
Yet, if a user have they shell disabled, it wouldn't work. To solve this issue, we have added command:
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ /sbin/cagefs_enter_user $USERNAME &quot;_command_&quot;
</code></pre></div></div> <p>If you disable CageFS for a user, then <span class="notranslate"><code>cagefs_enter</code></span> will be executed without <span class="notranslate"><code>proxyexec</code></span> .</p> <p>You can forcibly disable <span class="notranslate"><code>cagefs_enter</code></span> start via <span class="notranslate"><code>proxyexec</code></span> for all users (regardless if CageFS is enabled or disabled) by specifying the parameter <span class="notranslate"><em>cagefs_enter_proxied=0</em> in <em>/etc/sysconfig/cloudlinux</em></span> .</p> <p><span class="notranslate"><em>/bin/cagefs_enter.proxied</em></span> can be executed instead of <span class="notranslate"><em>/bin/cagefs_enter</em></span> to enter CageFS without <span class="notranslate"><code>proxyexec</code></span> . Note that starting <span class="notranslate"><code>cagefs_enter</code></span> via <span class="notranslate"><code>proxyexec</code></span> is necessary to enable sending local notification messages to users with enabled CageFS. <span class="notranslate"><code>cagefs_enter</code></span> is executed via <span class="notranslate"><code>proxyexec</code></span> by default.</p> <h4 id="sanity-check"><a href="#sanity-check" class="header-anchor">#</a> Sanity check</h4> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>CageFS 6.0-34+</p></div><p>CageFS <span class="notranslate"><code>--sanity-check</code></span> utility allows to check CageFS configuration consistency, so that an administrator can save the time investigating issues with CageFS and ensure that custom configuration is correct.</p> <p>To start, run the command:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cagefsctl --sanity-check
</code></pre></div></div>
At the moment 7 types of check are implemented:
<ol><li><p><em>Check cagefs mount points exists</em> - reads <em>cagefs.mp</em> file and verifies if the directories specified in it really exist on the disk. To learn more, visit <a href="/cloudlinux_os_components/#mount-points">Mount points</a> and <a href="/cloudlinux_os_components/#split-by-username">Split by username</a></p></li> <li><p><em>Check cagefs <span class="notranslate"><code>users.enabled</code></span> is a directory</em> - ensures that if  <span class="notranslate"><em>/etc/cagefs/users.enabled</em></span> exists, then it is a directory, not a file (if it is recognized as a file, then it would cause a breakdown).</p></li> <li><p><em>Check cagefs <span class="notranslate"><code>users.disabled</code></span> is a directory</em> - ensures that if  <span class="notranslate"><em>/etc/cagefs/users.disabled</em></span> exists, then it is a directory, not a file (if it is recognized as a file, then it would cause a breakdown).</p></li> <li><p><em>Check cagefs <span class="notranslate"><code>disable.etcfs</code></span> exists</em> - checks if <span class="notranslate"><em>/etc/cagefs/etc.safe/disable.etcfs</em></span> exists.</p></li> <li><p><em>Check cagefs users can enter cagefs</em> - chooses two users in the system with enabled CageFS (the first and the second ones in the unsorted list) and tries to log in to CageFS under their credentials and see what happens. It runs <span class="notranslate"><code>su -l &quot;$USER&quot; -s /bin/bash -c &quot;whoami&quot;</code></span> and compares the output with the <span class="notranslate"> $USER </span> and <span class="notranslate"> su </span> command retcode estimation.</p></li></ol> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>If a login fails, it can be due to various reasons, that can only be determined in manual mode. The checker only gives the output of the command.</p></div><ol start="6"><li><p><em>Check cagefs proxy commands configs are parsable</em> - tries to load <span class="notranslate"><em>/etc/cagefs/*.proxy.commands</em></span> files and parse them to check the syntax. In case of any parsing error the test will fail. To learn more, visit <a href="/cloudlinux_os_components/#executing-by-proxy">Executing by proxy</a>.</p></li> <li><p><em>Check cagefs virt.mp files syntax</em> - reads all <em>/var/cagefs///virt.mp</em> files (if any) and checks their syntax validity. At the moment there are only two checks of the syntax: the file is not empty if it exists, and the file is not starting with the sub directory definitions (with @). To learn more, visit <a href="/cloudlinux_os_components/#per-user-virtual-mount-points">Per-user virtual mount points</a></p></li> <li><p><em>Check MultiPHP system default PHP version</em> – checks that MultiPHP system default PHP version is <strong>NOT</strong> Alt-PHP. That means <span class="notranslate"> PHP Selector </span> should work properly. If MultiPHP system default PHP version is Alt-PHP, <span class="notranslate"> PHP Selector </span> does not work and should be disabled. To learn more on how to disable <span class="notranslate"> PHP Selector, </span> visit <a href="/cloudlinux_os_components/#php-selector">cPanel LVE Manager</a></p></li></ol> <p>Possible results of the checks:</p> <ul><li><p><span class="notranslate"> OK </span> - the check succeeded.</p></li> <li><p><span class="notranslate"> FAILED </span> - the check revealed a problem.</p></li> <li><p><span class="notranslate"> SKIPPED </span> - the check was skipped as it made no sense in such environment (e.g. wrong control panel) or can not be performed for some reason (e.g no users with enabled CageFS found). The actual result does not mean that a problem exists and can be considered as positive.</p></li> <li><p><span class="notranslate"> INTERNAL_TEST_ERROR </span> - the check failed because of a problem inside the checker itself. Must be reported to the developers.</p></li></ul> <p>In case if at least one of the checks resulted neither <span class="notranslate"> OK </span> nor <span class="notranslate"> SKIPPED </span> then the checker will end with ret code &gt;0.</p> <h2 id="lve-stats-2"><a href="#lve-stats-2" class="header-anchor">#</a> LVE-stats 2</h2> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>/usr/sbin/lveinfo</code></span></td> <td>utility to display historical information about LVE usage.</td></tr> <tr><td><span class="notranslate"><code>/usr/sbin/lvechart</code></span></td> <td>creates a chart representing LVE usage for user.</td></tr> <tr><td><span class="notranslate"><code>/usr/sbin/dbgovchart</code></span></td> <td>creates a chart representing MySQL usage for user.</td></tr> <tr><td><span class="notranslate"><code>/usr/sbin/lve-read-snapshot</code></span></td> <td>displays information from system state (snapshots) for user.</td></tr> <tr><td><span class="notranslate"><code>/usr/sbin/lve-create-db</code></span></td> <td>creates/recreates database for <span class="notranslate">lve-stats</span>.</td></tr> <tr><td><span class="notranslate"><code>/usr/sbin/cloudlinux-top</code></span></td> <td>utility provides information about current MySQL and LVE usage of a running system in JSON format.</td></tr> <tr><td><span class="notranslate"><code>/usr/sbin/cloudlinux-statistics</code></span></td> <td>utility provides historical information about resource usage.</td></tr></tbody></table> <div class="notranslate"><h4 id="lveinfo"><a href="#lveinfo" class="header-anchor">#</a> lveinfo</h4></div> <div class="tip custom-block"><p class="custom-block-title">Note</p><p><span class="notranslate">lve-stats-2.2-2</span></p></div><p><strong>Usage</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>lveinfo [-h] [-v] [--dbgov DBGOV] [-f YYYY-MM-DD[HH:MM]]

              [-t YYYY-MM-DD[HH:MM]] [--period PERIOD] [-u USER | --id ID]

              [-d] [-o ALIAS] [-b ALIAS [ALIAS ...]] [-p 0..100]

              [--by-fault ALIAS [ALIAS ...]] [-r FAULTS]

              [--style {user,admin}] [-l LIMIT] [-c [PATH] | -j]

              [--server_id SERVER_ID] [--servers-info]

              [--show-all | --show-columns COLUMN_NAME [COLUMN_NAME ...]]

              [--time-unit TIME_UNIT] [-m {v1,v2}]

              [--blank-value [BLANK_VALUE]]
</code></pre></div></div> <p><span class="notranslate"><code>lveinfo</code></span> is an utility to display historical information about LVE usage.</p> <p><strong>Optional arguments</strong></p> <ul><li><p><span class="notranslate"><code>-h, --help</code></span> – show this help message and exit</p></li> <li><p><span class="notranslate"><code>-v, --version</code></span> – show program's version number and exit</p></li> <li><p><span class="notranslate"><code>--dbgov DBGOV</code></span> – show <span class="notranslate"> MySql Governor</span> statistic</p></li> <li><p><span class="notranslate"><code>-u USER, --user USER</code></span> – use username instead of <span class="notranslate"> LVE id</span>, and show only record for that user</p></li> <li><p><span class="notranslate"><code>--id ID</code></span> – will display record only for that <span class="notranslate"> LVE id</span></p></li> <li><p><span class="notranslate"><code>-d, --display-username</code></span> – try to convert <span class="notranslate"> LVE id</span> into username when possible</p></li> <li><p><span class="notranslate"><code>-o ALIAS, --order-by ALIAS</code></span> – orders results by one of the following:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate">ALIAS</span></td> <td><span class="notranslate">ALIAS</span></td> <td>DESCRIPTION</td></tr> <tr><td><span class="notranslate"><code>cpu_avg</code></span></td> <td><span class="notranslate"><code>aCPU</code></span></td> <td>average CPU usage</td></tr> <tr><td><span class="notranslate"><code>cpu_max</code></span></td> <td><span class="notranslate"><code>mCPU</code></span></td> <td>max CPU usage</td></tr> <tr><td><span class="notranslate"><code>total_cpu_faults</code></span></td> <td><span class="notranslate"><code>CPUf</code></span></td> <td>total number of max CPU usage faults</td></tr> <tr><td><span class="notranslate"><code>vmem_avg</code></span></td> <td><span class="notranslate"><code>aVMem</code></span></td> <td>average virtual memory usage</td></tr> <tr><td><span class="notranslate"><code>mep_avg</code></span></td> <td><span class="notranslate"><code>aEP</code></span></td> <td>average number of entry processes (concurrent connections)</td></tr> <tr><td><span class="notranslate"><code>mep_max</code></span></td> <td><span class="notranslate"><code>mEP</code></span></td> <td>max number of entry processes (concurrent connections)</td></tr> <tr><td><span class="notranslate"><code>total_ep_faults</code></span></td> <td><span class="notranslate"><code>EPf</code></span></td> <td>total number of max entry processes faults</td></tr> <tr><td><span class="notranslate"><code>pmem_avg</code></span></td> <td><span class="notranslate"><code>aPMem</code></span></td> <td>average physical memory usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>pmem_max</code></span></td> <td><span class="notranslate"><code>mPMem</code></span></td> <td>max physical memory usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>nproc_avg</code></span></td> <td><span class="notranslate"><code>aNproc</code></span></td> <td>average number of processes (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>nproc_max</code></span></td> <td><span class="notranslate"><code>mNproc</code></span></td> <td>max number of processes (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>io_avg</code></span></td> <td><span class="notranslate"><code>aIO</code></span></td> <td>average io usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>io_max</code></span></td> <td><span class="notranslate"><code>mIO</code></span></td> <td>max io usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>total_pmem_faults</code></span></td> <td><span class="notranslate"><code>PMemF</code></span></td> <td>total number of out of physical memory faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>total_nproc_faults</code></span></td> <td><span class="notranslate"><code>NprocF</code></span></td> <td>total number of max processes faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>total_io_faults</code></span></td> <td><span class="notranslate"><code>IOf</code></span></td> <td>total number of max io faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>iops_avg</code></span></td> <td><span class="notranslate"><code>aIOPS</code></span></td> <td>average io operations (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>iops_max</code></span></td> <td><span class="notranslate"><code>mIOPS</code></span></td> <td>max io operations (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>total_iops_faults</code></span></td> <td><span class="notranslate"><code>IOPSf</code></span></td> <td>total number of max io operations faults (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>any_faults</code></span></td> <td><span class="notranslate"><code>anyF</code></span></td> <td>total number of faults of all types</td></tr></tbody></table></li> <li><p><span class="notranslate"><code>-b ALIAS [ALIAS ...]</code> <code>--by-usage ALIAS [ALIAS ...]</code></span> – show LVEs with usage (averaged) within 90 percent of the limit available values:</p> <table><thead><tr><th></th> <th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate">ALIAS</span></td> <td><span class="notranslate">ALIAS</span></td> <td><span class="notranslate">ALIAS</span></td> <td>DESCRIPTION</td></tr> <tr><td><span class="notranslate"><code>cpu_avg</code></span></td> <td><span class="notranslate"><code>cpu</code></span></td> <td><span class="notranslate"><code>aCPU</code></span></td> <td>average CPU usage</td></tr> <tr><td><span class="notranslate"><code>cpu_max</code></span></td> <td><span class="notranslate"><code>cpu_max</code></span></td> <td><span class="notranslate"><code>mCPU</code></span></td> <td>max CPU usage</td></tr> <tr><td><span class="notranslate"><code>vmem_avg</code></span></td> <td><span class="notranslate"><code>vmem</code></span></td> <td><span class="notranslate"><code>aVMem</code></span></td> <td>average virtual memory usage</td></tr> <tr><td><span class="notranslate"><code>vmem_max</code></span></td> <td><span class="notranslate"><code>vmem_max</code></span></td> <td><span class="notranslate"><code>mVMem</code></span></td> <td>max virtual memory usage</td></tr> <tr><td><span class="notranslate"><code>mep_avg</code></span></td> <td><span class="notranslate"><code>mep</code></span></td> <td><span class="notranslate"><code>aEP</code></span></td> <td>average number of entry processes (concurrent connections)</td></tr> <tr><td><span class="notranslate"><code>mep_max</code></span></td> <td><span class="notranslate"><code>mep_max</code></span></td> <td><span class="notranslate"><code>mEP</code></span></td> <td>max number of entry processes (concurrent connections)</td></tr> <tr><td><span class="notranslate"><code>pmem_avg</code></span></td> <td><span class="notranslate"><code>pmem</code></span></td> <td><span class="notranslate"><code>aPMem</code></span></td> <td>average physical memory usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>pmem_max</code></span></td> <td><span class="notranslate"><code>pmem_max</code></span></td> <td><span class="notranslate"><code>mPMem</code></span></td> <td>max physical memory usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>nproc_avg</code></span></td> <td><span class="notranslate"><code>nproc</code></span></td> <td><span class="notranslate"><code>aNproc</code></span></td> <td>average number of processes (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>nproc_max</code></span></td> <td><span class="notranslate"><code>nproc_max</code></span></td> <td><span class="notranslate"><code>mNproc</code></span></td> <td>max number of processes (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>io_avg</code></span></td> <td><span class="notranslate"><code>io</code></span></td> <td><span class="notranslate"><code>aIO</code></span></td> <td>average io usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>io_max</code></span></td> <td><span class="notranslate"><code>io_max</code></span></td> <td><span class="notranslate"><code>mIO</code></span></td> <td>max io usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>iops_avg</code></span></td> <td><span class="notranslate"><code>iops</code></span></td> <td><span class="notranslate"><code>aIOPS</code></span></td> <td>average io operations (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>iops_max</code></span></td> <td><span class="notranslate"><code>iops_max</code></span></td> <td><span class="notranslate"><code>mIOPS</code></span></td> <td>max io operations (LVE version &gt;= 8)</td></tr></tbody></table></li> <li><p><span class="notranslate"><code>-p 0..100</code>, <code>--percentage 0..100</code></span> – defines percentage for <span class="notranslate"><code>--by-usage</code></span> option; default <code>90</code></p></li> <li><p><span class="notranslate"><code>--style {user,admin}</code></span> – deprecated, not used.</p></li> <li><p><span class="notranslate"><code>-l LIMIT</code>, <code>--limit LIMIT</code></span> – max number of results to display, <code>10</code> by default, if <code>0</code> no limit</p></li> <li><p><span class="notranslate"><code>-c [PATH]</code>, <code>--csv [PATH]</code></span> – save statistics in CSV format; <code>-</code> by default (output to screen)</p></li> <li><p><span class="notranslate"><code>-j</code>, <code>--json</code></span> – display output in JSON format</p></li> <li><p><span class="notranslate"><code>--server_id SERVER_ID</code></span> – used with central database for multiple servers, default <span class="notranslate"><code>localhost</code></span></p></li> <li><p><span class="notranslate"><code>--servers-info</code></span> – show servers LVE versions</p></li> <li><p><span class="notranslate"><code>--show-all</code></span> – full output (show all limits); brief output is default; equivalent <span class="notranslate"><code>--show-columns all</code></span></p></li> <li><p><span class="notranslate"><code>-show-columns COLUMN_NAME [COLUMN_NAME ...]</code></span> – show only the listed columns; <span class="notranslate"><code>all</code></span> for all supported columns</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate">COLUMN_NAME</span></td> <td>DESCRIPTION</td></tr> <tr><td><span class="notranslate"><code>From</code></span></td> <td>Show start period statistics</td></tr> <tr><td><span class="notranslate"><code>To</code></span></td> <td>Show end period statistics</td></tr> <tr><td><span class="notranslate"><code>ID</code></span></td> <td>LVE Id or username</td></tr> <tr><td><span class="notranslate"><code>aCPU</code></span></td> <td>Average <span class="notranslate"> CPU</span> usage</td></tr> <tr><td><span class="notranslate"><code>uCPU</code></span></td> <td>The percentage of user-allocated resource <span class="notranslate">CPU</span></td></tr> <tr><td><span class="notranslate"><code>mCPU</code></span></td> <td>deprecated</td></tr> <tr><td><span class="notranslate"><code>lCPU</code></span></td> <td><span class="notranslate">CPU</span> limit</td></tr> <tr><td><span class="notranslate"><code>CPUf</code></span></td> <td>Out Of <span class="notranslate">CPU</span> usage Faults</td></tr> <tr><td><span class="notranslate"><code>aEP</code></span></td> <td>Average Entry Processes</td></tr> <tr><td><span class="notranslate"><code>uEP</code></span></td> <td>The percentage of user-allocated resource Entry processes</td></tr> <tr><td><span class="notranslate"><code>mEP</code></span></td> <td>deprecated</td></tr> <tr><td><span class="notranslate"><code>lEP</code></span></td> <td>maxEntryProc limit</td></tr> <tr><td><span class="notranslate"><code>aVMem</code></span></td> <td>Average Virtual Memory Usage</td></tr> <tr><td><span class="notranslate"><code>uVMem</code></span></td> <td>The percentage of user-allocated resource Virtual Memory</td></tr> <tr><td><span class="notranslate"><code>mVMem</code></span></td> <td>deprecated</td></tr> <tr><td><span class="notranslate"><code>lVMem</code></span></td> <td>Virtual Memory Limit</td></tr> <tr><td><span class="notranslate"><code>VMemF</code></span></td> <td>Out Of Memory Faults</td></tr> <tr><td><span class="notranslate"><code>EPf</code></span></td> <td>Entry processes faults</td></tr> <tr><td><span class="notranslate"><code>aPMem</code></span></td> <td>Average Physical Memory Usage (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>uPMem</code></span></td> <td>The percentage of user-allocated resource Physical Memory (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>mPMem</code></span></td> <td>deprecated (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>lPMem</code></span></td> <td>Physical Memory Limit (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>aNproc</code></span></td> <td>Average Number of processes (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>uNproc</code></span></td> <td>The percentage of user-allocated resource Number of processes (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>mNproc</code></span></td> <td>deprecated (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>lNproc</code></span></td> <td>Limit of Number of processes (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>PMemF</code></span></td> <td>Out Of Physical Memory Faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>NprocF</code></span></td> <td>Number of processes faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>aIO</code></span></td> <td>Average <span class="notranslate">I/O</span> (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>uIO</code></span></td> <td>The percentage of user-allocated resource <span class="notranslate">I/O</span> (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>mIO</code></span></td> <td>deprecated (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>lIO</code></span></td> <td><span class="notranslate">I/O</span> Limit (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>IOf</code></span></td> <td>Out Of <span class="notranslate">I/O</span> usage Faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>aIOPS</code></span></td> <td>Average <span class="notranslate">I/O</span> Operations (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>mIOPS</code></span></td> <td>deprecated (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>uIOPS</code></span></td> <td>The percentage of user-allocated resource <span class="notranslate">I/O</span> Operations (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>lIOPS</code></span></td> <td><span class="notranslate">I/O</span> Operations Limit (LVE version &gt;= 8) </td></tr> <tr><td><span class="notranslate"><code>IOPSf</code></span></td> <td>Out Of <span class="notranslate">I/O</span> Operations Faults (LVE version &gt;= 8)</td></tr></tbody></table></li> <li><p><span class="notranslate"><code>--time-unit TIME_UNIT</code></span> – time step for grouping statistic in minutes; 1 min., by default; can use <span class="notranslate"><code>m\|h\|d</code></span> suffixes; for example: <code>1h or 1h30m or 1d12h</code></p></li> <li><p><span class="notranslate"><code>-m {v1,v2}</code>, <code>--compat {v1,v2}</code></span> – <code>v1</code> - return old output mode; <code>v2</code> - new mode; default <code>v1</code>; you can change default in config</p></li> <li><p><span class="notranslate"><code>--blank-value [BLANK_VALUE]</code></span> – Use to fill unsupported limits; default <code>-</code></p></li> <li><p><span class="notranslate"><code>-f YYYY-MM-DD[ HH:MM]</code>,  <code>--from YYYY-MM-DD[ HH:MM]</code></span> – run report from date and time in <span class="notranslate"><code>[YY]YY-MM-DD[ HH:MM]</code></span> format; if not present last 10 minutes are assumed</p></li> <li><p><span class="notranslate"><code>-t YYYY-MM-DD[ HH:MM]</code>,  <code>--to YYYY-MM-DD[ HH:MM]</code></span> – run report up to date and time in <span class="notranslate"><code>[YY]YY-MM-DD[ HH:MM]</code></span> format; if not present, reports results up to now</p></li> <li><p><span class="notranslate"><code>--period PERIOD</code></span> – time period; specify minutes with <span class="notranslate"><code>m</code>, <code>h</code></span> - hours, days with <span class="notranslate"><code>d</code></span>, and values: <span class="notranslate"><code>today</code>, <code>yesterday</code>; <code>5m</code></span> - last 5 minutes, <code>4h</code> - last four hours, <code>2d</code> - last 2 days, as well as <span class="notranslate"><code>today</code></span></p></li> <li><p><span class="notranslate"><code>--by-fault ALIAS [ALIAS ...]</code></span> – show LVEs which failed on max processes limit or memory limit</p> <table><thead><tr><th></th> <th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate">ALIAS</span></td> <td><span class="notranslate">ALIAS</span></td> <td><span class="notranslate">ALIAS</span></td> <td>DESCRIPTION</td></tr> <tr><td><span class="notranslate"><code>mcpu</code></span></td> <td><span class="notranslate"><code>cpu</code></span></td> <td><span class="notranslate"><code>CPUf</code></span></td> <td>total number of max CPU usage faults</td></tr> <tr><td><span class="notranslate"><code>mem</code></span></td> <td><span class="notranslate"><code>vmem</code></span></td> <td><span class="notranslate"><code>VMemF</code></span></td> <td>total number of out of virtual memory faults</td></tr> <tr><td><span class="notranslate"><code>mep</code></span></td> <td><span class="notranslate"><code>ep</code></span></td> <td><span class="notranslate"><code>EPf</code></span></td> <td>total number of max entry processes faults</td></tr> <tr><td><span class="notranslate"><code>pmem</code></span></td> <td><span class="notranslate"><code>pmem</code></span></td> <td><span class="notranslate"><code>PMemF</code></span></td> <td>total number of out of physical memory faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>nproc</code></span></td> <td><span class="notranslate"><code>nproc</code></span></td> <td><span class="notranslate"><code>NprocF</code></span></td> <td>total number of max processes faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>io</code></span></td> <td><span class="notranslate"><code>io</code></span></td> <td><span class="notranslate"><code>IOf</code></span></td> <td>total number of max io faults (LVE version &gt;= 6)</td></tr> <tr><td><span class="notranslate"><code>iops</code></span></td> <td><span class="notranslate"><code>iops</code></span></td> <td><span class="notranslate"><code>IOPSf</code></span></td> <td>total number of max io operations faults (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>any_faults</code></span></td> <td><span class="notranslate"><code>any</code></span></td> <td><span class="notranslate"><code>anyF</code></span></td> <td>total number of faults of all types</td></tr></tbody></table></li> <li><p><span class="notranslate"><code>-r FAULTS, --threshold FAULTS</code></span>– in combination with <span class="notranslate"><code>--by-fault</code></span>, shows only LVEs with number of faults above; default <code>1</code></p></li></ul> <p>Prefixes <span class="notranslate"><code>Kb</code>, <code>Mb</code></span> and <span class="notranslate"><code>Gb</code></span> indicates powers of 1024.</p> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>All <span class="notranslate">ALIAS</span> options are not case sensitive.</p></div><div class="notranslate"><h4 id="lvechart"><a href="#lvechart" class="header-anchor">#</a> lvechart</h4></div> <p><code>/usr/sbin/lvechart</code> - creates a chart representing LVE usage for user.</p> <p><strong>Usage</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/sbin/lvechart [OPTIONS]
</code></pre></div></div> <p><strong>Acceptable options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>--help</code></span></td> <td>This help screen</td></tr> <tr><td><span class="notranslate"><code>--version</code></span></td> <td>Version number</td></tr> <tr><td><span class="notranslate"><code>--from</code></span></td> <td>Run report from date and time in <span class="notranslate"><code>YYYY-MM-DD HH:MM</code></span> format (if not present, last 10 minutes are assumed)</td></tr> <tr><td><span class="notranslate"><code>--to=</code></span></td> <td>Run report up to date and time in <span class="notranslate"><code>YYYY-MM-DD HH:MM</code></span> format (if not present, reports results up to now)</td></tr> <tr><td><span class="notranslate"><code>--period=</code></span></td> <td>Time period: specify minutes with <code>m</code>, <code>h</code> - hours, days with <code>d</code>, and values: <span class="notranslate"><code>today</code></span>, <span class="notranslate"><code>yesterday</code></span>; <code>5m</code> - last 5 minutes, <code>4h</code> - last four hours, <code>2d</code> - last 2 days, as well as today</td></tr> <tr><td><span class="notranslate"><code>--id=</code></span></td> <td><span class="notranslate"><code>LVE id</code></span> will display record only for that <span class="notranslate">LVE id</span></td></tr> <tr><td><span class="notranslate"><code>--user=</code></span></td> <td>Use username instead of <span class="notranslate"> LVE id </span>, and show only record for that user</td></tr> <tr><td><span class="notranslate"><code>--server=</code></span></td> <td><span class="notranslate"><code>Server id</code></span> will display record for that server, instead of default (current)</td></tr> <tr><td><span class="notranslate"><code>--output=</code></span></td> <td>Filename to save chart as, if not present, output will be sent to STDOUT</td></tr> <tr><td><span class="notranslate"><code>--show-all</code></span></td> <td>Show all graphs (by default shows graphs for which limits are set)</td></tr> <tr><td><span class="notranslate"><code>--style=</code></span></td> <td><span class="notranslate"><code>admin</code>, <code>user</code></span> set chart style,  <span class="notranslate">CPU</span> limits are normalized to 100% in user’s style</td></tr> <tr><td><span class="notranslate"><code>--format=</code></span></td> <td><span class="notranslate"><code>svg</code>, <code>png</code></span> set chart output format</td></tr></tbody></table> <div class="notranslate"><h4 id="dbgovchart"><a href="#dbgovchart" class="header-anchor">#</a> dbgovchart</h4></div> <p><code>/usr/sbin/dbgovchart</code> - creates a chart representing MySQL usage for user.`</p> <p><strong>Usage</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/sbin/dbgovchart [OPTIONS]
</code></pre></div></div> <p><strong>Acceptable options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>--help</code></span></td> <td>This help screen</td></tr> <tr><td><span class="notranslate"><code>--version</code></span></td> <td>Version number</td></tr> <tr><td><span class="notranslate"><code>--from=</code></span></td> <td>Run report from date and time in <span class="notranslate"><code>YYYY-MM-DD HH:MM</code></span> format (if not present, last 10 minutes are assumed)</td></tr> <tr><td><span class="notranslate"><code>--to=</code></span></td> <td>Run report up to date and time in <span class="notranslate"><code>YYYY-MM-DD HH:MM</code></span> format (if not present, reports results up to now)</td></tr> <tr><td><span class="notranslate"><code>--period=</code></span></td> <td>Time period: specify minutes with <code>m</code>,  <code>h</code> - hours, days with <code>d</code>, and values: <span class="notranslate"><code>today</code></span>, <span class="notranslate"><code>yesterday</code></span>; <code>5m</code> - last 5 minutes, <code>4h</code> - last four hours, <code>2d</code> - last 2 days, as well as today`</td></tr> <tr><td><span class="notranslate"><code>--user=</code></span></td> <td>mysql username</td></tr> <tr><td><span class="notranslate"><code>--output=</code></span></td> <td>Filename to save chart as, if not present, output will be sent to <span class="notranslate">STDOUT</span></td></tr> <tr><td><span class="notranslate"><code>--show-all</code></span></td> <td>Show all graphs (by default shows graphs for which limits are set)</td></tr> <tr><td><span class="notranslate"><code>--server=</code></span></td> <td><span class="notranslate"><code>Server id</code></span> will display record for that server, instead of default (current)</td></tr> <tr><td><span class="notranslate"><code>--style=</code></span></td> <td><span class="notranslate"><code>admin</code>, <code>user</code></span> set chart style,  <span class="notranslate">CPU</span> limits are normalized to 100% in user’s style</td></tr> <tr><td><span class="notranslate"><code>--format=</code></span></td> <td><span class="notranslate"><code>svg</code>, <code>png</code></span> set chart output format</td></tr></tbody></table> <div class="notranslate"><h4 id="lve-read-snapshot"><a href="#lve-read-snapshot" class="header-anchor">#</a> lve-read-snapshot</h4></div> <p><strong>Usage</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>lve-read-snapshot [-h] [--version] [-f FROM [FROM ...]] [-t TO [TO ...]
                  [ -p PERIOD | --timestamp TIMESTAMP]
                  [-i ID | -u USER] [-l] [-o file] [-j] [--stats]
                  [--unit unit]
</code></pre></div></div> <p>Reads LVE system state snapshots for <span class="notranslate">LVE/user</span>.</p> <p><strong>Optional arguments</strong></p> <ul><li><span class="notranslate"><code>-h, --help</code></span> – show this help message and exit</li> <li><span class="notranslate"><code>--version</code></span> – version number</li> <li><span class="notranslate"><code>-f FROM [FROM ...]</code>, <code>--from FROM [FROM ...]</code></span> – run report from date and time in <span class="notranslate"><code>YYYY-MM-DD HH:MM</code></span> format, if not present last 10 minutes are assumed (default: <code>2016-10-24 19:28</code>)</li> <li><span class="notranslate"><code>-t TO [TO ...]</code>, <code>--to TO [TO ...]</code></span> – run report up to date and time in <span class="notranslate"><code>YYYY-MM-DD HH:MM</code></span> format, if not present, reports results up to now (default: <code>2016-10-24 19:38</code>)</li> <li><span class="notranslate"><code>-p PERIOD</code>, <code>--period PERIOD</code></span> – time period specify minutes with <code>m</code>, <code>h</code> - hours, days with <code>d</code>, and values: <span class="notranslate"><code>today</code>, <code>yesterday</code></span>, <code>5m</code> - last 5 minutes, <code>4h</code> - last four hours, <code>2d</code> - last 2 days, as well as today (default: <code>10m</code>)</li> <li><span class="notranslate"><code>--timestamp TIMESTAMP</code></span> – time stamp in unix format for get one snapshot (default: <span class="notranslate"><code>None</code></span>)</li> <li><span class="notranslate"><code>-i ID, --id ID</code></span> – LVE id to show records for (default: <span class="notranslate"><code>None</code></span>)</li> <li><span class="notranslate"><code>-u USER</code>, <code>--user USER</code></span> – user account to show records for (default: <span class="notranslate"><code>None</code></span>)</li> <li><span class="notranslate"><code>-l</code>, <code>--list</code></span> – show timestamp list only (default: <span class="notranslate"><code>False</code></span>)</li> <li><span class="notranslate"><code>-o file</code>, <code>--output file</code></span> – filename to save snaphots report to, if not present,output will be sent to <span class="notranslate">STDOUT</span> (default: <span class="notranslate"><code>None</code></span>)</li> <li><span class="notranslate"><code>-j</code>, <code>--json</code></span> – output in json format (default: <span class="notranslate"><code>False</code></span>)</li> <li><span class="notranslate"><code>--stats</code></span> – output stats, instead of snapshots (default: <span class="notranslate"><code>False</code></span>)</li> <li><span class="notranslate"><code>--unit unit</code></span> – group stats by time unit. Example values <code>3h</code>, <code>24h</code>, <code>1d</code>, <code>1w</code>. Other possible value is <span class="notranslate"><code>auto</code></span> for grouping by each incident (default: <span class="notranslate"><code>1d</code></span>)</li></ul> <p>One of <span class="notranslate"><code>-u --user</code></span> or <span class="notranslate"><code>-i --id</code></span> should be specified.</p> <div class="notranslate"><h4 id="lve-create-db"><a href="#lve-create-db" class="header-anchor">#</a> lve-create-db</h4></div> <p><strong>Usage</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>lve-create-db [-h] [--recreate] [--print-sql]
                   [--update-serverid-prompt] [--update-serverid-auto]
                   [--validate]
</code></pre></div></div> <p>Creates a database for <span class="notranslate">lve-stats</span>.</p> <p><strong>Optional arguments</strong></p> <ul><li><span class="notranslate"><code>-h</code>, <code>--help</code></span> – show this help message and exit</li> <li><span class="notranslate"><code>--recreate</code></span> – drops and recreates database even if tables exists (default: <span class="notranslate"><code>False</code></span>)</li> <li><span class="notranslate"><code>--print-sql</code></span> – prints sql and exits, without creating db (default: <span class="notranslate"><code>False</code></span>)</li> <li><span class="notranslate"><code>--update-serverid-prompt</code></span> – update exist server ID or create new one (default: <span class="notranslate"><code>False</code></span>)</li> <li><span class="notranslate"><code>--update-serverid-auto</code></span> – update exist server ID with <span class="notranslate">uuid</span> (default: <span class="notranslate"><code>False</code></span>)</li> <li><span class="notranslate"><code>--validate</code></span> – check the correctness of the database structure (default: <span class="notranslate"><code>False</code></span>)</li></ul> <h4 id="cloudlinux-top"><a href="#cloudlinux-top" class="header-anchor">#</a> cloudlinux-top</h4> <p>Utility provides information about current MySQL and LVE usage of a running system in JSON format.</p> <h4 id="usage"><a href="#usage" class="header-anchor">#</a> <strong>Usage</strong></h4> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux_top [-h] [-v] [-j] [--hide-mysql]
               [-u USERNAME | -r FOR_RESELLER] [-d DOMAIN] [-m MAX]
               [-o ORDER_BY]
</code></pre></div></div> <p><strong>Optional arguments</strong></p> <ul><li><span class="notranslate"><code>-h, --help</code></span> – show this help message and exit</li> <li><span class="notranslate"><code>-v, --version</code></span> – show program version number and exit</li> <li><span class="notranslate"><code>-j, --json</code></span> – return data in JSON format</li> <li><span class="notranslate"><code>--hide-mysql</code></span> | `don't show MySQL related info</li> <li><span class="notranslate"><code>-u USERNAME</code>, <code>--username USERNAME</code></span> – show data only for a specific user. Can be used to filter the output; returns users with username <span class="notranslate"><code>%USERNAME%</code></span></li> <li><span class="notranslate"><code>-r FOR_RESELLER</code>, <code>--for-reseller FOR_RESELLER</code></span> – get information only about specified reseller and his users</li> <li><span class="notranslate"><code>-d DOMAIN</code>, <code>--domain DOMAIN</code></span> – show data only for a specific domain. Can be used to filter the output; returns users with domain <span class="notranslate"><code>%DOMAIN%</code></span></li> <li><span class="notranslate"><code>-m MAX</code>, <code>--max MAX</code></span> – show up to <span class="notranslate"><code>N</code></span> records. If <span class="notranslate"><code>--max</code></span> key is omitted. By default will show top 25 users</li> <li><span class="notranslate"><code>-o ORDER_BY</code>, <code>--order-by ORDER_BY</code></span> – sort output by resource usage; available options: <span class="notranslate"><code>cpu</code>, <code>mysql_cpu</code>, <code>io</code>, <code>mysql_io</code>, <code>iops</code>, <code>ep</code>, <code>nproc</code>, <code>pmem</code></span></li></ul> <h4 id="output-format"><a href="#output-format" class="header-anchor">#</a> <strong>Output format</strong></h4> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mySqlGov&quot;: &quot;enabled&quot;,              # possible values: enabled, error
  &quot;mySqlGovMode&quot;: &quot;abusers&quot;,          # see “MySQL Governor &gt; Modes Of Operation”
                                      # if MySQL Governor is not enabled, value is &quot;none&quot;
 
  &quot;resellers&quot;: [                      # list of resellers (available only with
                                      # reseller limits feature)
      {
          &quot;id&quot;: 1000020005,           # internal record id
          &quot;limit&quot;: &lt;lve_section&gt;,     # current limits (last 5 seconds)
          &quot;name&quot;: &quot;reseller_name&quot;,    # reseller’s login in control panel
          &quot;usage&quot;: &lt;lve_section&gt;      # current usage (last 5 seconds)
      }
  ],
  &quot;result&quot;: &quot;success&quot;,                # see the ‘errors handling’ section
  &quot;timestamp&quot;: 1522858537.337549,
  &quot;users&quot;: [
      {
          &quot;domain&quot;: &quot;domain.com&quot;,     # user’s primary domain (from control panel)
          &quot;id&quot;: 20005,                # lve_id, same as user id in /etc/passwd file
          &quot;limit&quot;: &lt;lve_section&gt;,     # limits for last 5 seconds
          &quot;reseller&quot;: &quot;reseler1&quot;,     # user’s reseller (from control panel)
          &quot;usage&quot;: &lt;lve_section&gt;,     # usage for last 5 seconds
          &quot;username&quot;: &quot;user&quot;          # username from /etc/passwd file or “N/A” if user
                                      # with such id does not exist
       }
   ]
 }
</code></pre></div></div> <p>The structure<sup> *</sup> of <span class="notranslate"><code>&lt;lve_section&gt;</code></span>:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
&quot;cpu&quot;: {
 &quot;all&quot;: 50.0,      # CPU usage or limit (LVE only)
 &quot;mysql&quot;: 0.0*     # CPU usage or limit (MySQL Governor only)
},
&quot;ep&quot;: 1.0,           # number of entry processes
&quot;io&quot;: {
 &quot;all&quot;: 0.0,       # IO usage or limit (LVE only)
 &quot;mysql&quot;: 0.0**     # IO usage or limit (MySQL Governor only)
},
&quot;iops&quot;: 0.0,         # IO operations per second
&quot;mem&quot;: 258048,       # memory usage or limit
&quot;pno&quot;: 1.0           # number of processes
}
</code></pre></div></div> <div class="tip custom-block"><p class="custom-block-title">Note</p><ul><li>you can modify this structure using <span class="notranslate"><code>--show</code></span> option, see <a href="/command-line_tools/#examples">usage examples</a> for details.</li> <li>MySQL values are only present when <span class="notranslate">MySQL Governor</span> statistics is available and <span class="notranslate"><code>--hide-mysql</code></span> options is not used.</li></ul></div><h4 id="units-of-measurement"><a href="#units-of-measurement" class="header-anchor">#</a> <strong>Units of measurement</strong></h4> <p>For <span class="notranslate"><code>limits</code></span> and <span class="notranslate"><code>usage</code></span> sections we use the following units of measurement.</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><strong>Value</strong></td> <td><strong>Units of measurement</strong></td></tr> <tr><td><span class="notranslate"> cpu (lve and mysql) </span></td> <td>percentage of one <span class="notranslate"> CPU </span> core</td></tr> <tr><td><span class="notranslate"> io (lve and mysql) </span></td> <td>bytes per second</td></tr> <tr><td><span class="notranslate"> iops </span></td> <td>number of <span class="notranslate"> IO </span> operations per second</td></tr> <tr><td><span class="notranslate"> mem </span></td> <td>bytes</td></tr> <tr><td><span class="notranslate"> ep </span></td> <td>number of entry processes</td></tr> <tr><td><span class="notranslate"> pno </span></td> <td>number of processes</td></tr></tbody></table> <h4 id="errors-handling"><a href="#errors-handling" class="header-anchor">#</a> <strong>Errors handling</strong></h4> <p>The format of the error message is the same as in the other <span class="notranslate"><code>cloudlinux- *</code></span> utilities. When everything is ok, the <span class="notranslate"><code>result</code></span> value is <span class="notranslate"><code>success</code></span>. Otherwise, it contains error message. In case of unexpected errors, the output will be as follows.</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-top --json 
{
  &quot;context&quot;: {
      &quot;error_text&quot;: &quot;Very bad error&quot;
  },
  &quot;result&quot;: &quot;An error occured: \&quot;%(error_text)s\&quot;&quot;,
  &quot;timestamp&quot;: 1523871939.639394
}
</code></pre></div></div> <h4 id="examples"><a href="#examples" class="header-anchor">#</a> <strong>Examples</strong></h4> <ul><li><p>get 100 users ordered by <span class="notranslate"> CPU </span> usage</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-top --json --order-by cpu --max=100
</code></pre></div></div></li> <li><p>get information about one user</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-top --json -u username
</code></pre></div></div></li> <li><p>get information about reseller and his users</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-top --json --for-reseller=reseller_name
</code></pre></div></div></li> <li><p>show only <span class="notranslate">IO</span> limits and usage</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-top --json --show=io
</code></pre></div></div></li></ul> <div class="notranslate"><h4 id="cloudlinux-statistics"><a href="#cloudlinux-statistics" class="header-anchor">#</a> cloudlinux-statistics</h4></div> <p><span class="notranslate">cloudlinux-statistics</span> is a <span class="notranslate">CLI</span> utility that provides historical information about resource usage.</p> <h4 id="usage-2"><a href="#usage-2" class="header-anchor">#</a> <strong>Usage</strong></h4> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-statistics [-h] [-j] [-v] [--by-usage BY_USAGE]
                      [--percentage 0..100] [--by-fault BY_FAULT]
                      [--threshold THRESHOLD] [--server_id SERVER_ID]
                      [-f FROM] [-t TO] [--period PERIOD]
                      [--limit LIMIT]
                      [--show COLUMN_NAME [COLUMN_NAME ...]]
                      [-o ORDER_BY] [--id ID] [--time-unit TIME_UNIT]
                      [-r FOR_RESELLER]
</code></pre></div></div> <p><strong>Optional arguments</strong></p> <ul><li><p><span class="notranslate"><code>-h</code>, <code>--help</code></span> – show this help message and exit</p></li> <li><p><span class="notranslate"><code>-j</code>, <code>--json</code></span> – return data in JSON format</p></li> <li><p><span class="notranslate"><code>-v</code>, <code>--version</code></span> – show program version number and exit</p></li> <li><p><span class="notranslate"><code>--server_id SERVER_ID</code>, <code>--server-id SERVER_ID</code></span> – can be used with the central database for multiple servers; default <code>...</code></p></li> <li><p><span class="notranslate"><code>--limit LIMIT</code></span> – limit the number of results to display, <code>0</code> is unlimited</p></li> <li><p><span class="notranslate"><code>--show COLUMN_NAME [COLUMN_NAME ...]</code></span> – show only listed columns; <span class="notranslate"><code>all</code></span> for all supported columns (fields)</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate">Key</span></td> <td>Fields to show</td></tr> <tr><td><span class="notranslate"><code>all</code></span></td> <td>all available fields</td></tr> <tr><td><span class="notranslate"><code>cpu</code></span></td> <td>CPU field</td></tr> <tr><td><span class="notranslate"><code>io</code></span></td> <td>IO field</td></tr> <tr><td><span class="notranslate"><code>iops</code></span></td> <td>IOPS field</td></tr> <tr><td><span class="notranslate"><code>ep</code></span></td> <td>entry processes (concurrent connections) field</td></tr> <tr><td><span class="notranslate"><code>nproc</code></span></td> <td>number of processes field</td></tr> <tr><td><span class="notranslate"><code>pmem</code></span></td> <td>physical memory field</td></tr> <tr><td><span class="notranslate"><code>vmem</code></span></td> <td>virtual memory field</td></tr> <tr><td><span class="notranslate"><code>mysql</code></span></td> <td><code>mysql_cpu</code> &amp; <code>mysql_io</code> field</td></tr></tbody></table></li> <li><p><span class="notranslate"><code>-o ORDER_BY</code>, <code>--order-by ORDER_BY</code></span> – order results by one of the following keys (fields):</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>FIELD</td> <td>DESCRIPTION</td></tr> <tr><td><span class="notranslate"><code>any_faults</code></span></td> <td>total number of faults of all types</td></tr> <tr><td><span class="notranslate"><code>cpu</code></span></td> <td>average CPU usage`</td></tr> <tr><td><span class="notranslate"><code>mysql_cpu</code></span></td> <td>average MySQL CPU usage`</td></tr> <tr><td><span class="notranslate"><code>io</code></span></td> <td>average IO usage`</td></tr> <tr><td><span class="notranslate"><code>mysql_io</code></span></td> <td>average MySQL IO usage`</td></tr> <tr><td><span class="notranslate"><code>iops</code></span></td> <td>average IO operations; (LVE version &gt;= 8)`</td></tr> <tr><td><span class="notranslate"><code>ep</code></span></td> <td>average number of entry processes (concurrent connections)`</td></tr> <tr><td><span class="notranslate"><code>nproc</code></span></td> <td>average number of processes`</td></tr> <tr><td><span class="notranslate"><code>pmem</code></span></td> <td>average physical memory usage`</td></tr> <tr><td><span class="notranslate"><code>vmem</code></span></td> <td>average virtual memory usage`</td></tr> <tr><td><span class="notranslate"><code>cpu_faults</code></span></td> <td>total number of CPU usage faults`</td></tr> <tr><td><span class="notranslate"><code>io_faults</code></span></td> <td>total number of max IO faults`</td></tr> <tr><td><span class="notranslate"><code>iops_fault</code></span></td> <td>total number of max IO operations faults; (LVE version &gt;= 8)`</td></tr> <tr><td><span class="notranslate"><code>ep_faults</code></span></td> <td>total number of max entry processes faults`</td></tr> <tr><td><span class="notranslate"><code>nproc_faults</code></span></td> <td>total number of max processes faults`</td></tr> <tr><td><span class="notranslate"><code>pmem_faults</code></span></td> <td>total number of out of physical memory faults`</td></tr> <tr><td><span class="notranslate"><code>vmem_faults</code></span></td> <td>total number of out of virtual memory faults`</td></tr></tbody></table></li> <li><p><span class="notranslate"><code>-r FOR_RESELLER</code>, <code>--for-reseller FOR_RESELLER</code></span> – show statistics only for given reseller and his users</p></li></ul> <p>Filter items by resource usage.</p> <ul><li><p><span class="notranslate"><code>--by-usage BY_USAGE</code></span> – show LVEs with usage (averaged) within 90 percent of the limit available values</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>FIELD</td> <td>DESCRIPTION</td></tr> <tr><td><span class="notranslate"><code>cpu</code></span></td> <td>average CPU usage</td></tr> <tr><td><span class="notranslate"><code>mysql_cpu</code></span></td> <td>average MySQL CPU usage</td></tr> <tr><td><span class="notranslate"><code>io</code></span></td> <td>average IO usage</td></tr> <tr><td><span class="notranslate"><code>mysql_io</code></span></td> <td>average MySQL IO usage</td></tr> <tr><td><span class="notranslate"><code>iops</code></span></td> <td>average IO operations; (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>ep</code></span></td> <td>average number of entry processes (concurrent connections)</td></tr> <tr><td><span class="notranslate"><code>nproc</code></span></td> <td>average number of processes</td></tr> <tr><td><span class="notranslate"><code>pmem</code></span></td> <td>average physical memory usage</td></tr> <tr><td><span class="notranslate"><code>vmem</code></span></td> <td>average virtual memory usage</td></tr></tbody></table></li> <li><p><span class="notranslate"><code>-percentage 0..100</code></span> – define percentage for <span class="notranslate"><code>--by-usage</code></span> option; default <code>90</code></p></li></ul> <p>Filter items by the number of faults.</p> <ul><li><p><span class="notranslate"><code>--by-fault BY_FAULT</code></span> – show only accounts that have some faults for the given limit</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>FIELD</td> <td>DESCRIPTION</td></tr> <tr><td><span class="notranslate"><code>any</code></span></td> <td>faults of all types</td></tr> <tr><td><span class="notranslate"><code>cpu</code></span></td> <td>CPU usage faults</td></tr> <tr><td><span class="notranslate"><code>io</code></span></td> <td>max IO usage faults</td></tr> <tr><td><span class="notranslate"><code>iops</code></span></td> <td>max IO operations faults; (LVE version &gt;= 8)</td></tr> <tr><td><span class="notranslate"><code>ep</code></span></td> <td>max entry processes faults</td></tr> <tr><td><span class="notranslate"><code>nproc</code></span></td> <td>max processes faults</td></tr> <tr><td><span class="notranslate"><code>pmem</code></span></td> <td>out of physical memory faults</td></tr> <tr><td><span class="notranslate"><code>vmem</code></span></td> <td>out of virtual memory faults</td></tr></tbody></table></li> <li><p><span class="notranslate"><code>--threshold THRESHOLD</code></span> – in combination with <span class="notranslate"><code>--by-fault</code></span> shows only accounts with the number of faults more than given; default <code>1</code></p></li></ul> <p>Filter items by a time interval.</p> <p>Allows to get information for the given period of time; you can either set <span class="notranslate"><code>--from</code></span> and <span class="notranslate"><code>--to</code></span> options, or just get information for the recent time period using <span class="notranslate"><code>--period option</code>.</span></p> <div class="tip custom-block"><p class="custom-block-title">Note</p><p><span class="notranslate"><code>--from</code></span> and <span class="notranslate"><code>--to</code></span> values are ignored when <span class="notranslate"><code>--period</code></span> is set.</p></div><ul><li><span class="notranslate"><code>-f FROM</code>, <code>--from FROM</code></span> – run report from date and time in <span class="notranslate"><code>[YY]YY-MM-DD[ HH:MM]</code></span> format; if not present, last 10 minutes are assumed</li> <li><span class="notranslate"><code>-t TO</code>, <code>--to TO</code></span> – run report up to date and time in <span class="notranslate"><code>[YY]YY-MM-DD[ HH:MM]</code></span> format; if not present, reports results up to now</li> <li><span class="notranslate"><code>--period PERIOD</code></span> – time period; specify minutes with <span class="notranslate"><code>m</code></span>, hours with <span class="notranslate"><code>h</code></span>, days with <span class="notranslate"><code>d</code></span>, and values: <span class="notranslate"><code>today</code>, <code>yesterday</code></span>; <code>5m</code> - last 5 minutes, <code>4h</code> - last four hours, <code>2d</code> - last 2 days, and <span class="notranslate"><code>today</code></span></li></ul> <p>Get detailed statistics.</p> <ul><li><span class="notranslate"><code>--id ID</code></span> – get detailed statistics for database record with the given id</li> <li><span class="notranslate"><code>--time-unit TIME_UNIT</code></span> – group statistics using the given time; 1 minute by default. For example: <span class="notranslate"><code>1h</code></span> or <span class="notranslate"><code>1h30m</code></span> or <span class="notranslate"><code>dynamic</code></span>; available only in pair with <span class="notranslate"><code>--id</code></span></li></ul> <h4 id="output-format-2"><a href="#output-format-2" class="header-anchor">#</a> <strong>Output format</strong></h4> <p>There are two different JSON formats used for <strong>summary statistics</strong> and <strong>detailed statistics</strong>.</p> <p><strong>Summary statistics</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-statistics --json
 {
 &quot;resellers&quot;: [
   {
     &quot;usage&quot;: &lt;lve_section&gt;,
     &quot;faults&quot;: &lt;lve_section&gt;,
     &quot;name&quot;: &quot;reseller&quot;,
     &quot;limits&quot;: &lt;lve_section&gt;,
     &quot;id&quot;: 1000020005
   }
 ],
 &quot;timestamp&quot;: 1522920637,
 &quot;mySqlGov&quot;: &quot;enabled&quot;,            # possible values: ”enabled”, “error”
 &quot;result&quot;: &quot;success&quot;,
 &quot;users&quot;: [
   {
     &quot;username&quot;: &quot;username&quot;,
     &quot;domain&quot;: &quot;example.com&quot;,
     &quot;reseller&quot;: &quot;reseller&quot;,
     &quot;limits&quot;: &lt;lve_section&gt;,
     &quot;faults&quot;: &lt;lve_section&gt;,
     &quot;usage&quot;: &lt;lve_section&gt;,
     &quot;id&quot;: 20005
   }
 ]
 }
</code></pre></div></div> <p><strong>Detailed statistics</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-statistics --json --id=20001
 {
 &quot;timestamp&quot;: 1523011550,
 &quot;mySqlGov&quot;: &quot;enabled&quot;,           # possible values: ”enabled”, “error”
 &quot;result&quot;: &quot;success&quot;,
 &quot;user&quot;: [
   {
     &quot;usage&quot;: &lt;lve_section&gt;,
     &quot;faults&quot;: &lt;lve_section&gt;,
     &quot;from&quot;: 1523011144,
     &quot;limits&quot;: &lt;lve_section&gt;,
     &quot;to&quot;: 1523011143
   },
 ...
   {
     &quot;usage&quot;: &lt;lve_section&gt;,
     &quot;faults&quot;: &lt;lve_section&gt;,
     &quot;from&quot;: 1523011204,
     &quot;limits&quot;: &lt;lve_section&gt;,
     &quot;to&quot;: 1523011203
   }
 ]
 }
</code></pre></div></div> <p>For both, <strong>summary statistics</strong> and <strong>detailed statistics</strong>, <span class="notranslate"><code>&lt;lve_section&gt;</code></span> is the same and looks like following<sup> *</sup>.</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
   &quot;ep&quot;: {
     &quot;lve&quot;: 1        # number of entry processes
   },
   &quot;vmem&quot;: {
     &quot;lve&quot;: 2428928  # virtual memory usage or limit (deprecated)
   },
   &quot;iops&quot;: {
     &quot;lve&quot;: 0        # io operations per second
   },
   &quot;io&quot;: {
     &quot;lve&quot;: 0.0,     # io usage or limit (lve only)
     &quot;mysql&quot;: 0.0**   # io usage or limit (mysql only)
   },
   &quot;nproc&quot;: {
     &quot;lve&quot;: 1        # number of processes in lve
   },
   &quot;cpu&quot;: {
     &quot;lve&quot;: 25.6,    # cpu usage (lve only)
     &quot;mysql&quot;: 0.0*   # cpu usage (mysql governor only)
   },
   &quot;pmem&quot;: {
     &quot;lve&quot;: 360448   # physical memory usage or limit
   }
 }
</code></pre></div></div> <div class="tip custom-block"><p class="custom-block-title">Note</p><ul><li>you can specify only required fields using <span class="notranslate"><code>--show</code></span> option;</li> <li><span class="notranslate"><code>mysql</code></span> fields are only available with <span class="notranslate"><a href="/cloudlinux_os_components/#installation-and-update-3">MySQL Governor</a></span> installed.</li></ul></div><h4 id="units-of-measurement-2"><a href="#units-of-measurement-2" class="header-anchor">#</a> <strong>Units of measurement</strong></h4> <p>For <span class="notranslate"><code>limits</code></span> and <span class="notranslate"><code>usage</code></span> sections we use the following units of measurement.</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>Value</td> <td>Units of measurement</td></tr> <tr><td><span class="notranslate"><code>cpu</code> (LVE and MySQL)</span></td> <td>percentage of one <span class="notranslate">CPU</span> core</td></tr> <tr><td><span class="notranslate"><code>io</code> (LVE and MySQL) </span></td> <td>bytes per second</td></tr> <tr><td><span class="notranslate"><code>iops</code></span></td> <td>number of <span class="notranslate">IO</span> operations per second</td></tr> <tr><td><span class="notranslate"><code>pmem</code></span> and <span class="notranslate"><code>vmem</code></span></td> <td>bytes</td></tr> <tr><td><span class="notranslate"><code>ep</code></span></td> <td>number of entry processes</td></tr> <tr><td><span class="notranslate"><code>nproc</code></span></td> <td>number of processes in LVE</td></tr></tbody></table> <h4 id="errors-handling-2"><a href="#errors-handling-2" class="header-anchor">#</a> <strong>Errors handling</strong></h4> <p>The format of the error message is the same as in the other <span class="notranslate"><code>cloudlinux- *</code></span> utilities. When everything is ok, the <span class="notranslate"><code>result</code></span> value is <span class="notranslate"><code>success</code></span>. Otherwise, it contains error message.</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-statistics --json 
{
  &quot;context&quot;: {
      &quot;error_text&quot;: &quot;Very bad error&quot;
  },
  &quot;result&quot;: &quot;An error occured: \&quot;%(error_text)s\&quot;&quot;,
  &quot;timestamp&quot;: 1523871939.639394
}
</code></pre></div></div> <h4 id="examples-2"><a href="#examples-2" class="header-anchor">#</a> <strong>Examples</strong></h4> <ul><li>get top 10 users ordered by <span class="notranslate">CPU</span> usage for today</li></ul> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-statistics --json --order-by=cpu --period=today --limit=10
</code></pre></div></div> <ul><li>get users that hit <span class="notranslate">IO</span> limit more than 10 times for today</li></ul> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-statistics --json --period=today --by-fault=io --threshold=10
</code></pre></div></div> <ul><li>get users that used more than 80% of <span class="notranslate">CPU</span> in last 24 hours</li></ul> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-statistics --json --by-usage=cpu --percentage=80 --period=24h
</code></pre></div></div> <ul><li>get information only about reseller and his users</li></ul> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-statistics --json --for-reseller=reseller_name
</code></pre></div></div> <ul><li>get information only about <span class="notranslate">CPU</span> and <span class="notranslate">IO</span> usage</li></ul> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cloudlinux-statistics --json --show=cpu,io
</code></pre></div></div> <h2 id="mysql-governor"><a href="#mysql-governor" class="header-anchor">#</a> MySQL Governor</h2> <ul><li><span class="notranslate"><code>dbtop</code></span> monitors MySQL usage on per user bases.</li> <li><span class="notranslate"><code>dbctl</code></span> is a command line tool to manage <span class="notranslate">DB Governor</span> configuration.</li> <li><span class="notranslate"><code>lveinfo --dbgov</code></span> provides historical information about usage and customer restrictions.</li> <li><span class="notranslate"><code>dbgovchart</code></span> generates charts for MySQL usage.</li></ul> <h4 id="dbtop"><a href="#dbtop" class="header-anchor">#</a> dbtop</h4> <p>Utility to monitor MySQL usage. Requires <span class="notranslate"><code>db_governor</code></span> to be running. It shows usage for the current, mid and long intervals.</p> <p><strong>Options:</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> -c </span></td> <td>show one time user list (no interactive mode)</td></tr> <tr><td><span class="notranslate"> -r interval </span></td> <td>refresh interval for interactive mode (in seconds)</td></tr></tbody></table> <p><strong>Control keys</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> z </span></td> <td>toggle color mode and two-color mode</td></tr> <tr><td><span class="notranslate"> q </span></td> <td><span class="notranslate"> F10, Ctrl-c </span> - quit program</td></tr> <tr><td><span class="notranslate"> u </span></td> <td>sort table by username</td></tr> <tr><td><span class="notranslate"> c </span></td> <td>sort table by cpu column</td></tr> <tr><td><span class="notranslate"> r </span></td> <td>sort table by read column</td></tr> <tr><td><span class="notranslate"> w </span></td> <td>sort table by write column</td></tr> <tr><td><span class="notranslate"> l </span></td> <td>sort by restriction level</td></tr> <tr><td><span class="notranslate"> t </span></td> <td>sort by time before restrictions will be lifted.</td></tr></tbody></table> <p>Control keys, that sort table, displays into header of table bold and underlined symbol.
Sorted field will be highlighted by *.
<span class="notranslate"> CAUSE </span> field shows current stage, reason for restriction and number of seconds before restriction will be lifted:
Values of column ' <span class="notranslate"> CAUSE </span> ' - cause of restriction or freezing:
Possible stages:</p> <ul><li><code>-</code> <span class="notranslate"> OK </span></li> <li><code>1</code> - Restriction 1</li> <li><code>2</code> - Restriction 2</li> <li><code>3</code> - Restriction 3</li> <li><code>4</code> - Restriction level 4</li></ul> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> c - current </span></td> <td>(current value of parameter)</td></tr> <tr><td><span class="notranslate"> s - short </span></td> <td>(average value of 5 last values of parameter)</td></tr> <tr><td><span class="notranslate"> m - middle </span></td> <td>(average value of 15 last values of parameter)</td></tr> <tr><td><span class="notranslate"> l - long </span></td> <td>(average value of 30 last values of parameter)</td></tr> <tr><td></td> <td>and parameter which is cause of restriction</td></tr> <tr><td><span class="notranslate"> 1/s:busy_time/12 </span></td> <td>first level restricted account with short average restriction <span class="notranslate"> by busy_time </span> with 12 seconds left before re-enabled.</td></tr></tbody></table> <p><strong>Display fields:</strong></p> <ul><li><span class="notranslate"> cpu </span> - number in %, shows <span class="notranslate"> cpu </span> usage by user
<ul><li><span class="notranslate"> read </span> - number of bytes (kbytes, mbytes, gbytes) which user reads per second</li> <li><span class="notranslate"> write </span> - number of bytes (kbytes, mbytes, gbytes) write user reads per second</li></ul></li></ul> <p>Accounts highlighted in <em>red</em> color means that the account is restricted.<br>
Accounts highlighted in <em>blue</em> color are in cool down period</p> <p>Command line parameters of <span class="notranslate"> dbtop </span> utility:<br> <span class="notranslate"> -r - dbtop </span> refresh period in seconds ( <span class="notranslate"> dbtop -r12 </span> )</p> <h4 id="dbctl"><a href="#dbctl" class="header-anchor">#</a> dbctl</h4> <p>usage: <span class="notranslate"> dbctl command [parameter] [options] </span></p> <p><strong>Commands:</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> set </span></td> <td>set parameters for a <span class="notranslate"> db_governor </span></td></tr> <tr><td><span class="notranslate"> list </span></td> <td>list users &amp; their limits. It will list all users who had been active since <span class="notranslate"> Governor </span> restart,  as well as those for who explicit limits were set</td></tr> <tr><td><span class="notranslate"> list-restricted </span></td> <td>list restricted customers, with their limits, restriction reason, and time period they will still be restricted</td></tr> <tr><td><span class="notranslate"> ignore </span></td> <td>ignore particular user</td></tr> <tr><td><span class="notranslate"> watch </span></td> <td>start observing particular user again</td></tr> <tr><td><span class="notranslate"> delete </span></td> <td>remove limits for user/use defaults</td></tr> <tr><td><span class="notranslate"> restrict </span></td> <td>restrict user using lowest level (or if <span class="notranslate"> --level </span> specified, using the specified level)</td></tr> <tr><td><span class="notranslate"> unrestrict </span></td> <td>unrestrict username (configuration file remains unchanged)</td></tr> <tr><td><span class="notranslate"> unrestrict-all </span></td> <td>unrestrict all restricted users (configuration file remains unchanged)</td></tr> <tr><td><span class="notranslate"> --help </span></td> <td>show this message</td></tr> <tr><td><span class="notranslate"> --version </span></td> <td>version number</td></tr> <tr><td><span class="notranslate"> --lve-mode </span></td> <td>set <span class="notranslate"> DB Governor </span> mode of operation. Available values: <span class="notranslate"> off/abusers/all/single/on </span></td></tr> <tr><td></td> <td><span class="notranslate"> off </span> - monitor only, don't throttle</td></tr> <tr><td></td> <td><span class="notranslate"> abusers </span> - when user reaches the limit, put user's queries into LVE for that user (experimental)</td></tr> <tr><td></td> <td><span class="notranslate"> all </span> - user's queries always run inside LVE for that user (experimental)</td></tr> <tr><td></td> <td><span class="notranslate"> single </span> - single LVE for all abusers.</td></tr> <tr><td></td> <td><span class="notranslate"> on </span> - same as <span class="notranslate"> single </span> (deprecated)</td></tr></tbody></table> <p><strong>Parameters</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> default </span></td> <td>set default parameter</td></tr> <tr><td><span class="notranslate"> usrename </span></td> <td>set parameter for user</td></tr></tbody></table> <p><strong>Options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> --cpu=N </span></td> <td>limit <span class="notranslate"> CPU </span> (pct) usage</td></tr> <tr><td><span class="notranslate"> --read=N </span></td> <td>limit <span class="notranslate"> READ </span> (MB/s) usage</td></tr> <tr><td><span class="notranslate"> --write=N </span></td> <td>limit <span class="notranslate"> WRITE </span> (MB/s) usage</td></tr> <tr><td><span class="notranslate"> --level=N </span></td> <td>level (1,2,3 or 4) specified (deprecated) - this option is available only for period mode:</td></tr></tbody></table> <p><span class="notranslate"> &lt;restrict_mode use=&quot;period&quot;/&gt; </span> (see <a href="/cloudlinux_os_components/#configuration-and-operation">Configuration</a>)</p> <p>The default mode is &quot; <span class="notranslate"> limit </span> &quot; - when a user hits limits, the account will be marked as restricted and if the user does not hit the limit again during &quot; <span class="notranslate"> unlimit=1m </span> &quot; account will be unrestricted. This mode doesn't have any additional levels/penalties.<br> <span class="notranslate"> &lt;restrict_mode use=&quot;limit&quot; unlimit=&quot;1m&quot;/&gt; </span></p> <p>Changing the <span class="notranslate"> &quot;unlimit&quot; </span> can be done only via the configuration file (see <a href="/cloudlinux_os_components/#configuration-and-operation">Configuration</a>).</p> <p><span class="notranslate"> --slow=N: </span> limit time (in seconds) for long running <span class="notranslate"> SELECT </span> queries</p> <p>Options for parameter <span class="notranslate"><code>list</code></span>:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><code>--kb</code></td> <td>show limits in Kbytes no pretty print</td></tr> <tr><td><code>--bb</code></td> <td>show limits in bytes no pretty print</td></tr> <tr><td><code>--mb</code></td> <td>show limits in Mbytes no pretty print</td></tr></tbody></table> <p>Examples:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ dbctl set test2 --cpu=150,100,70,50 --read=2048,1500,1000,800
</code></pre></div></div> <p>sets individual limits for <span class="notranslate"> cpu (current, short, middle </span> period) and <span class="notranslate"> read (current, short, middle, long </span> periods) for user <span class="notranslate"> test2 </span></p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ dbctl set default --cpu=70,60,50,40
</code></pre></div></div> <p>changes default <span class="notranslate"> cpu </span> limits.</p> <p>All new limits will be applied immediately</p> <p>To unrestrict user:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ dbctl unrestrict username
</code></pre></div></div> <p>To unrestrict all users:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ dbctl unrestrict-all 
</code></pre></div></div> <p>To restrict user:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ dbctl restrict dbgov
</code></pre></div></div> <p>To restrict user to level 2 restriction:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ dbctl restrict dbgov --level=2
</code></pre></div></div> <p>To make <span class="notranslate"> Governor </span> to ignore user:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ dbctl ignore username
</code></pre></div></div> <p>Delete user's limits, and use defaults instead:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$ dbctl delete username
</code></pre></div></div> <p>Show limits as bytes:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>$dbctl list --bb
</code></pre></div></div> <h4 id="lveinfo-dbgov"><a href="#lveinfo-dbgov" class="header-anchor">#</a> lveinfo --dbgov</h4> <p><span class="notranslate"> lveinfo </span> tool is a part of <span class="notranslate"> lve-stats </span> package. It was extended to collect historical information about MySQL usage.</p> <p><span class="notranslate"> $ lveinfo --dbgov --help </span></p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>Displays information about historical Db Governor usage
Usage: lveinfo [OPTIONS] 

-h --help              : this help run report from date and time in YYYY-MM-DD HH:MM format if not present last 10 mscreen
-v, --version          : version number
-f, --from=            : inutes are assumed
-t, --to=              : run report up to date and time in YYYY-MM-DD HH:MM format
      if not present, reports results up to now
	  --period=          : time period
      usage            : specify minutes with m,  h - hours, days with d, and values:
	  : today, yesterday; 5m - last 5 minutes, 4h -- last four hours,
	  : 2d - last 2 days, as well as today
-o, --order-by=        : orders results by one of the following:
      con              : average connections
      cpu              : average CPU usage
      read             : average READ usage
      write            : average WRITE usage
-u, --user=            : mysql username
-l, --limit=           : max number of results to display, 10 by default
-c, --csv              : display output in CSV format
-b, --format           : show only specific fields into output
      available values:
      ts               : timestamp records
      username         : user name
      con              : average connections
      cpu              : average CPU usage
      read             : average READ usage
      write            : average WRITE usage
      lcpu             : CPU limit
      lread            : READ limit
      lwrite           : WRITE limit
	  --show-all         : full output (show all limits); brief output is default 
	  
-o, --order-by=        : orders results by one of the following:
      ts               : timestamp records
      username         : user name
      max_sim_req      : max simultaneous requests
      sum_cpu          : average CPU usage
      sum_write        : average WRITE usage
      sum_read         : average READ usage
      num_of_rest      : number of restricts
      limit_cpu_end    : limit CPU on period end
      limit_read_end   : limit READ on period end
      limit_write_end  : limit WRITE on period end
	  --id=              : LVE id -- will display record only for that LVE id
	  -u, --user=            : Use username instead of LVE id, and show only record for that user
	  -l, --limit=           : max number of results to display, 10 by default
	  -c, --csv              : display output in CSV format
	  -b, --by-usage         : show LVEs with usage (averaged or max) within 90% percent of the limit
      available values:
      sum_cpu          : average CPU usage
      sum_write        : average WRITE usage
      sum_read         : average READ usage
      num_of_rest      : number of restricts
      limit_cpu_end    : limit CPU on period end
      limit_read_end   : limit READ on period end
      limit_write_end  : limit WRITE on period end
	  --show-all         : full output (show all limits); brief output is default 
	  
	  TS                     : timestamp records
	  USER                   : user name
	  CPU                    : average CPU usage
	  READ                   : average READ usage
	  WRITE                  : average WRITE usage
	  CON                    : average connections
	  lCPU                   : CPU limit
	  lREAD                  : READ limit
	  lWRITE                 : WRITE limit
	  RESTRICT               : C-cpu restrict, R- read restrict, W- write restrict
</code></pre></div></div> <p>Example:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>root@cpanel1 [~/ttttt]# lveinfo --dbgov --user=dbgov --period=1d --limit=10
TS                   USER   CPU     READ    WRITE   CON     lCPU    lREAD   lWRITE   RESTRICT  
2012-12-06 11:14:49  dbgov   9       0.0     0.0     1       90      1000    1000                
2012-12-06 11:13:49  dbgov   9       0.0     0.0     1       90      1000    1000                
2012-12-06 11:12:49  dbgov   9       0.0     0.0     1       90      1000    1000                
2012-12-06 11:11:49  dbgov   9       0.0     0.0     1       90      1000    1000                
2012-12-06 11:10:49  dbgov   9       0.0     0.0     1       90      1000    1000                
2012-12-06 11:09:49  dbgov   90      0.0     0.0     1       90      1000    1000     C          
2012-12-06 11:08:49  dbgov   0       0.0     0.0     0       400     1000    1000                
2012-12-06 11:07:49  dbgov   0       0.0     0.0     0       400     1000    1000                
2012-12-06 11:06:49  dbgov   0       0.0     0.0     0       400     1000    1000   
</code></pre></div></div> <h4 id="dbgovchart-2"><a href="#dbgovchart-2" class="header-anchor">#</a> dbgovchart</h4> <p><span class="notranslate"> dbgovchart </span> is analog of <span class="notranslate"> lvechart </span> tool to create charts representing customer's to MySQL usage</p> <p>Usage: <span class="notranslate"><code>/usr/sbin/dbgovchart [OPTIONS]</code></span></p> <p>Acceptable options are:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>--help      This help screen
--version   Version number
--from=     Run report from date and time in YYYY-MM-DD HH:MM format
            if not present last 10 minutes are assumed
--to=       Run report up to date and time in YYYY-MM-DD HH:MM format
            if not present, reports results up to now
--period=   Time period
            specify minutes with m,  h - hours, days with d, and values:
            today, yesterday
            5m - last 5 minutes, 4h - last four hours, 2d - last 2 days,
            as well as today
--user=     mysql username
--output=   Filename to save chart as, if not present, output will be sent to STDOUT
--show-all  Show all graphs (by default shows graphs for which limits are set)
</code></pre></div></div> <p>Charts examples:</p> <p><img src="/images/1111_2.png" alt=""></p> <h2 id="php-selector"><a href="#php-selector" class="header-anchor">#</a> PHP Selector</h2> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> /usr/bin/alt-php-mysql-reconfigure.py </span></td> <td>Reconfigures <span class="notranslate"> alt-php </span> extensions to use correct MySQL library, based on the one installed in the system.</td></tr></tbody></table> <h4 id="selectorctl"><a href="#selectorctl" class="header-anchor">#</a> selectorctl</h4> <p><span class="notranslate"><code>selectorctl</code></span> is a new tool that replaces <span class="notranslate"><code>cl-selector</code></span> (which is deprecated and should not be used anymore) and <span class="notranslate"><code>piniset</code></span>. It is available starting with <strong>CageFS 5.1.3</strong>.</p> <p>All new features will be implemented as part of <span class="notranslate"><code>selectorctl</code></span>.</p> <p><strong>Common options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> --interpreter (-i) </span> :</td> <td>chooses the interpreter to work with. Currently only PHP is supported. If omitted, <span class="notranslate"> --interpreter=php </span> is implied.</td></tr> <tr><td><span class="notranslate"> --version (-v) </span> :</td> <td>specifies alternatives version to work with</td></tr> <tr><td><span class="notranslate"> --user (-u) </span> :</td> <td>specifies user to take action upon.</td></tr> <tr><td><span class="notranslate"> --show-native-version (-V) </span> :</td> <td>prints the version of native interpreter</td></tr></tbody></table> <p><strong>Global options</strong></p> <p>The global options modify settings in <span class="notranslate"> /etc/cl.selector/defaults.cfg </span> file.</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> --list (-l) </span> :</td> <td>lists all available alternatives for an interpreter. For instance on server with Alt-PHP installed, it produces the following output. Columns are: short alternative version, full alternative version and path to php-cgi binary.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --list <br>5.2 5.2.17 /opt/alt/php52/usr/bin/php-cgi <br>5.3 5.3.28 /opt/alt/php53/usr/bin/php-cgi <br>5.4 5.4.23 /opt/alt/php54/usr/bin/php-cgi <br>5.5 5.5.7 /opt/alt/php55/usr/bin/php-cgi </span></td></tr> <tr><td><span class="notranslate"> --summary (-S) </span> :</td> <td>prints alternatives state summary. Output format: alternative version, state ('e' for 'enabled', '-' otherwise), chosen as default one or not ('d' for 'default', '-' otherwise). For example:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --summary <br>5.2 e - <br>5.3 e - <br>5.4 e - <br>5.5 e - <br>native e d </span></td></tr> <tr><td></td> <td>if used with <span class="notranslate"><code>--show-native-version</code></span> displays version for native interpreter:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --summary --show-native-version <br>5.2 e - <br>5.3 e - <br>5.4 e - <br>5.5 e - <br>native(5.3) e d </span></td></tr> <tr><td><span class="notranslate"> --current (-C) </span> :</td> <td>prints currently globally selected default version (it is stored in <span class="notranslate"><em>/etc/cl.selector/defaults.cfg</em></span> file):</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --current <br>native native /usr/bin/php </span></td></tr> <tr><td></td> <td>If used with <span class="notranslate"><code>--show-native-version</code></span> , native interpreter version is displayed as well:</td></tr> <tr><td></td> <td><span class="notranslate"> --current --show-native-version <br>native(5.3) native(5.3.19) /usr/bin/php </span></td></tr> <tr><td><span class="notranslate"> --set-current (-B): </span></td> <td>sets specified version as globally default one (in <span class="notranslate"><em>/etc/cl.selector/defaults.cfg</em></span> file). For example, to set current default version of PHP to 5.4, use:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --set-current=5.4 </span></td></tr> <tr><td><span class="notranslate"> --disable-alternative (-N): </span></td> <td>adds <span class="notranslate"> state=disabled </span> option to alternative section. With it a corresponding alternative gets removed from user alternatives selection list. For instance to disable PHP 5.2, run:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --disable-alternative=5.2 </span></td></tr> <tr><td><span class="notranslate"> --enable-alternative (-Y): </span></td> <td>Enables alternative version, removes <span class="notranslate"> state=disabled </span> option, if present, from alternative section. For example to enable PHP 5.2:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --enable-alternative=5.2 </span></td></tr> <tr><td><span class="notranslate"> --enable-extensions (-E): </span></td> <td>enables extensions for particular PHP version by adding comma-separated list of extensions of modules for alternative in <span class="notranslate"><em>/etc/cl.selector/defaults.cfg</em></span> . Requires <span class="notranslate"> --version </span> option. For example:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --enable-extensions=pdo,phar --version=5.2 </span></td></tr> <tr><td><span class="notranslate"> --disable-extensions (-D): </span></td> <td>removes extensions for a particular PHP version. Comma-separated list of extensions will be removed from <span class="notranslate"> /etc/cl.selector/defaults.cfg </span> . Requires <span class="notranslate"> --version </span> . Example:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --disable-extensions=pdo,phar --version=5.2 </span></td></tr> <tr><td><span class="notranslate"> --replace-extensions (-R): </span></td> <td>replaces all extensions for particular PHP version to the list of comma separated extensions. Requires <span class="notranslate"><code>--version</code>  option </span> . Example:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --replace-extensions=pdo,phar --version=5.2 </span></td></tr> <tr><td><span class="notranslate"> --list-extensions (-G): </span></td> <td>lists extensions for an alternative for a particular version. Requires <span class="notranslate"> --version </span> . Example:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --list-extensions --version=5.3 <br>~ xml <br>- xmlreader <br>- xmlrpc <br>- xmlwriter <br>- xrange <br>+ xsl </span></td></tr> <tr><td></td> <td>Plus sign (+) stands for 'enabled', minus (–) for 'disabled', tilde (~) means compiled into interpreter. Enabled and disabled state relates to presence in <span class="notranslate"><em>/etc/cl.selector/defaults.cfg</em></span> file.</td></tr></tbody></table> <p><strong>End user options</strong></p> <p>All end user settings are contained in individual user's alt_php.ini files and controlled using selectorctl command.</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> --user-summary (-s): </span></td> <td>prints user alternatives state summary. Example:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --user-summary --user=user1 <br>5.2 e - - <br>5.3 e - - <br>5.4 e - - <br>5.5 e - - <br>native e d s </span></td></tr> <tr><td></td> <td>Columns are: alternative version, state ('e' for 'enabled', '-' otherwise), chosen as default one or not('d' for 'default', '-' otherwise), selected as user default one or not ('s' for 'selected', '-' otherwise). If used with <span class="notranslate"><code>--show-native-version</code></span> , version for native interpreter is shown in parenthesis:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --user-summary --user=user1 --show-native-version <br>5.2 e - - <br>5.3 e - - <br>5.4 e - - <br>5.5 e - - <br>native(5.3) e d s </span></td></tr> <tr><td></td> <td><span class="notranslate"><code>--user</code></span> option is required.</td></tr> <tr><td><span class="notranslate"> --current (-c): </span></td> <td>prints currently globally selected default version (in <span class="notranslate"><em>/etc/cl.selector/defaults.cfg</em></span> file):</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --current <br>5.3 5.3.28 /opt/alt/php53/usr/bin/php-cgi </span></td></tr> <tr><td></td> <td>If used with <span class="notranslate"><code>--show-native-version</code></span> to display native version:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --user-current --user=user1 <br>5.3 5.3.28 /opt/alt/php53/usr/bin/php-cgi </span></td></tr> <tr><td></td> <td><span class="notranslate"><code>--user</code></span> option is required.</td></tr> <tr><td><span class="notranslate"> --set-user-current (-b): </span></td> <td>sets specified version as the one to use for this end user:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --set-user-current=5.4 --user=user1 </span></td></tr> <tr><td></td> <td>changes user symlinks for the PHP interpreter to point to alternative 5.4.</td></tr> <tr><td></td> <td><span class="notranslate"> --user </span> option is required.</td></tr> <tr><td><span class="notranslate"> --enable-user-extensions (-e): </span></td> <td>Enables comma-separated list of extensions for the user user. Information is saved to <span class="notranslate"><em>alt_php.ini</em></span> file. Requires <span class="notranslate"><code>--version</code></span> and <span class="notranslate"><code>--user</code></span> options.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --enable-user-extensions=pdo,phar --version=5.2 --user=user1 </span></td></tr> <tr><td><span class="notranslate"> --disable-user-extensions (-d): </span></td> <td>Disables extensions provided as comma-separated list. Requires <span class="notranslate"><code>--version</code></span> and <span class="notranslate"><code>--user</code></span> options.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --disable-user-extensions=pdo,phar --version=5.2 --user=user1 </span></td></tr> <tr><td><span class="notranslate"> --replace-user-extensions (-r): </span></td> <td>Replaces extensions with a provided comma-separated list of extensions Requires <span class="notranslate"><code>--version</code></span> and <span class="notranslate"><code>--user</code></span> options:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --replace-user-extensions=pdo,phar --version=5.2 --user=user1 </span></td></tr> <tr><td><span class="notranslate"> --reset-user-extensions (-t): </span></td> <td>Resets extensions for end user to default list of extensions as defined in <span class="notranslate"> default.cfg </span> . Requires <span class="notranslate"><code>--version</code></span> and <span class="notranslate"><code>--user</code></span> options.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --reset-user-extensions --version=5.2 --user=user1 </span></td></tr> <tr><td><span class="notranslate"> --list-user-extensions (-g): </span></td> <td>lists enabled user extensions for an alternative. Requires <span class="notranslate"><code>--version</code></span> and <span class="notranslate"><code>--user</code></span> options.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --list-user-extensions --version=5.3 --user=user1 <br>xml <br>xmlreader <br>xmlrpc </span></td></tr> <tr><td></td> <td>if <span class="notranslate"><code>--all</code></span> option present, command will list all alternatives extensions marked enabled or disabled for given user. For example:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --list-user-extensions --version=5.3 --user=user1 --all <br>- xmlreader <br>- xmlrpc <br>- xmlwriter <br>- xrange <br>+ xsl </span></td></tr> <tr><td></td> <td>Plus sign (+) stands for 'enabled', minus (–) stands for 'disabled'. Enabled and disabled state relates to presence or absence of corresponding extensions in user <span class="notranslate"><em>alt_php.ini</em></span> file.</td></tr> <tr><td><span class="notranslate"> --add-options (-k): </span></td> <td>adds options (as in <span class="notranslate"><em>php.ini</em></span> ) to user <span class="notranslate"><em>alt_php.ini</em></span> file. For example:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --add-options=log_errors:on,display_errors:on --version=5.2 --user=user1 </span></td></tr> <tr><td></td> <td>adds <span class="notranslate"><code>log_error</code></span> and <span class="notranslate"><code>display_errors</code></span> options with values <span class="notranslate"> 'on' </span> to user <span class="notranslate"><em>alt_php.ini</em></span> file overwriting default values for a user. Requires <span class="notranslate"><code>--version</code></span> and <span class="notranslate"><code>--user</code></span> options.</td></tr> <tr><td><span class="notranslate"> --replace-options (-m): </span></td> <td>replaces all options in user <span class="notranslate"><em>alt_php.ini</em></span> file with specified ones. Requires <span class="notranslate"><code>--version</code></span> and <span class="notranslate"><code>--user</code></span> options.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --replace-options=log_errors:on,display_errors:on --version=5.2 --user=user1 </span></td></tr> <tr><td><span class="notranslate"> --delete-options (-x): </span></td> <td>removes custom options from user <span class="notranslate"><em>alt_php.ini</em></span> file. Requires <span class="notranslate"><code>--version</code></span> and <span class="notranslate"><code>--user</code></span> options.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --delete-options=log_errors,display_errors --version=5.2 --user=user1 </span></td></tr> <tr><td><span class="notranslate"> --print-options (-P): </span></td> <td>print options from <span class="notranslate"><em>/etc/cl.selector/php.conf</em></span> file with default values or ones overwritten in user's <span class="notranslate"><em>alt_php.ini</em></span> file.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --print-options --version=5.2 --user=user1 <br>TITLE:allow_url_fopen <br>DEFAULT:On <br>COMMENT:Allows PHP file functions to retrieve data from remote <br>locations over FTP or HTTP. This option is a great security risk, <br>thus do not turn it on without necessity. <br>TYPE:bool <br>... </span></td></tr> <tr><td></td> <td>Requires <span class="notranslate"><code>--user</code></span> option. <span class="notranslate"><code>--version</code></span> option is optional. When <span class="notranslate"><code>--version</code></span> is omitted, options for current selected version will be printed. By default outputs as plain test. If <span class="notranslate"><code>--json</code> ,  <code>--csv</code> ,  <code>--perl</code></span> is specified, outputs data in corresponding format. For example, with <span class="notranslate"><code>--perl</code></span> option, the output is perl hash structure that can be evaluated.</td></tr> <tr><td><span class="notranslate"> --reset-options (-z): </span></td> <td>removes custom options from <span class="notranslate"><em>alt_php.ini</em></span> files for ALL users and versions. Backup files in home folders are cleared.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --reset-options </span></td></tr> <tr><td></td> <td>The ranges of affected customers or versions can be narrowed with <span class="notranslate"><code>--version</code></span> or <span class="notranslate"><code>--user</code>  options </span> :</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --reset-options --user=user1,user2 --version=5.3,5.4 </span></td></tr> <tr><td><span class="notranslate"> --list-users (-L): </span></td> <td>list users that use particular version of interpreter, specified with <span class="notranslate"><code>--version</code></span> option. For example, to see all users that use PHP version 5.3:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --list-users --version=5.3 </span></td></tr> <tr><td><span class="notranslate"> --change-to-version (-T): </span></td> <td>changes all (or particular user) from one interpreter version to another.</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --change-to-version=5.2 --version=5.3 </span></td></tr></tbody></table> <p><strong>Additional options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> --base64 (-Q) </span></td> <td>Sometimes PHP options values can contain commas and other symbols that break command line formatting. In such a case convert a <span class="notranslate"> key:value </span> pair into <span class="notranslate"> base64 </span> and pass it as value for option-related arguments. For example, to add <span class="notranslate"> disable_functions=exec,popen,system </span> and <span class="notranslate"> display_errors=on </span> to user options, do the following:</td></tr> <tr><td></td> <td><span class="notranslate"> $ selectorctl --add-options=<code>echo disable_functions:exec,popen,system|base64 -w 0</code>,<code>echo display_errors:on|base64 -w 0</code> --version=5.2 --user=user1 --base64 </span></td></tr> <tr><td></td> <td>Option <span class="notranslate"><code>-w 0</code></span> of <span class="notranslate"> base64 </span> executable stands for <span class="notranslate"> 'disable wrapping of lines' </span> . Without it <span class="notranslate"> base64 </span> output will break the command.</td></tr> <tr><td><span class="notranslate"> --quiet </span></td> <td>makes <span class="notranslate"> selectorctl </span> continue when it encounter option not found in <span class="notranslate"><em>php.conf</em></span>. Without it <span class="notranslate"> selectorctl </span> exits with error.</td></tr></tbody></table> <h2 id="python-selector"><a href="#python-selector" class="header-anchor">#</a> Python Selector</h2> <h3 id="new-python-selector"><a href="#new-python-selector" class="header-anchor">#</a> New Python Selector</h3> <div class="warning custom-block"><p class="custom-block-title">Warning!</p><p>selectorctl command line tool is not supported in the new Python Selector. You can use cloudlinux-selector command line tool instead.</p></div><p>Below, there is a list of commands hoster and end user can run in a command line.</p> <h4 id="hoster"><a href="#hoster" class="header-anchor">#</a> Hoster</h4> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>When running user command as root, please use <span class="notranslate"><code>--user</code></span> option.</p></div><ul><li><p>Get all Python-related information: default version, a list of supported versions, status of Python Selector, a list of users, their applications, etc:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector [get] [--json] --interpreter python
</code></pre></div></div> <p>JSON output for <span class="notranslate"><code>get</code></span> command:</p></li></ul> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
  &quot;selector_enabled&quot;: true | false, 
  &quot;default_version&quot;: &quot;2.7.15&quot;, 
  &quot;result&quot;: &quot;success&quot;, 
  &quot;timestamp&quot;: 1508667174.220027,
  “cache_status”: “ready”,         //  or “updating” during automatic yum cache rebuild
  &quot;available_versions&quot;: {   //  begin of  “versions”
      &quot;2.7.15&quot; : {   //   begin of version &quot;2.7.15&quot;
          &quot;status&quot;: &quot;enabled&quot;,  //  enabled, disabled, not_installed, installing, removing, locked
          “base_dir”: “/opt/alt/alt-python27”   //  empty when version is not installed
          “users”: {   //  begin of  “users”
              “user1”: {   //  begin of “user1”
	“homedir”: “/home/user1”,		
                 “applications”: {    //  begin of “applications”
                     “apps_dir/app1” : {   //   begin of application “apps_dir/app1”
                         “domain”: “cltest1.com”,
                         “app_uri”: “apps/my-app1”,
                         “startup_file” : “run.py”,
                         “entry_point” : “app”,
                         “app_status” : “started”,   // ‘started’ or ‘stopped’
                         “config_files” : [
                             “requirements.txt”,
                             “requirements-migration.txt”
                         ],
                         “env_vars” : {
                             “var1” : “value1”,
                             “var2” : “value2”
                         },
                     },   // end of application “apps_dir/app1”
                     “apps_dir/app2” : {    //   begin of application “apps_dir/app2”
                          &lt;&lt; data for application “apps_dir/app2”  (same structure as for application “apps_dir/app1” above) &gt;&gt;
                     },   //  end of application “apps_dir/app2”
                 },   //  end of “applications”
              },   //  end of “user1”
              “user2”: {   //  begin of “user2”
                  &lt;&lt; data for user “user2”  (same structure as for “user1” above) &gt;&gt;
              },   //  end of “user2”
          },   // end of “users”
        },    //  end of version “2.7.15”
      &quot;8.21.5&quot; : {   //   begin of version &quot;3.3.7&quot;
            &lt;&lt; data for version &quot;3.3.7&quot;  (same structure as for version “2.7.15” above) &gt;&gt;
        },    //  end of version “3.3.7”
    },    //  end of “versions”
}   //   end of json
</code></pre></div></div> <ul><li><p>Set default version, supported versions, and status of Python Selector:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set [--json] --interpreter python (--selector-status &lt;enabled,disabled&gt; | --default-version &lt;str&gt; | --supported-versions &lt;str&gt;)
</code></pre></div></div></li></ul> <h4 id="examples-3"><a href="#examples-3" class="header-anchor">#</a> <em>Examples</em></h4> <ol><li><p>Enable Python Selector:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter python --selector-status enabled
</code></pre></div></div></li> <li><p>Set default Python Selector version as 3.3:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter python --default-version 3.3
</code></pre></div></div></li> <li><p>Set supported Python Selector version as 3.3:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter python --supported-versions='{&quot;2.7&quot;: false, &quot;3.3&quot;: true}'
</code></pre></div></div></li> <li><p>Install a specific Python version:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector install-version --json --interpreter python --version 2.7
</code></pre></div></div></li> <li><p>Uninstall a specific Python version:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector uninstall-version --json --interpreter python --version 2.7
</code></pre></div></div></li> <li><p>Enable a specific Python version:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector enable-version --json --interpreter python --version 2.7
</code></pre></div></div></li> <li><p>Disable a specific Python version:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector disable-version --json --interpreter python --version 2.7
</code></pre></div></div></li></ol> <ul><li>Change version for an application:
<ul><li><p>For a specific application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set [--json] --interpreter python --user &lt;str&gt; --app-root &lt;str&gt; --new-version &lt;str&gt;
</code></pre></div></div></li> <li><p>For all applications that use specific Python version:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector change-version-multiple --json --interpreter python --from-version &lt;str&gt; --new-version &lt;str&gt;
</code></pre></div></div></li> <li><p>For multiple applications:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector change-version-multiple --json --interpreter python --data  &lt;pairs user:app-root as json&gt; --new-version &lt;str&gt;
</code></pre></div></div></li></ul></li></ul> <h4 id="examples-4"><a href="#examples-4" class="header-anchor">#</a> <em>Examples</em></h4> <ol><li><p>Change version for a specific application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter python --user user1 --app-root apps_dir/app1 --new-version 2.7
</code></pre></div></div></li> <li><p>Change version for all applications that use version 2.7.15 to version 3.3.5:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector change-version-multiple --json --interpreter python --from-version 2.7 --new-version 3.3
</code></pre></div></div></li> <li><p>Change version of multiple application(s) and/or multiple users:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector change-version-multiple --json --interpreter python --data &lt;pairs user:app-root as json&gt; --new-version &lt;str&gt;
</code></pre></div></div></li></ol> <p><strong>Example</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector change-version-multiple --json --interpreter python --data [ {“user”: “user1”, “app_root”: “apps/app1”}, {“user”: “user2”, “app_root”: “apps/app1”} ]  --new-version 2.7
</code></pre></div></div> <p>Common output for all <span class="notranslate"><code>set</code></span> commands:</p> <p><strong>in case of success:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
  &quot;result&quot;: &quot;success&quot;, 
  &quot;timestamp&quot;: 1508666792.863358
}
</code></pre></div></div> <p><strong>in case of error:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
  &quot;result&quot;: &quot;Some error message&quot;,
  &quot;details&quot; : &quot;Traceback: ...&quot; ,
  &quot;context&quot;: {},
  &quot;timestamp&quot;: 1508666792.863358
}
</code></pre></div></div> <p><strong>in case of warning:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
  &quot;result&quot;: &quot;success&quot;,
  &quot;warning&quot; : &quot;Some warning message&quot; ,
  &quot;context&quot;: {},
  &quot;timestamp&quot;: 1508666792.863358
}
</code></pre></div></div> <h4 id="end-user"><a href="#end-user" class="header-anchor">#</a> End user</h4> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>To start all users CLI commands use <span class="notranslate"><code>cagefs_enter</code></span> command:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/bin/cagefs_enter.proxied /usr/sbin/cloudlinux-selector --json &lt;other parameters&gt;
</code></pre></div></div></div><ul><li><p>Get config file for the user application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector read-config [--json] --interpreter python  [--user &lt;str&gt; | --domain &lt;str&gt;] --app-root &lt;str&gt; --config-file &lt;name&gt;
</code></pre></div></div> <p><strong>JSON output:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
  	&quot;result&quot;: &quot;success&quot;, 
 &quot;timestamp&quot;: 1508666792.863358
 	 “data”: “content of config file as Base64 encoded string”
}
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector read-config --json --interpreter python  --user user1 --app-root app_dir/app1 --config-file requirements.txt
</code></pre></div></div></li> <li><p>Save config file for user application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector save-config [--json] --interpreter python  [--user &lt;str&gt; | --domain &lt;str&gt;] --app-root &lt;str&gt; --config-file &lt;path&gt; --content &lt;content of config file as Base64 encoded string&gt;
</code></pre></div></div> <p><strong>JSON output</strong> (the same as for all <span class="notranslate"><code>set</code></span> commands):</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
  	&quot;result&quot;: &quot;success&quot;, 
&quot;timestamp&quot;: 1508666792.863358
}
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector save-config --json --interpreter python  --user user1 --app-root app_dir/app1 --config-file requirements.txt  --content VGh1ICAyIE5vdiAxMDo0MzoxMiBFRFQgMjAxNwo=
</code></pre></div></div> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>An output for all commands below is like in Hoster’s CLI, but filtered out by username.</p></div></li> <li><p>Get a list of applications for a specific user:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector [get] [--json] --interpreter python  [--user &lt;str&gt; | --domain &lt;str&gt;]
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector get --json --interpreter python  --user user1
</code></pre></div></div></li> <li><p>Create user application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector create [--json] --interpreter python  [--user &lt;str&gt; | --domain &lt;str&gt;]  --app-root &lt;str&gt; --app-uri &lt;str&gt; [--version &lt;str&gt;]  [--startup-file &lt;str&gt;] [--entry-point &lt;str&gt;] [--env-vars &lt;json string&gt;]
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector create --json --interpreter python --app-root my_apps/app1 --domain xyz.com --app-uri apps/app1 --version 2.7 --startup-file run.py --entry-point app
</code></pre></div></div></li> <li><p>Start, restart, stop, and destroy user application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector (start | restart | stop | destroy) [--json] --interpreter python [--user &lt;str&gt; | --domain &lt;str&gt;] --app-root &lt;str&gt;
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector start --json --interpreter python --user user1 --app-root my_apps/app1
</code></pre></div></div></li> <li><p>Set a custom path for Passenger log files:</p> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector --json create --interpreter=python --version=3.3 --user=cltest1 --app-root=p_app2 --app-uri=p_app2_uri --passenger-log-file=/home/cltest1/passenger.log
</code></pre></div></div></li> <li><p>Remove a custom path for Passenger log files:</p> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector --json set --interpreter=python --user=cltest1 --app-root=p_app1 --passenger-log-file=&quot;&quot;
</code></pre></div></div></li> <li><p>Change properties for an application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set [--json] --interpreter python  [--user &lt;str&gt; | --domain &lt;str&gt;] --app-root &lt;str&gt; [--app-mode &lt;str&gt;]  [--new-app-root &lt;str&gt;]  [--new-domain &lt;str&gt;]  [--new-app-uri &lt;str&gt;]  [--new-version &lt;str&gt;]  [--startup-file &lt;str&gt;] [--entry-point &lt;str&gt;] [--env-vars &lt;json string&gt;] [--config-files &lt;str&gt;]
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter python  --user user1 --app-root my_apps/app1 --app-mode production  --new-app-root new_apps/new_app1  --new-domain new.xyz.com --new-app-uri new_apps/app1  --new-version 8  --startup-file new_app.js --env-vars { “var1” : “value1”, “var2” : “value2” }  --config-files requirements.txt,reqs.txt
</code></pre></div></div></li> <li><p>Run <span class="notranslate"><code>PIP install</code></span> for user application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector install-modules [--json] --interpreter python  [--user &lt;str&gt; | --domain &lt;str&gt;] --app-root &lt;str&gt; --requirements-file &lt;path&gt;
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector install-modules --json --interpreter python --user user1 --app-root my_apps/app --requirements-file requirements.txt
</code></pre></div></div></li> <li><p>Optional: install or uninstall Python packages for user application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector (install-modules|uninstall-modules) [--json] --interpreter python  [--user &lt;str&gt; | --domain &lt;str&gt;] --app-root &lt;str&gt; --modules &lt;module1[,module2...]&gt;
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector install-modules --json --interpreter python --user user1 --app-root my_apps/app --modules json-annotate,termcolor
</code></pre></div></div></li> <li><p>Optional: run Python script in virtual environment of user application, arguments <span class="notranslate"><code>&lt;args&gt;</code></span> are passed to the script:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector run-script [--json] --interpreter python  [--user &lt;str | --domain &lt;str&gt;&gt;] --app-root &lt;str&gt; --script-name &lt;str&gt; [-- &lt;args&gt;...]
</code></pre></div></div> <p><strong>Example:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector run-script --json --interpreter python --user user1 --app-root my_apps/app --script-name test_script -- --script_opt1 --script_opt2 script_arg1 script_arg2
</code></pre></div></div> <p><strong>JSON output:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
  	&quot;result&quot;: &quot;success&quot;, 
 	&quot;timestamp&quot;: 1508666792.863358
   	“data”: “script output as Base64 encoded string”
}
</code></pre></div></div></li></ul> <h3 id="old-python-selector"><a href="#old-python-selector" class="header-anchor">#</a> Old Python Selector</h3> <div class="warning custom-block"><p class="custom-block-title">Warning!</p><p>selectorctl command line tool is not supported in the new Python Selector. You can use cloudlinux-selector command line tool instead.</p></div><p>To create application run:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python --version=VERSION [--user=USER] [--print-summary] [--json] --create-webapp &lt;FOLDER_NAME&gt; &lt;URI&gt;
</code></pre></div></div> <p>To delete application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--print-summary] [--json] --destroy-webapp &lt;FOLDER_NAME&gt;
</code></pre></div></div> <p>To change application folder name:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--print-summary] [--json] --relocate-webapp &lt;FOLDER_NAME&gt; &lt;NEW_FOLDER_NAME&gt;
</code></pre></div></div> <p>To change application <span class="notranslate"> URI </span>:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=&lt;python|ruby&gt; [--user=USER] [--print-summary] [--json] --transit-webapp &lt;FOLDER_NAME&gt; &lt;NEW_URI&gt;
</code></pre></div></div> <p>To change application interpreter version:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--print-summary] [--json] --set-user-current --version=&lt;NEW VERSION&gt; &lt;FOLDER_NAME&gt;
</code></pre></div></div> <p>To set application <span class="notranslate"> WSGI </span> handler ( <span class="notranslate"> Python </span> only):</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--print-summary] [--json] --setup-wsgi=&lt;file_path:callable&gt; &lt;FOLDER_NAME&gt;
</code></pre></div></div> <p>To install modules to application environment:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--print-summary] [--json] --enable-user-extensions=&lt;module1[,module2...]&gt; &lt;FOLDER_NAME&gt;
</code></pre></div></div> <p>To remove modules from application environment:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--print-summary] [--json] --disable-user-extensions=&lt;module1[,module2...]&gt; &lt;FOLDER_NAME&gt;
</code></pre></div></div> <p>To list modules installed in application environment:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--print-summary] [--json] --list-user-extensions &lt;FOLDER_NAME&gt;
</code></pre></div></div> <p>To print applications summary for a user:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--json] --user-summary
</code></pre></div></div> <p>To list available interpreters:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=python [--user=USER] [--json] --list
</code></pre></div></div> <h2 id="ruby-selector"><a href="#ruby-selector" class="header-anchor">#</a> Ruby Selector</h2> <p>To create application run:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=ruby --version=VERSION [--user=USER] [--print-summary] [--json] --create-webapp &lt;FOLDER_NAME&gt; &lt;URI&gt;
</code></pre></div></div>
To delete application:
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=ruby [--user=USER] [--print-summary] [--json] --destroy-webapp &lt;FOLDER_NAME&gt;
</code></pre></div></div>
To change application folder name:
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=ruby [--user=USER] [--print-summary] [--json] --relocate-webapp &lt;FOLDER_NAME&gt; &lt;NEW_FOLDER_NAME&gt;
</code></pre></div></div> <p>To change application <span class="notranslate"> URI </span> :
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=ruby [--user=USER] [--print-summary] [--json] --transit-webapp &lt;FOLDER_NAME&gt; &lt;NEW_URI&gt;
</code></pre></div></div> <p>To change application interpreter version:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>/usr/bin/selectorctl --interpreter=ruby [--user=USER] [--print-summary] [--json] --set-user-current --version=&lt;NEW VERSION&gt; &lt;FOLDER_NAME&gt;
</code></pre></div></div> <p>To restart application:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>selectorctl --interpreter ruby --user cltest1 --domain cltest1.com --restart-webapp testapp
</code></pre></div></div>
To choose <span class="notranslate"> Ruby </span> version:
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>selectorctl --interpreter=ruby --user=$USER -v 2.0
</code></pre></div></div> <h2 id="node-js-selector"><a href="#node-js-selector" class="header-anchor">#</a> Node.js Selector</h2> <p>Below is a list of commands hoster and end user can run in a command line.</p> <h4 id="hoster-2"><a href="#hoster-2" class="header-anchor">#</a> <strong>Hoster</strong></h4> <p>Get information related to Node.js: default version, list of supported versions, status of <span class="notranslate"> Node.js Selector </span> , list of users, their applications, etc:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector [get] [--json] --interpreter nodejs
</code></pre></div></div> <p><span class="notranslate"> JSON </span> output for <span class="notranslate"><em>get</em></span> command:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>{  
&quot;selector_enabled&quot;: true | false,   
&quot;default_version&quot;: &quot;6.11.3&quot;,   
&quot;result&quot;: &quot;success&quot;,   
&quot;timestamp&quot;: 1508667174.220027  
&quot;cache_status&quot;: &quot;ready&quot;         //  or “updating” during automatic yum cache rebuild  
&quot;available_versions&quot;: {   //  begin of  “versions”
      &quot;6.11.3&quot; : {   //   begin of version &quot;6.11.3&quot;
		&quot;name_modifier&quot;: &quot;&quot;,
		&quot;status&quot;: &quot;enabled&quot;,  //  enabled, disabled, not_installed, installing, removing
		“base_dir”: “/opt/alt/alt-nodejs6”   //  empty when version is not installed
		“users”: {   //  begin of  “users”                      
			“user1”: {   //  begin of “user1”
				“homedir”: “/home/user1”,
				“applications”: {    //  begin of “applications”
					“apps_dir/app1” : {   //   begin of application “apps_dir/app1”
						“domain”: “cltest1.com”,
						“app_uri”: “apps/my-app1”,
						“app_mode” : “development”,
						“startup_file” : “app.js”,
						“app_status” : “started”,   // ‘started’ or ‘stopped’
						“config_files” : [
							“package.json”,
							“gruntfile.js”
						],
						“env_vars” : {
							“var1” : “value1”,
							“var2” : “value2”
						},
					},   // end of application “apps_dir/app1”
					“apps_dir/app2” : {    //   begin of application “apps_dir/app2”
						&lt;&lt; data for application “apps_dir/app2”  (same structure as for application “apps_dir/app1” above) &gt;&gt;
					},   //  end of application “apps_dir/app2”
				},   //  end of “applications”
			},   //  end of “user1”
			“user2”: {   //  begin of “user2”
				&lt;&lt; data for user “user2”  (same structure as for “user1” above) &gt;&gt;
			},   //  end of “user2”
		},   // end of “users”
	},    //  end of version “6.11.3”
	&quot;8.21.5&quot; : {   //   begin of version &quot;8.21.5&quot;
		&lt;&lt; data for version &quot;8.21.5&quot;  (same structure as for version “6.11.3” above) &gt;&gt;
	},    //  end of version “8.21.5”
},    //  end of “versions”}   //   end of json
</code></pre></div></div> <p>Set default version, supported versions, and status of <span class="notranslate"> Node.js Selector </span> :
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set [--json] --interpreter nodejs (--selector-status &lt;enabled,disabled&gt; | --default-version &lt;str&gt; | --supported-versions &lt;str&gt;)
</code></pre></div></div> <div class="tip custom-block"><p class="custom-block-title">Note</p><p><span class="notranslate"> Node.js Selector </span> is disabled by default. If an available Node.js version is not installed <span class="notranslate"> Node.js Selector </span> is always disabled and it is impossible to enable it.</p></div><p>To set default Node.js version, please use the following command (note that required Node.js version should be enabled):
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter=nodejs --default-version=&lt;ver&gt;
</code></pre></div></div> <p><strong>Examples</strong>:<br>
This command enables <span class="notranslate"> Node.js Selector </span> :</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter nodejs --selector-status enabled
</code></pre></div></div> <p>This command sets default Node.js version as 6:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter nodejs --default-version 6
</code></pre></div></div> <p>This command sets supported Node.js version as 8:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter nodejs --supported-versions='{&quot;6&quot;: false, &quot;8&quot;: true}'
</code></pre></div></div> <p>Install required Node.js version:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector install-version --json --interpreter nodejs --version 8
</code></pre></div></div> <p>Uninstall required Node.js version:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector uninstall-version --json --interpreter nodejs --version 8
</code></pre></div></div> <p>Enable required Node.js version:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector enable-version --json --interpreter nodejs --version 8
</code></pre></div></div> <p>Disable required Node.js version (note that it is impossible to disable default Node.js version):
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector disable-version --json --interpreter nodejs --version 8
</code></pre></div></div> <p>Change version for application(s):
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set [--json] --interpreter nodejs ((--user &lt;str&gt; |  --domain &lt;str&gt;) --app-root &lt;str&gt; | --from-version &lt;str&gt;) --new-version &lt;str&gt;
</code></pre></div></div> <p><strong>Examples</strong> :<br>
This command changes version for the specific application:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter nodejs --user user1 --app-root apps_dir/app1 --new-version 8
</code></pre></div></div> <p>Common output for all <span class="notranslate"><em>set</em></span> commands:</p> <p><strong><em>in case of success</em></strong> :
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>{  &quot;result&quot;: &quot;success&quot;,   &quot;timestamp&quot;: 1508666792.863358}
</code></pre></div></div> <p><strong><em>in case of error:</em></strong></p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>{  &quot;result&quot;: &quot;Some error message&quot;,  &quot;details&quot; : &quot;Traceback: ...&quot; ,  &quot;context&quot;: {},  &quot;timestamp&quot;: 1508666792.863358}
</code></pre></div></div> <p><strong><em>in case of warning:</em></strong></p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>{  &quot;result&quot;: &quot;success&quot;,  &quot;warning&quot; : &quot;Some warning message&quot; ,  &quot;context&quot;: {},  &quot;timestamp&quot;: 1508666792.863358}
</code></pre></div></div> <p>To resolve issues related to <span class="notranslate"><em>install-version/uninstall-version</em></span> commands (because they are running in the background) you may use this log file <span class="notranslate"><em>/var/log/cl-nodejs-last-yum.log</em></span>
It contains full <span class="notranslate"><em>yum</em></span> output from the <span class="notranslate"><strong><em>latest</em></strong></span> performed operation (install or uninstall) and it will be rewritten with each operation.</p> <h4 id="end-user-2"><a href="#end-user-2" class="header-anchor">#</a> <strong>End user</strong></h4> <p>::: danger
options --user and --domain are mutually exclusive now.
:::</p> <p>Get config file for the user applications</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector read-config [--json] --interpreter nodejs  [(--user &lt;str&gt; |  --domain &lt;str&gt;)] --app-root &lt;str&gt; --config-file &lt;name&gt;
</code></pre></div></div> <p>JSON output:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
    &quot;result&quot;: &quot;success&quot;,
	&quot;timestamp&quot;: 1508666792.863358
	&quot;data&quot;: &quot;content of config file as Base64 encoded string&quot;
}
</code></pre></div></div> <p><strong>Example</strong>:</p> <p>This command gets config file for <span class="notranslate"> user1 </span> ’s application <span class="notranslate"> app1 </span> :</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector read-config --json --interpreter nodejs  --user user1 --app-root app_dir/app1 --config-file package.json
</code></pre></div></div>
Save config file for the user applications
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector save-config [--json] --interpreter nodejs  [(--user &lt;str&gt; | --domain &lt;str&gt;)] --app-root &lt;str&gt; --config-file &lt;path&gt; --content &lt;content of config file as Base64 encoded string&gt;
</code></pre></div></div> <p><span class="notranslate"> JSON </span> output (the same as for all <span class="notranslate"><em>set</em></span> commands):</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
          &quot;result&quot;: &quot;success&quot;,
		  &quot;timestamp&quot;: 1508666792.863358
}
</code></pre></div></div> <p><strong>Example</strong>:<br>
This command saves config file for <span class="notranslate"> user1 </span> ’s application <span class="notranslate"> app1 </span> :</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector save-config --json --interpreter nodejs  --user user1 --app-root app_dir/app1 --config-file package.json  --content                                         VGh1ICAyIE5vdiAxMDo0MzoxMiBFRFQgMjAxNwo=
</code></pre></div></div>
Get a list of applications for the specific user
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector [get] [--json] --interpreter nodejs  [(--user &lt;str&gt; |  --domain &lt;str&gt;)]
</code></pre></div></div> <p><strong>Example</strong>:<br>
This command gets a list of applications for the <span class="notranslate"> user1 </span> :</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector get --json --interpreter nodejs  --user user1
</code></pre></div></div>
Create user application
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector create [--json] --interpreter nodejs [(--user &lt;str&gt; | --domain &lt;str&gt;)] --app-root &lt;str&gt; --app-uri &lt;str&gt; [--version &lt;str&gt;] [--app-mode &lt;str&gt;] [--startup-file &lt;str&gt;] [--env-vars &lt;json string&gt;]
</code></pre></div></div> <p><strong>Example</strong>:<br>
This command creates <span class="notranslate"> user1 </span> 's application for the domain <span class="notranslate"> xyz.com </span> :
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector create --json --interpreter nodejs --user user1 --app-root my_apps/app1 --app-uri apps/app1
</code></pre></div></div>
or
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector create --json --interpreter nodejs --app-root my_apps/app1 --domain xyz.com --app-uri apps/app1
</code></pre></div></div>
Start, restart, stop, and destroy user application
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector (start | restart | stop | destroy) [--json] --interpreter nodejs  [(--user &lt;str&gt; | --domain &lt;str&gt;)] --app-root &lt;str&gt;
</code></pre></div></div> <p><strong>Example</strong>:
This command starts <span class="notranslate"> user1 </span> 's application:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector start --json --interpreter nodejs --user user1 --app-root my_apps/app1
</code></pre></div></div>
Change properties for an application
<div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set [--json] --interpreter nodejs  [(--user &lt;str&gt; | --domain &lt;str&gt;)] --app-root &lt;str&gt; [--app-mode &lt;str&gt;] [--new-app-root &lt;str&gt;] [--new-domain &lt;str&gt;] [--new-app-uri &lt;str&gt;] [--new-version &lt;str&gt;] [--startup-file &lt;str&gt;] [--env-vars &lt;json string&gt;]
</code></pre></div></div> <p><strong>Examples:</strong></p> <p>This command sets a custom path for Passenger log files:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector --json create --interpreter=nodejs --user=cltest1 --app-root=p_app2 --app-uri=p_app2_uri --passenger-log-file=/home/cltest1/passenger.log
</code></pre></div></div> <p>This command removes a custom path for Passenger log files:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector --json set --interpreter=nodejs --user=cltest1 --app-root=p_app1 --passenger-log-file=&quot;&quot;
</code></pre></div></div> <p><strong>Example 1</strong>:
This command sets a production mode, new domain <span class="notranslate"> new.xyz.com </span> , new Node.js version 8, new <span class="notranslate"> URI </span> , new application <span class="notranslate"> root </span> directory and new startup file for <span class="notranslate"> user1 </span> application located on the domain <span class="notranslate"> xyz.com </span> :
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter nodejs  --user user1 --app-root my_apps/app1 --mode production  --new-app-root new_apps/new_app1  --new-domain new.xyz.com --new-app-uri new_apps/app1  --new-version 8  --startup-file new_app.js --env-vars '{ &quot;var1&quot; : &quot;value1&quot;, &quot;var2&quot; : &quot;value2&quot; }'
</code></pre></div></div> <p><strong>Example 2</strong>:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector set --json --interpreter nodejs  --domain xyz.com --app-root my_apps/app1 --mode production  --new-app-root new_apps/new_app1  --new-domain new.xyz.com --new-app-uri new_apps/app1  --new-version 8  --startup-file new_app.js --env-vars '{ &quot;var1&quot; : &quot;value1&quot;, &quot;var2&quot; : &quot;value2&quot; }'
</code></pre></div></div> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>When changing Node.js version all replies from web application to get request will be checked in Node.js Selector (before and after version changing). HTTP response codes and MIME type are comparing. So, make sure application is available via http(s) at least locally.</p></div><p>Run <span class="notranslate"><em>npm install</em></span> command for the user application
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector install-modules [--json] --interpreter nodejs  [(--user &lt;str&gt; |  --domain &lt;str&gt;)] --app-root &lt;str&gt;
</code></pre></div></div> <p><strong>Example</strong>:
This command runs <span class="notranslate"><code>npm install</code></span> for <span class="notranslate"> user1 </span> application:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector install-modules --json --interpreter nodejs --user user1 --app-root my_apps/app
</code></pre></div></div> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>All replies from web application to get request will be checked in Node.js Selector (before and after modules installation). HTTP response codes and MIME type are comparing. So, make sure application is available via http(s) at least locally.</p></div><p>Run a script from <span class="notranslate"> package.json </span> file of a user application, arguments <span class="notranslate"><em>args</em></span> are passed to the script
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector run-script [--json] --interpreter nodejs  [(--user &lt;str&gt; | --domain &lt;str&gt;)] --app-root &lt;str&gt; --script-name &lt;str&gt; [-- &lt;args&gt;...]
</code></pre></div></div> <p><strong>Example</strong>:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>cloudlinux-selector run-script --json --interpreter nodejs --user user1 --app-root my_apps/app --script-name test_script -- --script_opt1 --script_opt2 script_arg1 script_arg2
</code></pre></div></div> <p><span class="notranslate"> JSON </span> output:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>{
          &quot;result&quot;: &quot;success&quot;,
		  &quot;timestamp&quot;: 1508666792.863358
		  &quot;data&quot;: &quot;script output as Base64 encoded string&quot;
}
</code></pre></div></div> <p>Activate virtual environment of NodeJS:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>source &lt;home_of_user&gt;/nodevenv/&lt;app_root&gt;/&lt;nodejs_version&gt;/bin/activate
</code></pre></div></div> <p>This command changes prompt to
<strong>Example</strong>:<br></p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>[newusr@192-168-245-108 ~]$ source /home/newusr/nodevenv/newapp4/newapp3/8/bin/activate
[newapp4/newapp3 (8)] [newusr@192-168-245-108 ~]$
</code></pre></div></div> <p>After activation user can use <span class="notranslate"><code>npm</code></span> and node from a virtual environment without full paths.</p> <h2 id="apache-mod-lsapi-pro"><a href="#apache-mod-lsapi-pro" class="header-anchor">#</a> Apache mod_lsapi PRO</h2> <p>switch_mod_lsapi is the command line tool used to manage mod_lsapi PRO.</p> <p>It has the following syntax:</p> <p><code>/usr/bin/switch_mod_lsapi [OPTIONS]</code></p> <p><code>[OPTIONS]</code>  can be the main and an additional (for usage together with any other main option).</p> <p><strong>Main options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><strong>Option</strong></td> <td><strong>Description</strong></td></tr> <tr><td><code>--setup</code></td> <td>setup <em>mod_lsapi</em> configurations for Apache, including PHP handlers setup; create native lsphp (if it doesn't exist) by doing: <code>cp /opt/alt/php56/usr/bin/lsphp /usr/local/bin/</code> <br> <em>* NOT supported for DirectAdmin</em></td></tr> <tr><td><code>--setup-light</code></td> <td>setup PHP handlers only<br> <em>* supported for cPanel EasyApache 4 only</em></td></tr> <tr><td><code>--uninstall</code></td> <td>uninstall <em>mod_lsapi</em> from Apache<br> <em>* supported for cPanel (EasyApache 3 and EasyApache 4), Plesk, and servers without control panel</em></td></tr> <tr><td><code>--enable-domain</code></td> <td>enable <em>mod_lsapi</em> for individual domain<br> <em>* supported for cPanel EasyApache 3 only</em></td></tr> <tr><td><code>--disable-domain</code></td> <td>disable <em>mod_lsapi</em> for individual domain<br> <em>* supported for cPanel EasyApache 3 only</em></td></tr> <tr><td><code>--enable-global</code></td> <td>sets up <em>mod_lsapi</em> as a default way to serve PHP, making it enabled for all domains. Once that mode is enabled, you cannot disable <em>mod_lsapi</em> for an individual domain.<br> <em>* supported for cPanel only (EasyApache 3 and EasyApache 4)</em></td></tr> <tr><td><code>--disable-global</code></td> <td>disable <em>mod_lsapi</em> as a default way to serve PHP, disabling <em>mod_lsapi</em> for all domains, including those selected earlier using<br> <em>--enable-domain</em> <em>* supported for cPanel EasyApache 3 only</em></td></tr> <tr><td><code>--build-native-lsphp</code></td> <td>build native <em>lsphp</em> for cPanel EasyApache 3<br> <em>* supported for cPanel EasyApache 3 only</em></td></tr> <tr><td><code>--build-native-lsphp-cust</code></td> <td>build native <em>lsphp</em> for cPanel EasyApache 3 (with custom PHP source path)<br> <em>* supported for cPanel EasyApache 3 only</em></td></tr> <tr><td><code>--check-php</code></td> <td>check PHP configuration<br> <em>* NOT supported for DirectAdmin</em></td></tr> <tr><td><code>--stat</code></td> <td>return usage statistics in JSON format; the following statistics metrics are collected:<br> • control panel name;<br> • mod_lsapi version;<br> • liblsapi version;<br> • criu version and status;<br> • whether mod_lsapi is enabled;<br> • lsapi configuration options;<br> • number of domains, that use <em>mod_lsapi</em>, per each installed PHP version including those set in PHP Selector <em>(this metric is supported for cPanel EasyApache 4, Plesk and DirectAdmin)</em> .</td></tr></tbody></table> <p><strong>Additional options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><strong>Option</strong></td> <td><strong>Description</strong></td></tr> <tr><td><code>--verbose</code></td> <td>switch verbose level on</td></tr> <tr><td><code>--force</code></td> <td>switch force mode on</td></tr></tbody></table> <p>The following table presents which <code>[OPTIONS]</code> are supported for various panels:</p> <table><thead><tr><th></th> <th></th> <th></th> <th></th> <th></th> <th></th> <th></th> <th></th></tr></thead> <tbody><tr><td></td> <td>No Control Panel</td> <td>cPanel EA3</td> <td>cPanel EA4</td> <td>DirectAdmin</td> <td>Plesk</td> <td>InterWorx</td> <td>ISPManager</td></tr> <tr><td><code>setup</code></td> <td>+</td> <td>+</td> <td>+</td> <td>custombuild</td> <td>+</td> <td>+</td> <td>+</td></tr> <tr><td><code>setup-light</code></td> <td>-</td> <td>-</td> <td>+</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td></tr> <tr><td><code>uninstall</code></td> <td>+</td> <td>+</td> <td>+</td> <td>custombuild</td> <td>+</td> <td>+</td> <td>+</td></tr> <tr><td><code>enable-domain</code></td> <td>-</td> <td>+</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td></tr> <tr><td><code>disable-domain</code></td> <td>-</td> <td>+</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td></tr> <tr><td><code>enable-global</code></td> <td>-</td> <td>+</td> <td>+</td> <td>custombuild</td> <td>-</td> <td>-</td> <td>-</td></tr> <tr><td><code>disable-global</code></td> <td>-</td> <td>+</td> <td>-</td> <td>custombuild</td> <td>-</td> <td>-</td> <td>-</td></tr> <tr><td><code>build-native-lsphp</code></td> <td>-</td> <td>+</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td></tr> <tr><td><code>build-native-lsphp-cust</code></td> <td>-</td> <td>+</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td></tr> <tr><td><code>check-php</code></td> <td>+</td> <td>+</td> <td>+</td> <td>-</td> <td>+</td> <td>+</td> <td>+</td></tr> <tr><td><code>verbose</code></td> <td>+</td> <td>+</td> <td>+</td> <td>-</td> <td>+</td> <td>+</td> <td>+</td></tr> <tr><td><code>force</code></td> <td>+</td> <td>+</td> <td>+</td> <td>-</td> <td>+</td> <td>+</td> <td>+</td></tr> <tr><td><code>stat</code></td> <td>+ <br> <em>*without domain info</em></td> <td>+ <br> <em>*without domain info</em></td> <td>+</td> <td>+</td> <td>+</td> <td>+ <br> <em>*without domain info</em></td> <td>+ <br> <em>*without domain info</em></td></tr></tbody></table> <h2 id="other-cli-tools"><a href="#other-cli-tools" class="header-anchor">#</a> Other CLI tools</h2> <ul><li><a href="/command-line_tools/#cldeploy">cldeploy</a></li> <li><a href="/command-line_tools/#lvectl">lvectl</a></li> <li><a href="/command-line_tools/#lveps">lveps</a></li> <li><a href="/command-line_tools/#lvetop">lvetop</a></li> <li><a href="/command-line_tools/#cldetect">cldetect</a></li> <li><a href="/command-line_tools/#cldiag">cldiag</a></li> <li><a href="/command-line_tools/#cloudlinux-config">cloudlinux-config</a></li> <li><a href="/command-line_tools/#cl-quota">cl-quota</a></li> <li><a href="/command-line_tools/#cloudlinux-limits">cloudlinux-limits</a></li></ul> <h3 id="cldeploy"><a href="#cldeploy" class="header-anchor">#</a> cldeploy</h3> <p><span class="notranslate"><code>sh cldeploy --help</code></span></p> <p>Usage:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>-h, --help</code></span></td> <td>Print this message</td></tr> <tr><td><span class="notranslate"><code>-k, --key &amp;lt;key&amp;gt;</code></span></td> <td>Update your system to CloudLinux with activation key</td></tr> <tr><td><span class="notranslate"><code>-i, --byip</code></span></td> <td>Update your system to CloudLinux and register by IP</td></tr> <tr><td><span class="notranslate"><code>-c, --uninstall</code></span></td> <td>Convert CloudLinux back to CentOS</td></tr> <tr><td><span class="notranslate"><code>--serverurl</code></span></td> <td>Use non-default registration server (default is <code>https://xmlrpc.cln.cloudlinux.com/XMLRPC</code>)</td></tr> <tr><td><span class="notranslate"><code>--components-only</code></span></td> <td>Install control panel components only</td></tr> <tr><td><span class="notranslate"><code>--conversion-only</code></span></td> <td>Do not install control panel components after converting</td></tr> <tr><td><span class="notranslate"><code>--hostinglimits</code></span></td> <td>Install mod_hostinglimits rpm</td></tr> <tr><td><span class="notranslate"><code>--skip-kmod-check</code></span></td> <td>Skip check for unsupported kmods</td></tr> <tr><td><span class="notranslate"><code>--skip-version-check</code></span></td> <td>Do not check for script updates</td></tr> <tr><td><span class="notranslate"><code>--skip-registration</code></span></td> <td>Don't register on CLN if already have access to CL repository</td></tr></tbody></table> <p>The script will install the following to the server:</p> <ol><li>Register server with CLN.</li> <li>Install CloudLinux kernel, lve libraries, lve-utils, lve-stats and pam_lve packages.</li> <li>It will attempt to detect control panel and do the following actions:</li></ol> <ul><li><p><em>For cPanel</em>:</p> <ul><li>install mod_hostinglimits;</li> <li>install LVE Manager.</li></ul></li> <li><p><em>For DirectAdmin</em>:</p> <ul><li>recompile Apache to install mod_hostinglimits;</li> <li>install LVE Manager.</li></ul></li> <li><p><em>For Plesk, ISPManager &amp; InterWorx</em>:</p> <ul><li>update httpd and install mod_hostinglimits;</li> <li>install LVE Manager.</li></ul></li> <li><p>To disable installation of LVE Manager and mod_hostinglimits, please use <span class="notranslate"><code>--conversion-only</code></span> option.</p></li> <li><p>To disable installation of kernel &amp; CLN registration, please use <span class="notranslate"><code>--components-only</code></span> option.</p></li> <li><p>To install <strong>mod_hostinglimits</strong> only, use <span class="notranslate"><code>--hostinglimits</code></span> option.</p></li></ul> <p>Examples:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ cldeploy --key xx-xxxxxx           # convert RHEL/CentOS to CL by using activation key, install control panel components
$ cldeploy --byip --conversion-only  # convert RHEL/CentOS to CL by ip, don't install control panel components
$ cldeploy --components-only         # install control panel components on already converted system
$ cldeploy --hostinglimits           # update httpd and install mod_hostinglimits 
</code></pre></div></div> <h3 id="lvectl"><a href="#lvectl" class="header-anchor">#</a> lvectl</h3> <p><code>lvectl</code> is the primary tool for LVE management. To use it, you have to have administrator access. lvectl is a part of lve-utils package.</p> <p><strong>lvectl syntax</strong></p> <p><strong>Usage</strong>: <span class="notranslate"><code>lvectl command [veid] [options]</code></span></p> <p><strong>Commands</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>apply</code></span></td> <td>apply config settings to specified LVE</td></tr> <tr><td><span class="notranslate"><code>apply all</code></span></td> <td>apply config settings to all the LVEs</td></tr> <tr><td><span class="notranslate"><code>apply-many</code></span></td> <td>to apply LVE limits to multiple distinct LVEs (uids of users are read from stdin)</td></tr> <tr><td><span class="notranslate"><code>set</code></span></td> <td>set parameters for a LVE and/or create a LVE</td></tr> <tr><td><span class="notranslate"><code>set-user</code></span></td> <td>set parameters for a LVE and/or create a LVE using username instead of ID</td></tr> <tr><td><span class="notranslate"><code>list</code></span></td> <td>list loaded LVEs</td></tr> <tr><td><span class="notranslate"><code>list-user</code></span></td> <td>list loaded LVEs, display username instead of user id</td></tr> <tr><td><span class="notranslate"><code>limits</code></span></td> <td>show limits for loaded LVEs</td></tr> <tr><td><span class="notranslate"><code>delete</code></span></td> <td>delete LVE and set configuration for that LVE to defaults</td></tr> <tr><td><span class="notranslate"><code>delete-user</code></span></td> <td>delete LVE and set configuration for that user to defaults</td></tr> <tr><td><span class="notranslate"><code>destroy</code></span></td> <td>destroy LVE (configuration file remains unchanged)</td></tr> <tr><td><span class="notranslate"><code>destroy all</code></span></td> <td>destroy all LVE (configuration file remains unchanged)</td></tr> <tr><td><span class="notranslate"><code>destroy-many</code></span></td> <td>to destroy LVE limits to multiple distinct LVEs (uids of users are read from stdin)</td></tr> <tr><td><span class="notranslate"><code>package-set</code></span></td> <td>set LVE parameters for a package</td></tr> <tr><td><span class="notranslate"><code>package-list</code></span></td> <td>list LVE parameters for packages</td></tr> <tr><td><span class="notranslate"><code>package-delete</code></span></td> <td>delete LVE parameters for a package</td></tr> <tr><td><span class="notranslate"><code>paneluserslimits</code></span></td> <td>show current user's limits for control panel</td></tr> <tr><td><span class="notranslate"><code>limit</code></span></td> <td>limit PID into specified LVE. Parameters PID LVE_ID</td></tr> <tr><td><span class="notranslate"><code>release</code></span></td> <td>release PID from LVE. Parameters PID</td></tr> <tr><td><span class="notranslate"><code>set-binary</code></span></td> <td>add binary to be run inside LVE on execution</td></tr> <tr><td><span class="notranslate"><code>del-binary</code></span></td> <td>remove binary from being run inside LVE on execution</td></tr> <tr><td><span class="notranslate"><code>list-binaries</code></span></td> <td>list all binaries to be run inside LVE on execution</td></tr> <tr><td><span class="notranslate"><code>load-binaries</code></span></td> <td>load binaries (used on startup) from config file</td></tr> <tr><td><span class="notranslate"><code>reload-binaries</code></span></td> <td>re-load list of binaries from config file</td></tr> <tr><td><span class="notranslate"><code>help (-h)</code></span></td> <td>show this message</td></tr> <tr><td><span class="notranslate"><code>version (-v)</code></span></td> <td>version number</td></tr> <tr><td><span class="notranslate"><code>lve-version</code></span></td> <td>LVE version number</td></tr> <tr><td><span class="notranslate"><code>set-reseller</code></span></td> <td>create LVE container and set LVE parameters for a reseller</td></tr> <tr><td><span class="notranslate"><code>set-reseller-default</code></span></td> <td>set default limits for resellers users</td></tr> <tr><td><span class="notranslate"><code>remove-reseller</code></span></td> <td>delete LVE container and the record in the config, move LVE containers to the host container</td></tr></tbody></table> <p><strong>Options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>--cpu=N</code></span></td> <td>limit <span class="notranslate"><code>CPU</code></span> usage; (deprecated. Use <span class="notranslate"><code>--speed</code></span>)</td></tr> <tr><td><span class="notranslate"><code>--speed=N%</code></span></td> <td>limit <span class="notranslate"><code>CPU</code></span> usage in percentage; 100% is one core</td></tr> <tr><td><span class="notranslate"><code>--speed=Nmhz\ghz</code></span></td> <td>limit <span class="notranslate"><code>CPU</code></span> usage in mhz\ghz</td></tr> <tr><td><span class="notranslate"><code>--ncpu=N</code></span></td> <td>limit VCPU usage (deprecated)</td></tr> <tr><td><span class="notranslate"><code>--io=N</code></span></td> <td>define io limits (KB/s)</td></tr> <tr><td><span class="notranslate"><code>--nproc=N</code></span></td> <td>limit number of processes</td></tr> <tr><td><span class="notranslate"><code>--pmem=N</code></span></td> <td>limit physical memory usage for applications inside LVE</td></tr> <tr><td><span class="notranslate"><code>--iops=N</code></span></td> <td>limit io per second</td></tr> <tr><td><span class="notranslate"><code>--mem=N</code></span></td> <td>mem alias for vmem (deprecated)</td></tr> <tr><td><span class="notranslate"><code>--vmem=N</code></span></td> <td>limit virtual memory for applications inside LVE</td></tr> <tr><td><span class="notranslate"><code>--maxEntryProcs=N</code></span></td> <td>limit number of entry processes</td></tr> <tr><td><span class="notranslate"><code>--save</code></span></td> <td>save configuration settings (use with set) (deprecated)</td></tr> <tr><td><span class="notranslate"><code>--save-all-parameters</code></span></td> <td>save all parameters even if they match with defaults settings</td></tr> <tr><td><span class="notranslate"><code>--json</code></span></td> <td>returns result of command json formatted</td></tr> <tr><td><span class="notranslate"><code>--unlimited</code></span></td> <td>set all limits to unlimited</td></tr> <tr><td><span class="notranslate"><code>--save-username</code></span></td> <td>save username in the config file. This parameter is used in conjunction with <span class="notranslate"><code>set-user</code></span></td></tr></tbody></table> <p><strong>Examples</strong></p> <ul><li><p>Reset all LVEs settings based on configuration in <span class="notranslate"><code>/etc/container/ve.cfg</code></span>:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ lvectl apply all
</code></pre></div></div></li> <li><p>Set new default <span class="notranslate">CPU &amp; Physical memory</span> limit:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ lvectl set default --speed=100% --pmem=256m
</code></pre></div></div></li> <li><p>Reset all LVE's killing processes inside them:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ lvectl destroy all
</code></pre></div></div></li> <li><p>Show list of LVEs and their limits:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ lvectl list
</code></pre></div></div></li></ul> <h3 id="lveps"><a href="#lveps" class="header-anchor">#</a> lveps</h3> <p><strong>lveps</strong> tool shows information about running LVEs, processes and threads belonging to them, <span class="notranslate"> CPU/memory/IO </span> usage consumed by LVEs and their individual processes/threads. LVE is only reported if it is considered active (at least one thread belongs to that LVE or was running during measurement in dynamic mode).</p> <p><strong>Usage</strong>:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>lveps [-p] [-n] [-o &lt;fmt1:width1,...&gt;] [-d] [-c &lt;time&gt;] [-s &lt;style&gt;] [-t] [-h]
</code></pre></div></div> <p><strong>Options</strong>:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><code>-p</code></td> <td>to print per-process/per-thread statistics</td></tr> <tr><td><code>-n</code></td> <td>to print LVE ID instead of username</td></tr> <tr><td><code>-o</code></td> <td>to use formatted output (fmt=id,ep,pid,tid,cpu,mem,io)</td></tr> <tr><td><code>-d</code></td> <td>to show dynamic cpu usage instead of total cpu usage</td></tr> <tr><td><code>-c</code></td> <td>to calculate average cpu usage for &lt;time&gt; seconds (used with <code>-d</code>)</td></tr> <tr><td><code>-r</code></td> <td>to run under realtime priority for more accuracy (needs privileges)</td></tr> <tr><td><code>-s</code></td> <td>to sort LVEs in output (cpu, process, thread, mem, io)</td></tr> <tr><td><code>-t</code></td> <td>to run in the top-mode</td></tr> <tr><td><code>-h</code></td> <td>to print this brief help message</td></tr></tbody></table> <p>Command like <span class="notranslate"><code>lveps -p</code></span> will display processes running inside 'active' LVEs.</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"> CPU </span></td> <td>The number of seconds LVE/process/thread has been running (each <span class="notranslate"> CPU </span> /core is counted separately), or the average CPU load (100% is all <span class="notranslate"> CPU </span> resources) if used with <span class="notranslate"><code>-d</code></span>.</td></tr> <tr><td><span class="notranslate">MEM</span></td> <td>The number of megabytes of resident memory in use by LVE/process/thread (shared memory is not included).</td></tr> <tr><td><span class="notranslate">IO</span></td> <td>The number of kilobytes read and written in sum by LVE, or kb/sec if used with <code>-d</code>.</td></tr> <tr><td><span class="notranslate">ID</span></td> <td>LVE ID or username.</td></tr> <tr><td><span class="notranslate">EP</span></td> <td>The number of entry processes inside  LVE.</td></tr> <tr><td><span class="notranslate">COM</span></td> <td>Command name for this process.</td></tr> <tr><td><span class="notranslate">PID</span></td> <td><span class="notranslate">PID</span> of the process.</td></tr> <tr><td><span class="notranslate">PNO</span></td> <td>The number of processes belonging to the LVE.</td></tr> <tr><td><span class="notranslate">TID</span></td> <td><span class="notranslate">TID</span> of the thread.</td></tr> <tr><td><span class="notranslate">TNO</span></td> <td>The number of threads belonging to the LVE.</td></tr> <tr><td><span class="notranslate">DO</span></td> <td>The number of disk operations belonging to the LVE from the time it was created.</td></tr> <tr><td><span class="notranslate">DT</span></td> <td>Total amount of disk transfer in megabytes from LVE creation time.</td></tr> <tr><td><span class="notranslate">IOPS</span></td> <td>The number of I/O operations per second</td></tr></tbody></table> <h3 id="lvetop"><a href="#lvetop" class="header-anchor">#</a> lvetop</h3> <p><strong>lvetop</strong> utility allows to monitor LVE usage:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>ID        EP PNO TNO SPEED MEM  IO   IPOS
testuser1 0  1   1   0%    7    0    0
testuser2 0  0   0   5%    0    3    0
testuser3 1  2   2   0%    102  2727 0
testuser4 0  1   1   0%    12   84   1
testuser5 0  2   2   1%    52   0    0
</code></pre></div></div> <p><strong>lvetop fields</strong>:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>ID</code></span></td> <td>user name if LVE id matches user id in <span class="notranslate"><code>/etc/passwd</code></span>, or LVE id</td></tr> <tr><td><span class="notranslate"><code>EP</code></span></td> <td>number of entry processes (concurrent scripts executed)</td></tr> <tr><td><span class="notranslate"><code>PNO</code></span></td> <td>number of processes within LVE</td></tr> <tr><td><span class="notranslate"><code>TNO</code></span></td> <td>number of threads within LVE</td></tr> <tr><td><span class="notranslate"><code>CPU</code></span></td> <td><span class="notranslate"> CPU</span> usage by LVE, relative to total <span class="notranslate"> CPU </span>  resources of the server</td></tr> <tr><td><span class="notranslate"><code>MEM</code></span></td> <td>Memory usage by LVE, in KB</td></tr> <tr><td><span class="notranslate"><code>I/O</code></span></td> <td><span class="notranslate"> I/O </span> usage</td></tr> <tr><td><span class="notranslate"><code>IOPS</code></span></td> <td>number of read/write operations per second</td></tr></tbody></table> <h3 id="cldetect"><a href="#cldetect" class="header-anchor">#</a> cldetect</h3> <div class="tip custom-block"><p class="custom-block-title">Note</p><p><span class="notranslate">lve-utils 1.2-10+</span></p></div><p><strong>cldetect</strong> is used to detect installed software, and adjust CloudLinux options accordingly.</p> <p><strong>Usage</strong>:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>/usr/bin/cldetect [--options]
</code></pre></div></div> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>cldetect -h</code>/<code>-h</code>/<code>--help</code></span></td> <td>show this message</td></tr> <tr><td><span class="notranslate"><code>--detect-cp</code></span></td> <td>prints control panel and its version (<span class="notranslate">CP_NAME,CP_VERSION</span>)</td></tr> <tr><td><span class="notranslate"><code>--detect-cp-full</code></span></td> <td>prints control panel, version and panel specific data (<span class="notranslate">CP_NAME,CP_VERSION</span>,...). Specific data: for <span class="notranslate">ISP Manager5 - Master/Node</span></td></tr> <tr><td><span class="notranslate"><code>--detect-cp-nameonly</code></span></td> <td>prints control panel name (<span class="notranslate">CP_NAME</span>)</td></tr> <tr><td><span class="notranslate"><code>--get-admin-email</code></span></td> <td>prints control panel admin email (<span class="notranslate">CP_ADMIN_EMAIL</span>)</td></tr> <tr><td><span class="notranslate"><code>--cxs-installed</code></span></td> <td>check if CXS is installed. Returns 0 if installed, 1 otherwise</td></tr> <tr><td><span class="notranslate"><code>--cpanel-suphp-enabled</code></span></td> <td>check if suPHP is enabled in cPanel.Returns 0 if enabled, 1 otherwise</td></tr> <tr><td><span class="notranslate"><code>--detect-litespeed</code></span></td> <td>check if LiteSpeed is installed. Returns 0 if installed, 1 otherwise</td></tr> <tr><td><span class="notranslate"><code>--detect-postgresql</code></span></td> <td>check if PostGreSQL is installed. Returns 0 if installed, 1 otherwise</td></tr> <tr><td><span class="notranslate"><code>--print-apache-gid</code></span></td> <td>prints current apache gid</td></tr> <tr><td><span class="notranslate"><code>--print-da-admin</code></span></td> <td>prints DirectAdmin admin user</td></tr> <tr><td><span class="notranslate"><code>--set-securelinks-gid</code></span></td> <td>changes <code>/etc/sysctl.conf</code> if apache gid != 48 (default)</td></tr> <tr><td><span class="notranslate"><code>--set-nagios</code></span></td> <td>do some adjustments to make nagios work correctly if it's installed. Called as a part of <code>--setup-supergids</code></td></tr> <tr><td><span class="notranslate"><code>--setup-supergids</code></span></td> <td>do some adjustments to make special users/software (nagios, cPanel’s mailman) work correctly if it is installed to the system</td></tr> <tr><td><span class="notranslate"><code>--cl-setup</code></span></td> <td>check if CloudLinux is installing. Returns 0 if installing, 1 otherwise</td></tr> <tr><td><span class="notranslate"><code>--update-license</code></span></td> <td>updates license</td></tr> <tr><td><span class="notranslate"><code>--update-new-key</code></span></td> <td>updates license with new key</td></tr> <tr><td><span class="notranslate"><code>--check-license</code></span></td> <td>check license. Returns OK if license is not older than 3 days, error message otherwise</td></tr> <tr><td><span class="notranslate"><code>-q</code></span></td> <td>check license. Returns 0 if license is not older than 3 days, 1 otherwise</td></tr> <tr><td><span class="notranslate"><code>--no-valid-license-screen</code></span></td> <td>returns no valid license found screen</td></tr> <tr><td><span class="notranslate"><code>--license-out-of-date-email</code></span></td> <td>returns License out of Date Email.</td></tr> <tr><td><span class="notranslate"><code>--check-openvz</code></span></td> <td>returns enviroment id</td></tr></tbody></table> <h4 id="clsupergid-auto-configuration"><a href="#clsupergid-auto-configuration" class="header-anchor">#</a> <strong>clsupergid auto-configuration</strong></h4> <p>Each time <span class="notranslate"><code>lve-utils</code></span> package is installed or upgraded it does some automatic system re-configuration to make some software (like nagios) work correctly, if it’s installed, by calling <span class="notranslate"><code>cldetect --setup-supergids</code></span> command.</p> <p>Starting from <span class="notranslate"><strong><em>lve-utils 3.0-21</em></strong></span> a behaviour of <span class="notranslate"><code>cldetect --set-nagios</code></span> (now, it’s a part of <span class="notranslate"><code>cldetect --setup-supergids</code></span>) command slightly changed.</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td></td> <td><strong>Old behavior</strong></td> <td><strong>New behavior</strong></td></tr> <tr><td>If <span class="notranslate"><strong>fs.proc_super_gid</strong></span> is 0 (which means it’s not configured) or it’s set to some GID that doesn’t exist in the system.</td> <td>Command will set <span class="notranslate"><code>sysctl fs.proc_super_gid</code></span> to point to Nagios GID.</td> <td>Command will create special <span class="notranslate"><code>clsupergid</code></span> group, setup <span class="notranslate"><code>sysctl fs.proc_super_gid</code></span> to point to it’s GID and add Nagios user to this group.</td></tr></tbody></table> <p>If <strong>fs.proc_super_gid</strong> was configured by an admin to some existing group, the command will just add Nagios user to this group.</p> <h3 id="cldiag"><a href="#cldiag" class="header-anchor">#</a> cldiag</h3> <p><code>cldiag</code> utility is included in <span class="notranslate"><code>lve-utils</code></span> package and is intended for:</p> <ul><li>server diagnostics performed by a server administrator for detecting the most common errors in the configuration or software operation;</li> <li>the focused check of the servers for typical errors performed by the support engineers before proceeding to the detailed analysis of the customer tickets;</li> <li>servers automatic check by cron with the following generation of the reports and email them to the server administrator.</li></ul> <p>In all cases, for the negative checker result, the exit code will be &gt; 0 (at the moment it will be equal to the number of failed checkers).</p> <p>All the checkers support additional <span class="notranslate"><code>--json</code></span> option with the unified output in an appropriate format.</p> <p>For example:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cldiag --symlinksifowner --json

{&quot;total_errors&quot;: 0, &quot;Check fs.enforce_symlinksifowner is correctly enabled in /etc/sysctl.conf&quot;: {&quot;res&quot;: &quot;OK&quot;, &quot;msg&quot;: &quot;fs.enforce_symlinksifowner = 1&quot;}}
</code></pre></div></div> <p>Each checker returns a typical result with the name of the check performed (brief description), one of the possible statuses of its execution, and detailed information on its fail or success.</p> <p>For example:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>Check fs.enforce_symlinksifowner is correctly enabled in /etc/sysctl.conf:

OK: fs.enforce_symlinksifowner = 1

Check suexec has cagefs jail:

SKIPPED: SuEXEC is not enabled
</code></pre></div></div> <p>Possible checkers results:</p> <ol><li><span class="notranslate"><code>OK</code></span> - the check succeeded.</li> <li><span class="notranslate"><code>FAILED</code></span> - the check revealed a problem.</li> <li><span class="notranslate"><code>SKIPPED</code></span> - the check was skipped as it made no sense in the actual environment (e.g. wrong control panel) or it could not be executed for some reason (e.g. no users with enabled CageFS found). Such result doesn’t mean there is a problem and can be considered as a positive.</li> <li><span class="notranslate"><code>INTERNAL_TEST_ERROR</code></span> - the check has failed because of a problem in the checker itself. Please report such problems using <a href="https://cloudlinux.zendesk.com/agent/" target="_blank" rel="noopener noreferrer">https://cloudlinux.zendesk.com/agent/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ol> <p>The utility includes several built-in checkers, and can also import and run checkers from other utilities.</p> <p>Currently implemented checkers:</p> <ol><li><span class="notranslate"><code>--diag-cp</code></span></li></ol> <p>Checks control panel and its configuration (for DirectAdmin only).</p> <p>Checking control panel availability, thereby detecting it with our code. Displaying control panel name and version. Also, for DirectAdmin, checking if CloudLinux support is enabled in its config.</p> <p>Fails if <span class="notranslate"><code>/usr/local/directadmin/custombuild/options.conf</code></span> does not contain <span class="notranslate"><code>cloudlinux=yes</code></span> line (for DirectAdmin control panel).</p> <ol start="2"><li><span class="notranslate"><code>--symlinksifowner</code></span></li></ol> <p>Checks fs.enforce_symlinksifowner is correctly enabled in <span class="notranslate"><code>/etc/sysctl.conf</code></span>.</p> <p>Checking specified kernel setup described in <a href="/cloudlinux_os_kernel/#symlink-owner-match-protection">this docs section</a> for deprecated value and displaying its current value.</p> <p>Fails if <span class="notranslate"><code>/proc/sys/fs/enforce_symlinksifowner</code></span> contains value <code>2</code> (it is deprecated and can cause issues for the system operation).</p> <ol start="3"><li><span class="notranslate"><code>--check-suexec</code></span></li></ol> <p>Checks suexec has <span class="notranslate">cagefs</span> jail.</p> <p>In case if <span class="notranslate">CageFS</span> is installed and SuEXEC is on, checking if <span class="notranslate">CageFS</span> is enabled for SuEXEC.</p> <p>Fails if CageFS is not enabled for suexec binary.</p> <ol start="4"><li><span class="notranslate"><code>--check-suphp</code></span></li></ol> <p>Checks suphp has <span class="notranslate">cagefs</span> jail.</p> <p>In case if <span class="notranslate">CageFS</span> is installed and SuPHP is on, checking if <span class="notranslate">CageFS</span> is enabled for SuPHP.</p> <p>Fails if CageFS is not enabled for suphp binary.</p> <ol start="5"><li><span class="notranslate"><code>--check-usepam</code></span></li></ol> <p>Checks UsePAM in <span class="notranslate"><code>/etc/ssh/sshd_config</code></span>.</p> <p>Checking if <span class="notranslate"><code>/etc/ssh/sshd_config</code></span> config file contains <span class="notranslate"><code>UsePAM yes</code></span> line, which is required for pam_lve correct work with sshd.</p> <p>Fails if <span class="notranslate"><code>/etc/ssh/sshd_config</code></span> contains <span class="notranslate"><code>UsePAM no</code></span> line.</p> <ol start="6"><li><span class="notranslate"><code>--check-symlinkowngid</code></span></li></ol> <p>Checks <span class="notranslate"><code>fs.symlinkown_gid</code></span>.</p> <p>First checking if user <span class="notranslate"><code>Apache</code></span> is available in the system (on some panels users <code>httpd</code> or <span class="notranslate"><code>nobody</code></span> with special GID are present instead of <span class="notranslate"><code>Apache</code></span>, they are detected correctly as well). Then, if such user exists, checking that his GID equals to the one specified in sysctl or that this user belongs to this supplemental group. If these conditions are met, then the protection effect described in <a href="/cloudlinux_os_kernel/#symlink-owner-match-protection">this docs section</a> is applied to this user, and the appropriate message will be displayed.</p> <p>Fails if Apache user is not in the group specified in <span class="notranslate"><code>/proc/sys/fs/symlinkown_gid</code></span>.</p> <ol start="7"><li><span class="notranslate"><code>--check-cpanel-packages</code></span></li></ol> <p>Checks existence of all user's packages (cPanel only)</p> <p>Reading <span class="notranslate"><code>PLAN=</code></span> for all users from <span class="notranslate"><code>/var/cpanel/users</code></span> and checking if all of them are present in <span class="notranslate"><code>/var/cpanel/packages</code></span> and if not, then displaying them in pairs like <span class="notranslate"><code>user: plan</code>. <code>default</code></span> and <span class="notranslate"><code>undefined</code></span> packages are excluded from the check.</p> <p>Fails if users from <span class="notranslate"><code>/var/cpanel/users/</code></span> directory have non-existing packages (packages do not exist in <span class="notranslate"><code>/var/cpanel/packages/</code></span> directory, except for <span class="notranslate"><code>undefined</code></span> and <span class="notranslate"><code>default</code></span>).</p> <ol start="8"><li><span class="notranslate"><code>--check-defaults-cfg</code></span></li></ol> <p>Checks <span class="notranslate"><code>/etc/cl.selector/default.cfg</code></span>.</p> <p>Checking that if this config exists, the default PHP version is not disabled in it. Also performing minimal syntax checks for PHP modules settings and displaying the incorrect.</p> <p>Fails if there are some problems in <span class="notranslate"><code>/etc/cl.selector/default.cfg</code></span> found.</p> <p>Possible reasons for failure:</p> <ul><li>Default version is undefined, which means <span class="notranslate"><code>/etc/cl.selector/default.cfg</code></span> file does not contain section [versions] with the defined default version.</li> <li>Default PHP version is disabled.</li></ul> <ol start="9"><li><span class="notranslate"><code>--check-cagefs</code></span></li></ol> <p>All checks for CageFS are described separately in <a href="/command-line_tools/#sanity-check">this docs section</a> and their start from cagefsctl utility is completely equivalent to the start from cldiag and is designed only for a better experience.</p> <p>This checker includes a set of CageFS sub-checkers, failure of one (or more) of them causes general checker failure.</p> <ol start="10"><li><span class="notranslate"><code>--check-php-conf</code></span></li></ol> <p>Checks <span class="notranslate"><code>/etc/cl.selector/php.conf</code></span>.</p> <p>Checking the config syntax for acceptable blocks and directives.</p> <p>Fails if <span class="notranslate"><code>/etc/cl.selector/php.conf</code></span> has incorrect format.</p> <ul><li><p>File contains an invalid parameter (valid parameters: <span class="notranslate"><code>Directive</code></span>, <span class="notranslate"><code>Default</code></span>, <span class="notranslate"><code>Type</code></span>, <span class="notranslate"><code>Comment</code></span>, <span class="notranslate"><code>Range</code></span>, <span class="notranslate"><code>Remark</code></span>).</p></li> <li><p>File contains an invalid setting for the parameter <span class="notranslate"><code>Type</code></span> (valid settings for the  <span class="notranslate"><code>Type</code></span> parameter: <span class="notranslate"><code>value</code>, <code>list</code>, <code>bool</code></span>)</p></li></ul> <ol start="11"><li><span class="notranslate"><code>--check-phpselector</code></span></li></ol> <p>Checks compatibility for the <span class="notranslate">PHP Selector</span></p> <p>Detecting which PHP handler has been configured on the server and checking its compatibility with the <span class="notranslate">CloudLinux PHP Selector</span> according to <a href="/limits/#compatibility-matrix">this table</a> and displaying the corresponding message with the link to the documentation in case of a problem detected. No checks are performed for EasyApache3.</p> <p>Failure reasons:</p> <ul><li>The installed <span class="notranslate"><code>mod_ruid</code></span> package is incompatible with the <span class="notranslate">PHP Selector</span></li> <li><span class="notranslate"><code>mod_suexec</code></span> is not installed</li> <li><span class="notranslate"><code>mod_suphp</code></span> is not installed</li> <li>Absence of the <span class="notranslate"><code>/usr/local/lsws/conf/httpd_config.xml</code></span> file (only for LiteSpeed server)</li></ul> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>The following checkers are available in <span class="notranslate"><strong>lve-utils &gt;= 3.1.2</strong></span></p></div><ol start="12"><li><span class="notranslate"><code>--check-lve-limits</code></span></li></ol> <p>Checks the validity of LVE limits on the server.</p> <p><a href="/limits/#limits-validation">See this page for detailed description</a>.</p> <ol start="13"><li><span class="notranslate"><code>--check-rpmdb</code></span></li></ol> <div class="warning custom-block"><p class="custom-block-title">Warning</p><p>This checker was removed from the cldiag utility as <code>cldiag --check-rpmdb</code> can in some cases hang up during <code>rpmdb</code> check, which can brake access to the database for <code>rpm/yum</code> utilities.</p></div><h3 id="cloudlinux-config"><a href="#cloudlinux-config" class="header-anchor">#</a> cloudlinux-config</h3> <p><strong>cloudlinux-config</strong> utility shows/sets various parameters related to <a href="/lve_manager/#lve-manager-options">LVE Manager</a> UI, <a href="/cloudlinux_os_components/#configuration-and-operation">MySQL Governor</a> and <a href="/cloudlinux_os_components/#configuration">faults notifications for LVE-Stats 2</a></p> <p><strong>Usage:</strong></p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-config get [--json] [--for-reseller resname ]
cloudlinux-config set [--json] --data &lt;str&gt; [--for-reseller resname ]
cloudlinux-config set [--json] --reset-inodes-limit
</code></pre></div></div> <p><strong>Commands:</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>get</code></span></td> <td>Shows the values of all supported parameters</td></tr> <tr><td><span class="notranslate"><code>set</code></span></td> <td>Sets values for supported parameters</td></tr></tbody></table> <p><strong>Options</strong></p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>--json</code></span></td> <td>Sets/returns values in json format</td></tr> <tr><td><span class="notranslate"><code>--data</code></span></td> <td>Sets values from the data string that follows</td></tr> <tr><td><span class="notranslate"><code>--for-reseller</code></span></td> <td>Sets/limits the output only to the data related to reseller <em>resname</em></td></tr> <tr><td><span class="notranslate"><code>--reset-inodes-limit</code></span></td> <td>Resets inode limits (in case disk quota breaks)</td></tr></tbody></table> <p><strong>JSON data structure</strong></p> <p>All options are enclosed inside <span class="notranslate"><code>options</code></span> (Level 0) string. All options are enclosed in <code>&quot; &quot;</code>, while values come as is. Here's an example:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>'{&quot;options&quot;:{&quot;L1_option1&quot;:value1, &quot;L1_option2&quot;:value2}}'
</code></pre></div></div> <p>Each Level1 option can have nested Level2 options specified using the same syntax, the same goes for Level2 and Level3 options respectively.</p> <p><strong>LVE-Stats 2 faults notification settings</strong></p> <table><thead><tr><th></th> <th></th> <th></th> <th></th> <th></th> <th></th></tr></thead> <tbody><tr><td>Level1</td> <td>Level2</td> <td>Level3</td> <td>Level4</td> <td>Possible values</td> <td>Description</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>faultsToInclude</code></span></td> <td><span class="notranslate"><code>concurrentConnections</code></span></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Include concurrent connection value in notification emails</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>faultsToInclude</code></span></td> <td><span class="notranslate"><code>cpu</code></span></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Include CPU consumption value in notification emails</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>faultsToInclude</code></span></td> <td><span class="notranslate"><code>io</code></span></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Include IO value in notification emails</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>faultsToInclude</code></span></td> <td><span class="notranslate"><code>iops</code></span></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Include IOPS value in notification emails</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>faultsToInclude</code></span></td> <td><span class="notranslate"><code>mem</code></span></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Include RAM consumption value in notification emails</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>faultsToInclude</code></span></td> <td><span class="notranslate"><code>nproc</code></span></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Include number of processes value in notification emails</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>fminimumNumberOfFaultsToNotify</code></span></td> <td><span class="notranslate"><code>admin</code></span></td> <td></td> <td><code>N</code></td> <td>The minimum number of faults to notify for admin</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>fminimumNumberOfFaultsToNotify</code></span></td> <td><span class="notranslate"><code>user</code></span></td> <td></td> <td><code>N</code></td> <td>The minimum number of faults to notify for users</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>fminimumNumberOfFaultsToNotify</code></span></td> <td><span class="notranslate"><code>reseller</code></span><sup> *</sup></td> <td></td> <td><code>N</code></td> <td>The minimum number of faults to notify for reseller</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>fminimumNumberOfFaultsToNotify</code></span></td> <td><span class="notranslate"><code>customer</code></span><sup> *</sup></td> <td></td> <td><code>N</code></td> <td>The minimum number of faults to notify for reseller's customers</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notify</code></span></td> <td><span class="notranslate"><code>admin</code></span></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>The period of faults notifications for admin</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notify</code></span></td> <td><span class="notranslate"><code>admin</code></span></td> <td><span class="notranslate"><code>unitOfTime</code></span></td> <td><span class="notranslate"><code>minutes</code></span>/<span class="notranslate"><code>hours</code></span>/<span class="notranslate"><code>days</code></span></td> <td>Time units of period of faults notifications for admin</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notify</code></span></td> <td><span class="notranslate"><code>user</code></span></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>The period of faults notifications for users</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notify</code></span></td> <td><span class="notranslate"><code>user|&lt;span class=&quot;notranslate&quot;&gt;</code>unitOfTime<code>&lt;/span&gt;|&lt;span class=&quot;notranslate&quot;&gt;</code>minutes<code>&lt;/span&gt;/&lt;span class=&quot;notranslate&quot;&gt;</code>hours<code>&lt;/span&gt;/&lt;span class=&quot;notranslate&quot;&gt;</code>days`</span></td> <td>Time units of period of faults notifications for users</td> <td></td> <td></td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notify</code></span></td> <td><span class="notranslate"><code>reseller</code></span><sup> *</sup></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>The period of faults notifications for resellers</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notify</code></span></td> <td><span class="notranslate"><code>reseller</code></span><sup> *</sup></td> <td><span class="notranslate"><code>unitOfTime</code></span></td> <td><span class="notranslate"><code>minutes</code></span>/<span class="notranslate"><code>hours</code></span>/<span class="notranslate"><code>days</code></span></td> <td>Time units of period of faults notifications for resellers</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notify</code></span></td> <td><span class="notranslate"><code>customer</code></span><sup> *</sup></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>The period of faults notifications for reseller's customers</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notify</code></span></td> <td><span class="notranslate"><code>customer*|&lt;span class=&quot;notranslate&quot;&gt;</code>unitOfTime<code>&lt;/span&gt;|&lt;span class=&quot;notranslate&quot;&gt;</code>minutes<code>&lt;/span&gt;/&lt;span class=&quot;notranslate&quot;&gt;</code>hours<code>&lt;/span&gt;/&lt;span class=&quot;notranslate&quot;&gt;</code>days`</span></td> <td>Time units of period of faults notifications for reseller's customers</td> <td></td> <td></td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notifyAdmin</code></span></td> <td></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Send faults notifications to admin</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notifyResellerCustomers</code></span></td> <td></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Send faults notification to reseller users</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notifyResellerOnCustomers</code></span><sup> *</sup></td> <td></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Send users' faults notifications to the respective reseller</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notifyReseller</code></span><sup> *</sup></td> <td></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Send faults notification to reseller</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notifyCustomers</code></span></td> <td></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Send faults notifications to users</td></tr> <tr><td><span class="notranslate"><code>faultsNotification</code></span></td> <td><span class="notranslate"><code>notifyResellers</code></span></td> <td></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Send faults notification to resellers</td></tr></tbody></table> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>Options marked with <code>*</code> are for reseller use only</p></div><p><strong>MySQL Governor settings</strong></p> <table><thead><tr><th></th> <th></th> <th></th> <th></th> <th></th> <th></th></tr></thead> <tbody><tr><td>Level1</td> <td>Level2</td> <td>Level3</td> <td>Level4</td> <td>Possible values</td> <td>Description</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>errorLog</code></span></td> <td><span class="notranslate"><code>level</code></span></td> <td></td> <td><span class="notranslate"><code>DEBUG</code></span>/<span class="notranslate"><code>ERROR</code></span></td> <td>Sets error log level</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>errorLog</code></span></td> <td><span class="notranslate"><code>logPath</code></span></td> <td></td> <td><span class="notranslate"><code>/var/log/dbgovernor-error.log</code></span></td> <td>Sets error log destination file</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>gatherDataForDetailedStats</code></span></td> <td></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Enables gathering data for detailed statistics</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>logRestrictedUsersQueries</code></span></td> <td></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Enables logging of restricted user queries</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>modeOfOperation</code></span></td> <td></td> <td></td> <td><span class="notranslate"><code>off</code></span>/<span class="notranslate"><code>single</code></span>/<span class="notranslate"><code>abusers</code></span>/<span class="notranslate"><code>all</code></span></td> <td>Sets the mode of operation</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictLog</code></span></td> <td><span class="notranslate"><code>format</code></span></td> <td></td> <td><span class="notranslate"><code>SHORT</code></span>/<span class="notranslate"><code>MEDIUM</code></span>/<span class="notranslate"><code>LONG</code></span>/<span class="notranslate"><code>VERYLONG</code></span></td> <td>Sets the format for restrict log</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictLog</code></span></td> <td><span class="notranslate"><code>logPath</code></span></td> <td></td> <td><span class="notranslate"><code>/var/log/dbgovernor-restrict.log</code></span></td> <td>Sets the format for restrict log</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictType</code></span></td> <td><span class="notranslate"><code>mode</code></span></td> <td></td> <td><span class="notranslate"><code>period</code></span>/<span class="notranslate"><code>limit</code></span></td> <td>Sets the restriction mode</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictType</code></span></td> <td><span class="notranslate"><code>unlimit</code></span></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>Sets the restriction expiration period</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictType</code></span></td> <td><span class="notranslate"><code>unlimit</code></span></td> <td><span class="notranslate"><code>unitOfTime</code></span></td> <td><span class="notranslate"><code>seconds</code></span>/<span class="notranslate"><code>minutes</code></span>/<span class="notranslate"><code>hours</code></span>/<span class="notranslate"><code>days</code></span></td> <td>Sets the restriction expiration period units of time</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>level1</code></span></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>Sets L1 restriction time period</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>level1</code></span></td> <td><span class="notranslate"><code>unitOfTime</code></span></td> <td><span class="notranslate"><code>seconds</code></span>/<span class="notranslate"><code>minutes</code></span>/<span class="notranslate"><code>hours</code></span>/<span class="notranslate"><code>days</code></span></td> <td>Sets L1 restriction time period units of time</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>level2</code></span></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>Sets L2 restriction time period</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>level2</code></span></td> <td><span class="notranslate"><code>unitOfTime</code></span></td> <td><span class="notranslate"><code>seconds</code></span>/<span class="notranslate"><code>minutes</code></span>/<span class="notranslate"><code>hours</code></span>/<span class="notranslate"><code>days</code></span></td> <td>Sets L2 restriction time period units of time</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>level3</code></span></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>Sets L3 restriction time period</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>level3</code></span></td> <td><span class="notranslate"><code>unitOfTime</code></span></td> <td><span class="notranslate"><code>seconds</code></span>/<span class="notranslate"><code>minutes</code></span>/<span class="notranslate"><code>hours</code></span>/<span class="notranslate"><code>days</code></span></td> <td>Sets L3 restriction time period units of time</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>level4</code></span></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>Sets L4 restriction time period</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>level4</code></span></td> <td><span class="notranslate"><code>unitOfTime</code></span></td> <td><span class="notranslate"><code>seconds</code></span>/<span class="notranslate"><code>minutes</code></span>/<span class="notranslate"><code>hours</code></span>/<span class="notranslate"><code>days</code></span></td> <td>Sets L4 restriction time period units of time</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>timeout</code></span></td> <td><span class="notranslate"><code>period</code></span></td> <td><code>N</code></td> <td>Sets restriction time period timeout</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>restrictedTimePeriods</code></span></td> <td><span class="notranslate"><code>timeout</code></span></td> <td><span class="notranslate"><code>unitOfTime</code></span></td> <td><span class="notranslate"><code>seconds</code></span>/<span class="notranslate"><code>minutes</code></span>/<span class="notranslate"><code>hours</code></span>/<span class="notranslate"><code>days</code></span></td> <td>Sets L1 restriction time period timeout units of time</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>scriptPath</code></span></td> <td></td> <td></td> <td><span class="notranslate"><code>/path/to/script</code></span></td> <td>Path to script to be triggered when account is restricted</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>slowQueries</code></span></td> <td><span class="notranslate"><code>kill</code></span></td> <td></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Enables killing of slow queries</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>slowQueries</code></span></td> <td><span class="notranslate"><code>logPath</code></span></td> <td></td> <td><span class="notranslate"><code>/path/to/sqkill.log</code></span></td> <td>Sets the path to slow query kill log file</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>slowQueries</code></span></td> <td><span class="notranslate"><code>timeout</code></span></td> <td></td> <td><code>N</code></td> <td>Time to kill slow SELECT queries for account (seconds)</td></tr> <tr><td><span class="notranslate"><code>mySQLGovSettings</code></span></td> <td><span class="notranslate"><code>userMaxConnections</code></span></td> <td></td> <td></td> <td><code>N</code></td> <td>Sets the maximum number of user connections to database</td></tr></tbody></table> <p><strong>LVE Manager UI settings</strong></p> <table><thead><tr><th></th> <th></th> <th></th> <th></th></tr></thead> <tbody><tr><td>Level1</td> <td>Level2</td> <td>Possible values</td> <td>Description</td></tr> <tr><td><span class="notranslate"><code>inodeLimits</code></span></td> <td><span class="notranslate"><code>showUserInodesUsage</code></span></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Show end user inode usage</td></tr> <tr><td><span class="notranslate"><code>uiSettings</code></span></td> <td><span class="notranslate"><code>hideLVEUserStat</code></span></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Hide LVE end user usage statistic</td></tr> <tr><td><span class="notranslate"><code>uiSettings</code></span></td> <td><span class="notranslate"><code>hidePHPextensions</code></span></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Hide PHP extension selection</td></tr> <tr><td><span class="notranslate"><code>uiSettings</code></span></td> <td><span class="notranslate"><code>hidePythonApp</code></span></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Hide Python App in web-interface</td></tr> <tr><td><span class="notranslate"><code>uiSettings</code></span></td> <td><span class="notranslate"><code>hideRubyApp</code></span></td> <td><span class="notranslate"><code>true</code></span>/<span class="notranslate"><code>false</code></span></td> <td>Hide Ruby App in web-interface</td></tr></tbody></table> <p><strong>Examples</strong></p> <ul><li>display Python/Ruby Selector in User UI (cPanel)</li></ul> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ cloudlinux-config set --json --data '{&quot;options&quot;:{&quot;uiSettings&quot;:{&quot;hideRubyApp&quot;:false, &quot;hidePythonApp&quot;:false}‌}}'
</code></pre></div></div> <h3 id="cl-quota"><a href="#cl-quota" class="header-anchor">#</a> cl-quota</h3> <p><span class="notranslate"><strong>cl-quota</strong></span> utility is designed to control <span class="notranslate">disk quotas</span> and provides:</p> <ul><li><p>Setting user and package limits.</p></li> <li><p>Integration with panel packages.</p></li> <li><p>Limits synchronization.</p></li> <li><p>Automatic inheritance of panel limits to all appropriate users.</p></li></ul> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>cl-quota works only with inodes soft/hard limits (soft/hard file limits in setquota/repquota utilities terminology). Block limits are not controlled by cl-quota utility in any way, they are not taken into account and do not affect the data that they issue. That is why hereinafter it is the inode limits that are implied by the word “limits”.</p></div><h4 id="general-provisions"><a href="#general-provisions" class="header-anchor">#</a> General provisions</h4> <p><span class="notranslate"> cl-quota </span> utility never sets/reads limits directly in the system, it uses standard <span class="notranslate"> setquota/repquota </span> utilities included into the <span class="notranslate"> quota </span> package for this purpose.</p> <p><span class="notranslate"> cl-quota </span> <strong>will not work</strong> in the following cases:</p> <ul><li><p><span class="notranslate"> setquota/repquota </span> are missing or working incorrectly;</p></li> <li><p>the <span class="notranslate"> quotas </span> are not configured in the system.</p></li></ul> <p><span class="notranslate"> cl-quota </span> only <strong>performs</strong> the minimal diagnostics of <span class="notranslate"> quota </span> related errors:</p> <ul><li><p>verifies the availability of <span class="notranslate"> setquota/repquota </span> utilities on the disk;</p></li> <li><p>verifies if <span class="notranslate"> quotas </span> are activated for a specified user (with a separate command), see below.</p></li></ul> <p><span class="notranslate"> quota </span> package which contains the required <span class="notranslate"> setquota/repquota </span> utilities, is not included in <span class="notranslate"> lvemanager </span> package dependencies by default, and <span class="notranslate"> quotas </span> activation is a long process which sometimes depends on the panel used, therefore, all the steps on <span class="notranslate"> quotas </span> configuration and activation must be carried out by yourself, <span class="notranslate"> cl-quota </span> does not perform these actions.</p> <p>Error messages sent back to the console are extremely rare, to receive error messages use the command:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code># cat /var/log/messages | grep clquota
</code></pre></div></div> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>You should not set soft limit higher than hard limit. cl-quota does not control it in any way, but in some cases, the system can ban such limits combination and they won’t be set or will be set in some other way.</p></div><h4 id="setting-limits-and-integration-with-panel-packages"><a href="#setting-limits-and-integration-with-panel-packages" class="header-anchor">#</a> Setting limits and integration with panel packages</h4> <p><span class="notranslate"> cl-quota </span> utility allows setting <span class="notranslate"> inodes </span> limits for users of the system.</p> <p><span class="notranslate"> cl-quota </span> integrates with the panels through a standard mechanism - <a href="/lve_manager/#detecting-and-working-with-cloudlinux">Integrating LVE Limits with Packages</a> .</p> <p>Panel users are such users whose UIDs are issued by the above panel integration mechanism. The list of panel packages and the information on the user's affiliation to a particular package is obtained from there as well.</p> <p>When installing/reading the limits, the following peculiarities are applied:</p> <ol><li><p>When displaying <span class="notranslate"> quotas, cl-quota </span> displays information about the limits of all users - system and panel. No filter applied. The actual limit values are always displayed.</p></li> <li><p>Limit value -1 for the packages (see below) is displayed as dash (-).</p></li> <li><p>If <span class="notranslate"> cl-quota </span> is running under <span class="notranslate"> root </span> , it will display the limits returned by <span class="notranslate"> repquota </span> utility with no changes. If it is running under some other user, it will return data from a special cache file, see <a href="/lve_manager/#caching-and-synchronizing-the-limits">Quotas cache and synchronization</a>.</p></li> <li><p>Limits setting only works for panel users, for all other users limits are not set (the command is ignored). The only exception - <span class="notranslate"> uid=0 </span> . The limits are never set for the <span class="notranslate"> root </span> user <span class="notranslate"> (uid=0) </span> , but they are stored in <span class="notranslate"> DB </span> file and are used by inheritance mechanism. See <a href="/lve_manager/#limits-inheritance">Limits Inheritance</a>.</p></li> <li><p><span class="notranslate"> Hard </span> and <span class="notranslate"> soft </span> limits are completely independent, <span class="notranslate"> сl-quota </span> does not apply any interdependencies to them. Setting only one of them (any) is acceptable, the other one will not change.</p></li></ol> <p><span class="notranslate"> cl-quota </span> utility also supports package limits set/read. When setting package limits, they are set for all users of a particular package except for those whose limits are set individually. See also <a href="/lve_manager/#limits-inheritance">Limits Inheritance</a>.</p> <p>If package name is <span class="notranslate"> &quot;default&quot; </span> , then setting limits command is ignored. If some limits are set for this package in <span class="notranslate"> DB </span> file, they will be displayed along with all the others, but will not be used. See also <a href="/lve_manager/#limits-inheritance">Limits inheritance</a>.</p> <p>Any positive numbers are allowed as limit values. <span class="notranslate"> cl-quota </span> neither controls nor changes these values except the following cases:</p> <p>negative values are taken modulo;</p> <p>fractional values are converted to integers by discarding the fractional part;</p> <p>if the transferred value can not be turned into a number (for example, 67wg76), it is completely ignored and the limit is not set at all.</p> <p>Then these values are transmitted directly to <span class="notranslate"> setquota </span> system utility for the actual setting of the limits.</p> <p>Thus <span class="notranslate"> cl-quota </span> has two limit values, which are processed in a special way:</p> <ul><li><p>0: Means inheritance of the limit from the package where the user is located, or from <span class="notranslate"> uid=0 </span> . See also <a href="/lve_manager/#limits-inheritance">Limits inheritance</a> for more detailed information.</p></li> <li><p>-1: The real limits are set to 0, which means no limits, literally &quot;unlimited&quot;. This is legit both for individual and for package limits. Limit value -1 is stored in the database as well as any other but is never displayed.</p></li></ul> <p>You can use the words <span class="notranslate"> “default” </span> and <span class="notranslate"> “unlimited” </span> instead of 0 and -1 respectively, they are fully interchangeable. See also <a href="/lve_manager/#quotas-db-file">DB File</a> and <a href="/lve_manager/#cli-options-examples">CLI Options</a>.</p> <p>Individual and package limits are always saved in DB file. Limits from there are used when synchronizing <span class="notranslate"> quotas </span> . Please find more details in <a href="/lve_manager/#caching-and-synchronizing-the-limits">Limits Synchronization</a>.</p> <p>Also, find detailed information on DB file itself in <a href="/lve_manager/#quotas-db-file">Quotas DB File</a> section.</p> <p>Utility options are described in <a href="/lve_manager/#cli-options-examples">CLI Options</a> section.</p> <h4 id="limits-inheritance"><a href="#limits-inheritance" class="header-anchor">#</a> Limits inheritance</h4> <p>When setting package limits to the package users, the inheritance principle is applied. It means that:</p> <ul><li><p>If no individual limit is set to a user, then he inherits the limits of the package he belongs to.</p></li> <li><p>If no limit is set to a package (=0), then the users inherit uid=0 limits.</p></li></ul> <p>Limits of the package named <span class="notranslate"> “default” </span> (if found in the <span class="notranslate"> DB </span> file) will always be ignored and all the users of this package will get <span class="notranslate"> uid=0 </span> limits.</p> <h4 id="caching-and-synchronizing-the-limits"><a href="#caching-and-synchronizing-the-limits" class="header-anchor">#</a> Caching and synchronizing the limits</h4> <p>Any user of the system (including panel users) is always created with limits equal to 0. To assign him the limits of the corresponding package, the synchronization process is used.</p> <p>During the synchronization, <span class="notranslate"> cl-quota </span> utility reads the database file and sets the limits from it to the users and packages specified therein.
This mode is designed to set the correct limits for the new users and to restore them for the existing ones. When recovering, the current limits are neither read nor analyzed.</p> <p>Caching - is writing current limits to <span class="notranslate"><em>/etc/container/cl-quotas.cache</em></span> file. If <span class="notranslate"> cl-quota </span> is not started from the <span class="notranslate"> root </span> for reading the current limits, then it returns data from this file.</p> <p>When installing <span class="notranslate"> LVE Manager </span> package, a special <span class="notranslate"> cron job </span> is installed, which performs synchronization and caching ( <span class="notranslate"> cl-quota -YC </span> ) every 5 minutes. Therefore, the correct limits will be set for the user within 5 minutes from the moment of its creation.</p> <p>Caching and synchronization can also be performed separately, see <a href="/lve_manager/#cli-options-examples">&quot;CLI Options&quot;</a> section.</p> <p>To disable this feature add to the config file <em>/etc/sysconfig/cloudlinux</em> .</p> <h4 id="quotas-db-file"><a href="#quotas-db-file" class="header-anchor">#</a> Quotas DB file</h4> <p>All <span class="notranslate"> cl-quota </span> limits settings are stored in along with the <span class="notranslate"> UID </span> or the name of the package the limit was set for.</p> <p>When saving the limits to a file, the following rules are applied:</p> <ul><li><p>If a limit value is non-integer or non-numeric, then the rules from <span class="notranslate"> &quot;Setting limits and integrating with panel packages&quot; </span> section are applied. The assigned value is saved to the file.</p></li> <li><p>Limits are always saved in pairs, no matter if only one limit was set or both. The pair looks as follows: <span class="notranslate"> soft_limit:hard_limit </span> .</p></li> <li><p>The values 0 and -1, when having a predetermined meaning, are saved as is without any transformations.</p></li> <li><p>The words <span class="notranslate"> “default” </span> and <span class="notranslate"> “unlimited” </span> are saved as 0 and -1 respectively.</p></li> <li><p>If both limits for a user/package were set as 0, then such user/package is not saved in the file, and if it was previously there - it will be removed. Therefore, if a user/package is not mentioned in the file, then all its limits are inherited. See <a href="/lve_manager/#limits-inheritance">Limits Inheritance</a> section.</p></li></ul> <p>The lists of panel users, packages, and user-package correspondence are not saved anywhere, this information is always subtracted from the panel.</p> <p>Example:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>/etc/container/cl-quotas.dat
[users]
0 = 1000:2000
500 = -1:-1
958 = 0:20000
[packages]
pack1 = 5000:-1
</code></pre></div></div>
It follows that:
<ul><li><p>uid=0 limits are set to 1000:2000 - all users in the default package will obtain these limits.</p></li> <li><p>Both limits are set as unlimited for a user with uid=500, which means that its real limits will always be 0:0. The package limits do not affect this user.</p></li> <li><p><span class="notranslate"> Soft </span> limit of the user with uid=958 is inherited (0 means inheritance), his <span class="notranslate"> hard </span> limit is set to 20000 and it will not depend on the package limits or uid=0 limits.</p></li> <li><p>Limits 5000:-1 are set for pack1 package, therefore its real limits are: <span class="notranslate"> soft_limit=5000 </span> and <span class="notranslate"> hard_limit=0 </span> (unlimited).</p></li> <li><p>The users of <span class="notranslate"> pack1 </span> package will get <span class="notranslate"> pack1 </span> limits (5000:-1), the users of all the rest of the packages will get the limits of uid=0 because no limits are set for them. Exceptions: uid=500 and 958. uid=500 has both limits set individually, and uid=958 inherits only <span class="notranslate"> soft </span> limits.</p></li></ul> <h4 id="cli-options-examples"><a href="#cli-options-examples" class="header-anchor">#</a> CLI options/examples</h4> <p><span class="notranslate"> cl-quotа </span> utility has the following command line options:
</p><div class="notranslate"><p></p> <div class="language- extra-class"><pre class="language-text"><code>-u | --user                  : specifies the user
-U | --user-id              : specifies the user ID
-S | --soft-limit            : sets the soft limit for a user. Pass 0 or 'default' to set package default limit. Pass -1 or 'unlimited' to cancel limit
-H | --hard-limit            : sets the hard limit for a user. Pass 0 or 'default' to set package default limit. Pass -1 or 'unlimited' to cancel limit
-V | --csv                  : returns data as comma separated values
-p | --package              : specifies a package to set or get limits
-P | --package-limits        : prints package limits
-a | --all-package-limits : prints all package limits (including packages without limits)
-Y | --sync                  : synchronizes packages and users limits with the database
-C | --cache-content        : cache quota data to a file the database
-F | --force                : save user quotas even when they are equal to defaults
       --check                : check if quotas is enabled/activated/suported; if disabled show diagnostic information; using with --user or --user-id options
</code></pre></div></div> <p><span class="notranslate"><strong>--user</strong></span> and <span class="notranslate"><strong>--user-id</strong></span> options are designed to specify user whose limits are required to be set or displayed. <span class="notranslate"> --user </span> specifies user name, <span class="notranslate"> --user-id - uid </span> . It is acceptable to specify one or another.</p> <p><span class="notranslate"><strong>--package</strong></span> - specifies package name.</p> <p><span class="notranslate"><strong>--soft-limit</strong> ,  <strong>--hard-limit</strong></span> - specify <span class="notranslate"> soft </span> and <span class="notranslate"> hard </span> limits values respectively. It is acceptable to use words <span class="notranslate"> “default” </span> or <span class="notranslate"> “unlimited” </span> as limit value.</p> <p><span class="notranslate"><strong>--csv</strong></span> - displays limits in <span class="notranslate"> csv </span> format (instead of data formatted in the table).</p> <p><span class="notranslate"><strong>--package-limits</strong></span> - displaying the limits of the packages created by the panel admin.</p> <p><span class="notranslate"><strong>--all-package-limits</strong></span> - displaying the limits of all the packages, including the ones created by the resellers and packages with no users.</p> <p><span class="notranslate"><strong>--sync</strong></span> - synchronizes users <span class="notranslate"> quotas </span> and packages with the database.</p> <p><span class="notranslate"><strong>--cache-contents</strong></span> - performs <span class="notranslate"> quotas </span> caching.</p> <p><span class="notranslate"><strong>--force</strong></span> - saving user <span class="notranslate"> quotas </span> even if they are equal to the current.</p> <p><span class="notranslate"><strong>--check</strong></span> - performs diagnostics for a specified user. Can be used only when a user is specified (along with <span class="notranslate"> --user / --user-id </span> ).</p> <p><em>Examples:</em></p> <ol><li>Reading current user limits:</li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cl-quota
# cl-quota --csv
</code></pre></div></div> <ol start="2"><li>Reading current package limits:</li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cl-quota --package-limits
# cl-quota --all-package-limits
# cl-quota --package-limits --csv
# cl-quota --all-package-limits --csv
</code></pre></div></div> <ol start="3"><li>Specifying limits for a user:</li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cl-quota --user-id=500 --soft-limit=0 --hard-limit=0
# cl-quota --user-id=500 --soft-limit=unlimited
# cl-quota --user-id=500 --soft-limit=0 --hard-limit=-1
# cl-quota --user-id=958 --hard-limit=20000 --soft-limit=0 --force
</code></pre></div></div> <ol start="4"><li>Specifying limits for a package:</li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cl-quota --package pack1 --hard-limit=-1 --soft-limit=5000
# cl-quota --package pack1 --hard-limit=10000
# cl-quota --package pack1 --soft-limit=default
</code></pre></div></div> <ol start="5"><li>User diagnostics (with example output):</li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cl-quota --user-id=500 --check
Quota disabled for user id 500 (home directory /home/cltest1); quotaon: Mountpoint (or device) / not found or has no quota enabled.
</code></pre></div></div> <ol start="6"><li>Synchronizing <span class="notranslate"> quotas with caching (executed in cron): </span></li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code># cl-quota -YC
</code></pre></div></div> <h3 id="cloudlinux-limits"><a href="#cloudlinux-limits" class="header-anchor">#</a> cloudlinux-limits</h3> <p><span class="notranslate"><code>cloudlinux-limits</code></span> is an alternative to <code>lvectl</code> CLI tool for LVE management. <span class="notranslate"><code>cloudlinux-limits</code></span> utility allows you to get/set any CloudLinux limits.</p> <h4 id="usage-3"><a href="#usage-3" class="header-anchor">#</a> Usage:</h4> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-limits command [options] [options]
</code></pre></div></div> <h4 id="commands"><a href="#commands" class="header-anchor">#</a> Commands</h4> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>set</code></span></td> <td>set parameters for <span class="notranslate">LVE/username/reseller</span></td></tr> <tr><td><span class="notranslate"><code>get</code></span></td> <td>get parameters for <span class="notranslate">LVE/username/reseller</span></td></tr> <tr><td><span class="notranslate"><code>disable-reseller-limits</code></span></td> <td>enable <span class="notranslate">Reseller Limits</span> for a reseller/all resellers</td></tr> <tr><td><span class="notranslate"><code>enable-reseller-limits</code></span></td> <td>disable <span class="notranslate">Reseller Limits</span> for a reseller/all resellers</td></tr></tbody></table> <h4 id="options"><a href="#options" class="header-anchor">#</a> Options</h4> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td><span class="notranslate"><code>--json</code></span></td> <td>return data in JSON format</td></tr> <tr><td><span class="notranslate"><code>--lve-id &lt;int&gt;</code></span></td> <td>Display record only for that LVE ID</td></tr> <tr><td><span class="notranslate"><code>--username &lt;str&gt;</code></span></td> <td>Execute command only for that specific user</td></tr> <tr><td><span class="notranslate"><code>--reseller-name &lt;str&gt;</code></span></td> <td>Execute command only for that specific reseller</td></tr> <tr><td><span class="notranslate"><code>--reseller-id &lt;int&gt;</code></span></td> <td>Execute command only for that specific reseller ID</td></tr> <tr><td><span class="notranslate"><code>--all</code></span></td> <td>Execute command for all resellers</td></tr> <tr><td><span class="notranslate"><code>--for-reseller &lt;str&gt;</code></span></td> <td>Use a supplied reseller for get/set data</td></tr> <tr><td><span class="notranslate"><code>--domain &lt;str&gt;</code></span></td> <td>Show data only for that specific domain</td></tr> <tr><td><span class="notranslate"><code>--limits &lt;keys&gt;</code></span></td> <td>Available keys: <span class="notranslate"><code>speed</code></span>, <span class="notranslate"><code>nproc</code></span>, <span class="notranslate"><code>pmem</code></span>, <span class="notranslate"><code>vmem</code></span>, <span class="notranslate"><code>maxEntryProcs</code></span>, <span class="notranslate"><code>io</code></span>, <span class="notranslate"><code>iops</code></span>, <span class="notranslate"><code>mysql-gov</code></span>, <span class="notranslate"><code>mysql-cpu</code></span>, <span class="notranslate"><code>mysql-io</code></span>, <span class="notranslate"><code>cagefs</code></span>, <span class="notranslate"><code>inodes</code></span></td></tr> <tr><td><span class="notranslate"><code>--human-readable-numbers</code></span></td> <td>Return <span class="notranslate"><code>PMEM</code></span> and <span class="notranslate"><code>VMEM</code></span> limits in KBytes, MBytes or GBytes</td></tr> <tr><td><span class="notranslate"><code>--unlimited</code></span></td> <td>Set all limits to unlimited</td></tr> <tr><td><span class="notranslate"><code>--default [limits]</code></span></td> <td>Reset limits to the Package defaults. List of comma-separated limits to reset them to default or <span class="notranslate"><code>all</code></span></td></tr> <tr><td><span class="notranslate"><code>--mysql-gov &lt;ignored|watched&gt;</code></span></td> <td>Monitor or ignore by MySQL Governor</td></tr> <tr><td><span class="notranslate"><code>--cagefs &lt;enabled|disabled&gt;</code></span></td> <td>Enable or disable CageFS for a user</td></tr> <tr><td><span class="notranslate"><code>--mysql-restrict &lt;[un]restricted&gt;</code></span></td> <td>Set user restrict status with dbctl (<span class="notranslate"><code>restricted</code></span> or <span class="notranslate"><code>unrestricted</code></span>)</td></tr> <tr><td><span class="notranslate"><code>--mysql-unrestrict-all</code></span></td> <td>Unrestrict all restricted users with dbctl</td></tr> <tr><td><span class="notranslate"><code>--speed &lt;str&gt;</code></span></td> <td>Limit CPU usage for LVE</td></tr> <tr><td><span class="notranslate"><code>--pmem &lt;str&gt;</code></span></td> <td>Limit physical memory usage for applications inside LVE</td></tr> <tr><td><span class="notranslate"><code>--vmem &lt;str&gt;</code></span></td> <td>Limit virtual memory for applications inside LVE</td></tr> <tr><td><span class="notranslate"><code>--nproc &lt;str&gt;</code></span></td> <td>Limit number of processes for LVE</td></tr> <tr><td><span class="notranslate"><code>--io &lt;str&gt;</code></span></td> <td>Define IO limits for LVE</td></tr> <tr><td><span class="notranslate"><code>--iops &lt;str&gt;</code></span></td> <td>Limit IO per second for LVE</td></tr> <tr><td><span class="notranslate"><code>--maxEntryProcs &lt;str&gt;</code></span></td> <td>Limit number of entry processes for LVE</td></tr> <tr><td><span class="notranslate"><code>--mysql-cpu &lt;int&gt;</code></span></td> <td>Set MySQL Governor CPU limit (pct)</td></tr> <tr><td><span class="notranslate"><code>--mysql-io &lt;int&gt;</code></span></td> <td>Set MySQL Governor IO limit (read + write MB/s)</td></tr> <tr><td><span class="notranslate"><code>--inodes &lt;N,M&gt;</code></span></td> <td>Set inode limits. <code>N</code> - soft, <code>M</code> - hard</td></tr> <tr><td><span class="notranslate"><code>--save-all-parameters</code></span></td> <td>Save all parameters even if they match with default settings</td></tr> <tr><td><span class="notranslate"><code>-h</code></span>, <span class="notranslate"><code>--help</code></span></td> <td>Show this help message and exit</td></tr></tbody></table> <h4 id="examples-5"><a href="#examples-5" class="header-anchor">#</a> Examples</h4> <ol><li>Get IO, IOPS, and inodes limits for LVE ID 501:</li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-limits get --lve-id 501 --limits=io, iops, inodes
</code></pre></div></div> <ol start="2"><li>Set IO, IOPS, and soft inodes limits for LVE ID 501:</li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-limits set --lve-id 501 --io 200 --iops 100 --inodes N
</code></pre></div></div> <ol start="3"><li>Enable <span class="notranslate">Reseller Limits</span> feature for all resellers:</li></ol> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>cloudlinux-limits enable-reseller-limits --all
</code></pre></div></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/cloudlinux/cloudlinux-doc/edit/dev/docs/command-line_tools/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="back-to-top" data-v-5366e0dd><a href="/command-line_tools/#app" class="nav-arrow top back-to-top__link" data-v-5366e0dd></a></div> </div> <div class="footer" data-v-58ab2eba><div data-v-58ab2eba><a href="https://cloudlinux.com" data-v-58ab2eba><img src="/assets/img/we-are-cloudlinux.783ed390.svg" alt="We are Cloudlinux" data-v-58ab2eba></a></div> <div class="footer-company-title" data-v-58ab2eba>2021. CloudLinux Inc</div> <div data-v-58ab2eba><div data-v-58ab2eba><a href="https://cloudlinux.zendesk.com/hc/sections/115001344329-How-do-I" target="_blank" data-v-58ab2eba>How to</a></div><div data-v-58ab2eba><a href="https://www.cloudlinux.com/getting-started-with-cloudlinux-os" target="_blank" data-v-58ab2eba>Getting started</a></div><div data-v-58ab2eba><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" data-v-58ab2eba>Contact support</a></div><div data-v-58ab2eba><a href="https://www.cloudlinux.com/blog" target="_blank" data-v-58ab2eba>Blog</a></div></div> <div class="social" data-v-58ab2eba><span class="footer-social-text" data-v-58ab2eba>Stay in touch</span> <a href="https://www.facebook.com/cloudlinux/" target="_blank" data-v-58ab2eba><img src="/fb.png" class="footer-social-logo" data-v-58ab2eba></a><a href="https://twitter.com/cloudlinuxos/" target="_blank" data-v-58ab2eba><img src="/tw.png" class="footer-social-logo" data-v-58ab2eba></a><a href="https://linkedin.com/company/cloudlinux" target="_blank" data-v-58ab2eba><img src="/in.png" class="footer-social-logo" data-v-58ab2eba></a><a href="https://www.youtube.com/channel/UCZ3YMHWnMP7TaxlXVay5-aw" target="_blank" data-v-58ab2eba><img src="/ytube.png" class="footer-social-logo" data-v-58ab2eba></a></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.da36fadb.js" defer></script><script src="/assets/js/11.e59dcd5a.js" defer></script>
  </body>
</html>
